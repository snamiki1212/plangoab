{"version":3,"sources":["providers/MuiPickersUtilsProvider.tsx","components/atoms/LogoImage.tsx","constants/collaborations.ts","components/molecules/CollaborationsSection.tsx","components/molecules/Footer.tsx","lib/date.ts","lib/uuid.ts","core/event/BaseEvent.ts","constants/fullcalendar/settings.ts","core/resource/BaseResource.ts","core/story/BaseStory.ts","redux/features/userCalendars.ts","redux/features/user.ts","lib/age.ts","redux/features/templateOption.ts","constants/fullcalendar/options.ts","constants/fullcalendar/templates.ts","core/story/PrivateCollegeStory/createPrivateCollegeStory.ts","constants/visa.ts","core/story/PublicCollegeStory/createPublicCollegeStory.ts","core/calendar/TemplateCalendar/createCalendar.ts","lib/util.ts","redux/features/templateCalendarTable.ts","redux/ui/step.ts","hooks/useResetAllData.tsx","constants/meta.ts","constants/sns.ts","redux/ui/previewModal.ts","hooks/usePreview.tsx","components/atoms/CalendarBase.tsx","components/atoms/CalendarBaseContainer.tsx","hooks/useEvent.tsx","core/event/createProfileEvents.ts","core/story/ProfileStory/createProfileStory.ts","core/resource/createProfileResources.ts","hooks/useUserCalendar.ts","core/calendar/UserCalendar/createUserCalendar.ts","hooks/useStory.tsx","hooks/useUserCalendarCustomButtons.tsx","hooks/useResourceGroupLabelContentInUserCalendar.tsx","redux/ui/storyModal.ts","hooks/useStoryModal.tsx","redux/ui/eventModal.ts","hooks/useEventModal.tsx","components/organisms/UserCalendar.tsx","components/atoms/ExplanationSection.tsx","components/molecules/PreviewModal.tsx","components/organisms/AboutModal.tsx","hooks/useModal.tsx","assets/choose_school.gif","assets/copy_story.gif","assets/edit_calendar.gif","hooks/useStepper.tsx","components/organisms/TutorialModal.tsx","components/molecules/Header.tsx","components/molecules/StoryEditModal.tsx","hooks/useResource.tsx","components/molecules/EventEditModal.tsx","components/templates/UserCalendarSection.tsx","hooks/useResourceGroupLabelContentInTemplateCalendar.tsx","hooks/useTemplateCustomButtons.tsx","components/molecules/CollegeCalendarBase.tsx","hooks/usePrivateCollegeCalendar.tsx","hooks/useUser.tsx","hooks/useTemplateOptions.tsx","components/molecules/TemplateOptionContent.tsx","components/molecules/TemplateOptionModal.tsx","components/organisms/PrivateCollegeCalendar.tsx","components/organisms/PublicCollegeCalendar.tsx","hooks/usePublicCollegeCalendar.tsx","components/templates/CollegeCalendarSection.tsx","components/molecules/EmptyCalendar.tsx","components/templates/CalendarPageContent.tsx","components/atoms/PolicyExplanation.tsx","components/organisms/AdvancedOptions.tsx","components/organisms/WelcomeModal.tsx","components/pages/CalendarPage.tsx","components/pages/ErrorPage.tsx","ErrorBoundary.tsx","App.tsx","reportWebVitals.ts","redux/rootReducer.ts","redux/store/persistedReducer.ts","redux/store.ts","components/pages/LoadingPage.tsx","providers/ReactReduxProvider.tsx","index.tsx"],"names":["MuiPickersUtilsProvider","children","utils","DateFnsUtils","LogoImage","Img","src","process","alt","styled","img","collaborations","name","link","logo","CollaborationsSection","Container","map","InnerContainer","Link","href","target","rel","div","a","Footer","Box","AppName","paddingZero","num","String","padStart","convertIsoToDateTime","isoStr","date","Date","YYYY","getYear","MM","getMonth","dd","getDate","convertIsoToYearAndMonth","_date","parseISO","convertDateToIso","toISOString","uuid","uuidV4","initEvent","props","id","calendarId","_resourceId","resourceId","_storyId","storyId","_title","title","_start","start","_end","end","description","rest","undefined","extendedProps","updateEvent","event","params","Object","assign","isUndeifned","val","Array","isArray","some","item","FIELD","NAME_OF_STORY_ID","NAME_OF_ORDER","PRIVATE_COLLEGE_CALENDAR_ID","PUBLIC_COLLEGE_CALENDAR_ID","PROFILE_ID","RESOURCE_ID__SHARED__AGE","RESOURCE_ID__SHARED__LIMIT","initResource","createStoryName","birth","updateStory","story","resources","newResources","reduce","prev","curr","idx","findIndex","resource","console","warn","newResource","events","initialState","calendars","userCalendarsSlice","createSlice","reducers","reset","removeCalendar","state","action","payload","filter","calendar","updateCalendars","pushResource","calendarIdx","storyIdx","stories","push","updateResources","removeResource","addStory","removeStory","newStory","updateStoryById","_story","addEvent","removeEvent","eventId","_event","newEvent","eventIdx","updateEventById","oldEvent","actions","resetAction","removeCalendarAction","updateCalendarsAction","pushResourceAction","removeResourceAction","addStoryAction","removeStoryAction","updateStoryAction","updateStoryByIdAction","addEventAction","removeEventAction","updateEventAction","updateEventByIdAction","selectUserCalendar","features","userCalendars","birthday","addYears","age","userSlice","updateBirthday","_birthday","today","birthDate","getFullYear","m","calcAge","updateBirthdayAction","selectUser","user","option","schoolPeriod","coopPeriod","pgwpPeriod","workingholidayPeriod","monthsOfStartSchool","slices","update","selectTemplateOption","templateOption","selectWithWorkingholiday","updateAction","MY_TIME_LINE_NAME","initialView","resourceGroupField","views","type","duration","year","buttonText","resourceConfigs","resourceOrder","resourceAreaColumns","field","FULL_CALENDAR_CONFIGS","slotLabelFormat","month","schedulerLicenseKey","nowIndicator","height","resourceAreaWidth","DARK_BLUE","EVENT_VISA_BG","EVENT_STATUS_BG","EVENT_TASK_BG","RESOURCES","PROFILE","AGE","WORKING_HOLIDAY","VISA","STUDY","COOP","PGWP","BOWP_OR_PNP","PR","TASK","COLLEGE_APPLICATION","PAYMENT","READY_FOR_VISA_APPLICATION","BIOMETRICS","READY_FOR_GOING","LAST_CHECK","PR_APPLICATION","PR_WAITING_FOR_ACCEPTANCE","PR_ACCEPTANCE","STATUS","EVENTS","WORKING_HOLIDAY_APPLICATION_LIMIT","backgroundColor","READY_WORKING_HOLIDAY","WORKER","STUDENTS","BIOMETORICS","PR_WAITING_FOR_APPLICATION","createPrivateCollegeStory","options","startDate","canWorkingholiday","doCreateStory","withCoop","collegeApplicationId","addMonths","paymentId","readyForVisaApplicationId","biometricsId","readyForGoingId","lastCheckId","coopVisaResourceId","studyVisaResourceId","workingholidayResourceId","dateAsStartWorkingHoliday","setMonth","bowpOrPnpVisa","prVisa","statusResourceId","prApplicationResourceId","prWaitingForAcceptance","prAcceptance","createPublicCollegeStory","withPgwp","pgwpVisaResourceId","scopeAges","stop","step","b","range","now","createStoryList","storyCreater","compareAsc","flatMap","templateCalendarTable","upsertPrivateCollegeStories","_calendar","createPrivateCollegeCalendar","upsertPublicCollegeStories","createPublicCollegeCalendar","upsertPrivateCollegeStoriesAction","upsertPublicCollegeStoriesAction","selectPrivateCollegeCalendar","templateCalendar","selectPublicCollegeCalendar","isOpen","activeStepIdx","slice","toggle","_action","next","back","selectIsOpen","ui","selectActiveStepIdx","toggleAction","nextAction","backAction","useResetAllData","dispatch","useDispatch","React","useCallback","resetUserCalendarsAction","resetUserAction","resetTemplateOptionAction","resetTemplateCalendarAction","resetStepAction","SNS_LIST","url","previewModal","usePreviewCommand","CalendarBase","plugins","interactionPlugin","resourceTimelinePlugin","listPlugin","eventContent","arg","text","Tooltip","style","whiteSpace","CalendarBaseContainer","StyledContainer","useEvent","remove","window","confirm","idSet","updateById","getLastYear","createWorkingHolidayLimitEvents","lastYearDate","endDate","endOfLimit","endOfApplication","createProfileStory","_birth","withWorkingholiday","list","createProfileResources","workingHolidayLimitEvents","ageEventList","i","getRangeNumbers","index","setFullYear","createProfileEvents","useUserCalendar","useSelector","init","createUserCalendar","select","info","startStr","endStr","useMemo","useStory","data","create","_calendarId","initStory","profileStoryId","ADD_STORY_BUTTON","REMOVE_CALENDAR_BUTTON","_payload","pop","storyModal","selectStoryModal","selectStory","find","pushAction","popAction","useStoryModal","eventModal","selectEventModal","selectEvent","useEventModal","headerToolbar","left","center","right","previewConfig","nonPreviewConfig","UserCalendar","isPreviewMode","pushStoryModal","pushEventModal","resourceGroupLabelContent","createOpenHandle","groupValue","openHandle","Button","onClick","variant","useResourceGroupLabelContentInUserCalendar","click","error","customButtons","removeUserCalendar","createStory","handleAddStory","handleRemoveCalendar","useUserCalendarCustomButtons","config","eventClick","selectable","editable","eventResize","eventDrop","initialDate","resourcesInitiallyExpanded","tasksWithDescription","entries","ExplanationSection","border","borderCollapse","key","PreviewModal","Dialog","onClose","open","fullScreen","overflowX","width","AboutModal","DialogTitle","MainTitle","DialogContent","dividers","AboutContent","HowToPrintSection","Section","content","ContentContainer","AboutSection","HowToUseSection","TipsSection","ResetSection","LicenseSection","AuthorSection","CodeSection","handleResetAllData","color","span","useModal","useState","setIsOpen","close","useStepper","steps","label","GIF_ChooseScool","GIF_CopyStory","GIF_EditCalendar","TutorialModal","isFirstStep","isLastStep","length","maxWidth","Title","Stepper","activeStep","alternativeLabel","Step","StepLabel","Divider","ButtonContainer","disabled","Header","isOpenAbout","openAbout","closeAbout","AppBar","position","background","Toolbar","StoryEditModal","useForm","register","handleSubmit","_resources","lastResource","order","_order","_resource","useResource","handleRemoveStory","handleRemoveResource","handleAddResource","onSubmit","DialogTitleInner","TextField","inputRef","defaultValue","fieldName","Fieldset","ref","value","AddResourceButtonContainer","UpdateButtonContainer","DialogActions","fieldset","EventEditModal","onRemove","onUpdate","Flex","multiline","rows","rowsMax","UserCalendarSection","popStoryModal","isOpenStoryModal","popEventModal","isOpenEventModal","Paper","elevation","PaperHeader","CalendarContainer","OPEN_OPTION_BUTTON","useTemplateCustomButtons","handleOpenOption","configs","CollegeCalendarBase","createClickHandel","privateCollegeTemplate","publicCollegeTemplate","myCalendar","myCalendarId","updatedStory","clickHandle","textTransform","useResourceGroupLabelContentInTemplateCalendar","useUser","setBirth","useTemplateOptions","newTemplateOption","MONTHS","TemplateOptionContent","updateOption","handleChangeSchoolPeriod","maybeNum","parseInt","Number","isInteger","handleChangeCoopPeriod","handleChangePgwpPeriod","handleChangeWorkingholidayPeriod","handleCheck","newMonthsOfStartSchool","includes","_month","sort","PeriodContainer","onChange","InputProps","endAdornment","InputAdornment","monthNum","isChecked","CheckboxListItem","Checkbox","checked","TemplateOptionModal","PrivateCollegeCalendar","generate","usePrivateCollegeCalendar","useEffect","PublicCollegeCalendar","args","usePublicCollegeCalendar","TabPanel","shouldShow","role","display","p","CollegeCalendarSection","selectedIdx","setSelectedIdx","handleChange","newValue","Tabs","textColor","indicatorColor","Tab","icon","Icon","EmptyCalendar","initUserCalendar","handleCreate","CalendarPageContent","existsCalendar","PolicyExplanation","Text","AdvancedOptions","useReducer","opens","size","WelcomeModal","handleFinish","handleDateChange","InputContainer","Avatar","DatePicker","disableFuture","openTo","format","ButtonsContainer","CalendarPage","ErrorPage","LogoContainer","ErrorBoundary","hasError","errorInfo","this","Component","App","className","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","uiReducer","combineReducers","storyModalReducer","eventModalReducer","stepReducer","previewModalReducer","featuresReducer","templateCalendarTableReducer","templateOptionReducer","userCalendarsReducer","userReducer","rootReducer","persistConfig","version","storage","whitelist","persistedReducer","persistReducer","store","configureStore","reducer","middleware","getDefaultMiddleware","serializableCheck","LoadingPage","CircularProgress","ReactReduxProvider","PersistProvider","persistor","persistStore","loading","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.73c4f5ad.chunk.js","sourcesContent":["import React, { PropsWithChildren } from \"react\";\nimport { MuiPickersUtilsProvider as RawMuiPickersUtilsProvider } from \"@material-ui/pickers\";\nimport DateFnsUtils from \"@date-io/date-fns\";\n\nexport function MuiPickersUtilsProvider<T>({ children }: PropsWithChildren<T>) {\n  return (\n    <RawMuiPickersUtilsProvider utils={DateFnsUtils}>\n      {children}\n    </RawMuiPickersUtilsProvider>\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nexport function LogoImage() {\n  return (\n    <Img\n      src={process.env.PUBLIC_URL + \"/logo_transparent_410x410.png\"}\n      alt=\"img\"\n    />\n  );\n}\n\nconst Img = styled.img`\n  display: inline-block;\n  height: 100%;\n  object-fit: contain;\n  background: rgba(255, 255, 255, 0.9);\n  padding: 0.3rem;\n  border-radius: 50%;\n`;\n","export const collaborations = [\n  {\n    name: \"Frog\",\n    link: \"https://frogagent.com/\",\n    logo:\n      \"https://user-images.githubusercontent.com/26793088/114257682-73a02d80-9976-11eb-84cb-7b0e88658a83.png\",\n  },\n  {\n    name: \"COS\",\n    link: \"https://cosvancouver.com/\",\n    logo:\n      \"https://user-images.githubusercontent.com/26793088/114257709-a0544500-9976-11eb-9258-c5d6f42e5470.png\",\n  },\n] as const;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { collaborations } from \"../../constants/collaborations\";\n\nexport function CollaborationsSection() {\n  return (\n    <Container>\n      {collaborations.map(({ link, name, logo }) => (\n        <InnerContainer key={name}>\n          <Link href={link} target=\"_blank\" rel=\"noopener noreferrer\">\n            <Img src={logo} alt={`${name}-logo`} />\n          </Link>\n        </InnerContainer>\n      ))}\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`;\n\nconst Link = styled.a`\n  text-decoration: none;\n`;\n\nconst InnerContainer = styled.div`\n  text-align: center;\n`;\n\nconst Img = styled.img`\n  padding: 0.5rem;\n  width: 6rem;\n  transition: 0.5s;\n  &:hover {\n    transition: 0.5s;\n    opacity: 0.9;\n    background: #ececec;\n    border-radius: 30px;\n  }\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { LogoImage } from \"../atoms/LogoImage\";\nimport { CollaborationsSection } from \"./CollaborationsSection\";\n\nexport function Footer() {\n  return (\n    <Container>\n      <Box>\n        <LogoImage />\n        <AppName>Plangoab</AppName>\n      </Box>\n\n      <Box>\n        <div>\n          <h3>Collcations</h3>\n          <hr />\n          <CollaborationsSection />\n        </div>\n      </Box>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: space-between;\n  padding: 5rem;\n  border: 1px solid lightgray;\n  box-shadow: 0 -4px 4px lightgray;\n`;\n\nconst Box = styled.div`\n  display: flex;\n  align-items: center;\n  height: 5rem;\n`;\n\nconst AppName = styled.div`\n  font-size: 3rem;\n  padding: 1rem;\n`;\n","import { getYear, getMonth, getDate, parseISO } from \"date-fns\";\n\nconst paddingZero = (num: number) => String(num).padStart(2, \"0\");\n\nexport const convertIsoToDateTime = (isoStr: string | Date) => {\n  const date = typeof isoStr === \"string\" ? new Date(isoStr) : isoStr;\n  const YYYY = getYear(date);\n  const MM = paddingZero(getMonth(date) + 1);\n  const dd = paddingZero(getDate(date));\n  return `${YYYY}-${MM}-${dd}`;\n};\n\nexport const convertIsoToYearAndMonth = (_date: Date | string) => {\n  const date = typeof _date === \"string\" ? parseISO(_date) : _date;\n  const YYYY = getYear(date);\n  const MM = paddingZero(getMonth(date) + 1);\n  return `${YYYY}-${MM}`;\n};\n\nexport const convertDateToIso = (_date: Date | string) => {\n  return typeof _date === \"object\" ? _date.toISOString() : _date;\n};\n","import { v4 as uuidV4 } from \"uuid\";\n\nexport function uuid() {\n  return uuidV4();\n}\n","import { EventInput } from \"@fullcalendar/react\";\nimport { uuid } from \"../../lib/uuid\";\nimport { convertDateToIso } from \"../../lib/date\";\n\nexport type BaseEvent = EventInput & {\n  extendedProps: {\n    calendarId: string;\n    storyId: string;\n    description: string;\n  };\n};\n\nexport const initEvent = (props?: Partial<BaseEvent>): BaseEvent => {\n  const {\n    id,\n    calendarId,\n    resourceId: _resourceId,\n    storyId: _storyId,\n    title: _title,\n    start: _start,\n    end: _end,\n    description = \"\",\n    ...rest\n  } = props ?? {};\n\n  const storyId = _storyId ?? uuid();\n  const resourceId = _resourceId ?? uuid();\n  const title = _title ?? \"New Event\";\n  const start = _start ? convertDateToIso(_start as Date) : undefined;\n  const end = _end ? convertDateToIso(_end as Date) : undefined;\n\n  return {\n    id: id ?? uuid(),\n    resourceId,\n    storyId,\n    title,\n    start,\n    end,\n    extendedProps: {\n      calendarId,\n      storyId,\n      resourceId,\n      description,\n    },\n    ...rest,\n  };\n};\n\nexport const updateEvent = (\n  event: BaseEvent,\n  params: Partial<Omit<BaseEvent, \"id\" | \"storyId\">>\n): BaseEvent => {\n  const title = params.title;\n  const extendedProps = params.extendedProps;\n  const start = params.start\n    ? convertDateToIso(params.start as Date)\n    : undefined;\n  const end = params.end ? convertDateToIso(params.end as Date) : undefined;\n\n  const newEvent = Object.assign(\n    { ...event },\n    !isUndeifned(title) && { title },\n    !isUndeifned(start) && { start },\n    !isUndeifned(end) && { end },\n\n    // extendedProps\n    !isUndeifned(extendedProps) &&\n      !isUndeifned(extendedProps.description) && {\n        extendedProps: {\n          ...event.extendedProps,\n          description: extendedProps.description,\n        },\n      }\n  );\n\n  return newEvent;\n};\n\nconst isUndeifned = (...val: any) => {\n  if (Array.isArray(val)) return val.some((item: any) => item === undefined);\n  return val === undefined;\n};\n","// field name\nexport const FIELD = \"FIELD\";\n\n// keys\nexport const NAME_OF_STORY_ID = \"storyId\";\nexport const NAME_OF_ORDER = \"order\";\nexport const RESOURCE_NAME_KEY = \"RESOURCE_NAME_KEY\";\n\n// calendar ID\nexport const PRIVATE_COLLEGE_CALENDAR_ID = \"PRIVATE_COLLEGE_CALENDAR_ID\";\nexport const PUBLIC_COLLEGE_CALENDAR_ID = \"PUBLIC_COLLEGE_CALENDAR_ID\";\n\n// story ID\nexport const PROFILE_ID = \"PROFILE_ID\";\n\n// resouce ID\nexport const RESOURCE_ID__SHARED__AGE = \"RESOURCE_ID__SHARED__AGE\";\nexport const RESOURCE_ID__SHARED__LIMIT = \"RESOURCE_ID__SHARED__LIMIT\";\n","import { uuid } from \"../../lib/uuid\";\nimport {\n  NAME_OF_ORDER,\n  NAME_OF_STORY_ID,\n  FIELD,\n} from \"../../constants/fullcalendar/settings\";\n\nexport type BaseResource = {\n  id: string;\n  calendarId: string;\n  [FIELD]: string;\n  [NAME_OF_STORY_ID]: string;\n  [NAME_OF_ORDER]?: number;\n  eventBorderColor?: string;\n};\n\nexport const initResource = (props?: Partial<BaseResource>): BaseResource => {\n  const { id, calendarId, storyId, ...rest } = props ?? {};\n  return {\n    id: id ?? uuid(),\n    calendarId: calendarId ?? uuid(),\n    [NAME_OF_STORY_ID]: storyId ?? uuid(),\n    [NAME_OF_ORDER]: 1,\n    [FIELD]: \"Field\",\n    ...rest,\n  };\n};\n","import { convertIsoToYearAndMonth } from \"../../lib/date\";\nimport { BaseEvent, initEvent } from \"../event/BaseEvent\";\nimport { BaseResource, initResource } from \"../resource/BaseResource\";\nimport { uuid } from \"../../lib/uuid\";\n\nexport type BaseStory = {\n  id: string;\n  calendarId: string;\n  events: BaseEvent[];\n  resources: BaseResource[];\n  name: string;\n};\n\nexport const removeEvent = (story: BaseStory, eventId: string): BaseStory => {\n  const newEvents = story.events.filter((event) => event.id !== eventId);\n  return { ...story, events: newEvents };\n};\n\nexport const createStoryName = (birth: Date) => {\n  return \"College from \" + convertIsoToYearAndMonth(birth.toISOString());\n};\n\nexport const initStory = (props?: Partial<BaseStory>): BaseStory => {\n  const { id, calendarId: _calendarId, events, resources, name } = props ?? {};\n\n  const storyId = id ?? uuid();\n  const calendarId = _calendarId ?? uuid();\n  const eventId = uuid();\n  const _events = events ?? [initEvent({ id: eventId, storyId })];\n  const _resources = resources ?? [initResource({ calendarId, storyId })];\n\n  return {\n    id: storyId,\n    calendarId,\n    events: _events,\n    resources: _resources,\n    name: name ?? \"No Name\",\n  };\n};\n\nexport const updateStory = (story: BaseStory, params: Partial<BaseStory>) => {\n  if (!!params.name) story = { ...story, name: params.name };\n  if (!!params.resources) {\n    const newResources = params.resources.reduce((prev, curr) => {\n      const idx = story.resources.findIndex(\n        (resource) => resource.id === curr.id\n      );\n\n      const shouldCreate = idx === -1;\n      if (shouldCreate) {\n        // NOTE: no create case\n        console.warn(\"not upsert feature on story yet\");\n        return prev;\n      }\n\n      // Update case\n      const resource = story.resources[idx];\n      const newResource = { ...resource, ...curr };\n      return [...prev, newResource];\n    }, [] as BaseResource[]);\n    story = { ...story, resources: newResources };\n  }\n  if (!!params.calendarId) {\n    story = {\n      ...story,\n      calendarId: params.calendarId,\n      events: story.events.map((event) => ({\n        ...event,\n        calendarId: params.calendarId,\n      })),\n      resources: story.resources.map((resource) => ({\n        ...resource,\n        calendarId: params.calendarId as string,\n      })),\n    };\n  }\n  return story;\n};\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../rootReducer\";\nimport { BaseCalendar } from \"../../core/calendar/BaseCalendar\";\nimport { BaseStory, updateStory } from \"../../core/story/BaseStory\";\nimport { BaseEvent, updateEvent } from \"../../core/event/BaseEvent\";\nimport { BaseResource } from \"../../core/resource/BaseResource\";\n\ntype Calendar = BaseCalendar;\ntype RemoveCalendarPayload = { calendarId: string };\ntype UpdateCalendarsPayload = { calendars: Calendar[] };\ntype PushRsourceAction = {\n  calendarId: string;\n  storyId: string;\n  resource: BaseResource;\n};\ntype UpdateResourcesPayload = {\n  calendarId: string;\n  storyId: string;\n  newResources: BaseResource[];\n};\ntype RemoveResourcePayload = {\n  calendarId: string;\n  storyId: string;\n  resourceId: string;\n};\ntype AddStoryPayload = { calendarId: string; story: BaseStory };\ntype RemoveStoryPayload = { calendarId: string; storyId: string };\ntype UpdateStoryPayload = {\n  calendarId: string;\n  storyId: string;\n  newStory: BaseStory;\n};\ntype UpdateStoryByIdPayload = {\n  calendarId: string;\n  storyId: string;\n  params: Partial<BaseStory>;\n};\ntype AddEventPayload = {\n  calendarId: string;\n  storyId: string;\n  event: BaseEvent;\n};\ntype RemoveEventPayload = {\n  calendarId: string;\n  storyId: string;\n  eventId: string;\n};\ntype UpdateEventPayload = {\n  calendarId: string;\n  storyId: string;\n  eventId: string;\n  newEvent: BaseEvent;\n};\ntype UpdateEventByIdPayload = {\n  calendarId: string;\n  storyId: string;\n  eventId: string;\n  params: Partial<BaseEvent>;\n};\n\nconst initialState = {\n  calendars: [] as Calendar[],\n};\n\nconst userCalendarsSlice = createSlice({\n  name: \"userCalendars\",\n  initialState,\n  reducers: {\n    reset: () => initialState,\n    removeCalendar(state, action: PayloadAction<RemoveCalendarPayload>) {\n      const { calendarId } = action.payload;\n      state.calendars = state.calendars.filter(\n        (calendar) => calendar.id !== calendarId\n      );\n    },\n    updateCalendars(state, action: PayloadAction<UpdateCalendarsPayload>) {\n      const { calendars } = action.payload;\n      state.calendars = calendars;\n    },\n    pushResource(state, action: PayloadAction<PushRsourceAction>) {\n      const { calendarId, storyId, resource } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFind = calendarIdx === -1;\n      if (cannotFind) {\n        console.warn(\"cannot find calendar on updateResource\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateResource\", calendarId);\n        return;\n      }\n\n      // process\n      state.calendars[calendarIdx].stories[storyIdx].resources.push(resource);\n    },\n    updateResources(state, action: PayloadAction<UpdateResourcesPayload>) {\n      const { calendarId, storyId, newResources } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFind = calendarIdx === -1;\n      if (cannotFind) {\n        console.warn(\"cannot find calendar on updateResource\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateResource\", calendarId);\n        return;\n      }\n\n      // query\n      state.calendars[calendarIdx].stories[storyIdx].resources = newResources;\n    },\n    removeResource(state, action: PayloadAction<RemoveResourcePayload>) {\n      const { calendarId, resourceId, storyId } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFind = calendarIdx === -1;\n      if (cannotFind) {\n        console.warn(\"cannot find calendar on removeResource\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on removeResource\", calendarId);\n        return;\n      }\n\n      // query\n      state.calendars[calendarIdx].stories[\n        storyIdx\n      ].resources = state.calendars[calendarIdx].stories[\n        storyIdx\n      ].resources.filter((resource) => resource.id !== resourceId);\n    },\n    addStory(state, action: PayloadAction<AddStoryPayload>) {\n      const { calendarId, story } = action.payload;\n      const idx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFind = idx === -1;\n      if (cannotFind) {\n        console.warn(\"cannot find calendar on addStory\", calendarId);\n        return;\n      }\n      state.calendars[idx].stories.push(story);\n    },\n    removeStory(state, action: PayloadAction<RemoveStoryPayload>) {\n      const { calendarId, storyId } = action.payload;\n      const idx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFind = idx === -1;\n      if (cannotFind) {\n        console.warn(\"cannot find calendar on removeStory\", calendarId);\n        return;\n      }\n      state.calendars[idx].stories = state.calendars[idx].stories.filter(\n        (story) => story.id !== storyId\n      );\n    },\n    updateStory(state, action: PayloadAction<UpdateStoryPayload>) {\n      const { calendarId, storyId, newStory } = action.payload;\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFindCalendar = calendarIdx === -1;\n      if (cannotFindCalendar) {\n        console.warn(\"cannot find calendar on updateStory\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateStory\", calendarId);\n        return;\n      }\n\n      // prcess\n      state.calendars[calendarIdx].stories[storyIdx] = newStory;\n    },\n    updateStoryById(state, action: PayloadAction<UpdateStoryByIdPayload>) {\n      const { calendarId, storyId, params } = action.payload;\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFindCalendar = calendarIdx === -1;\n      if (cannotFindCalendar) {\n        console.warn(\"cannot find calendar on updateStory\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateStory\", calendarId);\n        return;\n      }\n\n      // update\n      const _story = state.calendars[calendarIdx].stories[storyIdx];\n      const newStory = updateStory({ ..._story }, params);\n      state.calendars[calendarIdx].stories[storyIdx] = newStory;\n    },\n    addEvent(state, action: PayloadAction<AddEventPayload>) {\n      const { calendarId, storyId, event } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFindCalendar = calendarIdx === -1;\n      if (cannotFindCalendar) {\n        console.warn(\"cannot find calendar on addEvent\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on addEvent\", calendarId);\n        return;\n      }\n\n      // addd\n      state.calendars[calendarIdx].stories[storyIdx].events.push(event);\n    },\n    removeEvent(state, action: PayloadAction<RemoveEventPayload>) {\n      const { calendarId, storyId, eventId } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFindCalendar = calendarIdx === -1;\n      if (cannotFindCalendar) {\n        console.warn(\"cannot find calendar on removeEvent\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on removeEvent\", storyIdx);\n        return;\n      }\n\n      // remove\n      state.calendars[calendarIdx].stories[storyIdx].events = state.calendars[\n        calendarIdx\n      ].stories[storyIdx].events.filter((_event) => _event.id !== eventId);\n    },\n    updateEvent(state, action: PayloadAction<UpdateEventPayload>) {\n      const { calendarId, storyId, eventId, newEvent } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFindCalendar = calendarIdx === -1;\n      if (cannotFindCalendar) {\n        console.warn(\"cannot find calendar on updateStory\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateStory\", calendarId);\n        return;\n      }\n\n      // event\n      const eventIdx = state.calendars[calendarIdx].stories[\n        storyIdx\n      ].events.findIndex((event) => event.id === eventId);\n      const cannotFindEvent = eventIdx === -1;\n      if (cannotFindEvent) {\n        console.warn(\"cannot find event on updateEvent\");\n        return;\n      }\n\n      // prcess\n      state.calendars[calendarIdx].stories[storyIdx].events[\n        eventIdx\n      ] = newEvent;\n    },\n    updateEventById(state, action: PayloadAction<UpdateEventByIdPayload>) {\n      const { calendarId, storyId, eventId, params } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFindCalendar = calendarIdx === -1;\n      if (cannotFindCalendar) {\n        console.warn(\"cannot find calendar on updateStory\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateStory\", calendarId);\n        return;\n      }\n\n      // event\n      const eventIdx = state.calendars[calendarIdx].stories[\n        storyIdx\n      ].events.findIndex((event) => event.id === eventId);\n      const cannotFindEvent = eventIdx === -1;\n      if (cannotFindEvent) {\n        console.warn(\"cannot find event on updateEvent\");\n        return;\n      }\n\n      // prcess\n      const oldEvent =\n        state.calendars[calendarIdx].stories[storyIdx].events[eventIdx];\n      const newEvent = updateEvent(oldEvent, params);\n      state.calendars[calendarIdx].stories[storyIdx].events[\n        eventIdx\n      ] = newEvent;\n    },\n  },\n});\n\nexport const {\n  reset: resetAction,\n\n  // calendars\n  removeCalendar: removeCalendarAction,\n  updateCalendars: updateCalendarsAction,\n\n  // resources\n  pushResource: pushResourceAction,\n  updateResources: updateResourcesAction,\n  removeResource: removeResourceAction,\n\n  // story\n  addStory: addStoryAction,\n  removeStory: removeStoryAction,\n  updateStory: updateStoryAction,\n  updateStoryById: updateStoryByIdAction,\n\n  // event\n  addEvent: addEventAction,\n  removeEvent: removeEventAction,\n  updateEvent: updateEventAction,\n  updateEventById: updateEventByIdAction,\n} = userCalendarsSlice.actions;\n\nexport default userCalendarsSlice.reducer;\n\n// export const selectUserCalendars = (state: RootState) =>\n//   state.userCalendars.calendars;\n\nexport const selectUserCalendar = (state: RootState) =>\n  state.features.userCalendars.calendars[0]; // NOTE: now calendars have only 1 calendar.\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { calcAge } from \"../../lib/age\";\nimport { addYears } from \"date-fns\";\nimport { RootState } from \"../rootReducer\";\n\nconst PERSONA_AGE = 25;\nconst personaBirth = addYears(new Date(), -PERSONA_AGE).toISOString();\n\ntype UpdatePayload = {\n  birthday: string;\n};\nconst initialState = {\n  birthday: personaBirth,\n  age: PERSONA_AGE, // TODO: should not save here. only select.\n};\nconst userSlice = createSlice({\n  name: \"user\",\n  initialState,\n  reducers: {\n    reset: () => initialState,\n    updateBirthday(state, action: PayloadAction<UpdatePayload>) {\n      const { birthday } = action.payload;\n      state.birthday = birthday;\n      state.age = calcAge(birthday);\n    },\n  },\n});\n\nexport const {\n  updateBirthday: updateBirthdayAction,\n  reset: resetAction,\n} = userSlice.actions;\n\nexport default userSlice.reducer;\n\nexport const selectUser = (state: RootState) => state.features.user;\n","export const getRangeNumbers = (start: number, end: number) => {\n  let list = [] as number[];\n  for (let i = start; i <= end; i++) {\n    list.push(i);\n  }\n  return list;\n};\n\n// REF: https://stackoverflow.com/a/7091965/8842333\nexport const calcAge = (_birthday: string | Date) => {\n  const today = new Date();\n  const birthDate = new Date(_birthday);\n  let age = today.getFullYear() - birthDate.getFullYear();\n\n  const m = today.getMonth() - birthDate.getMonth();\n  if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\n    age--;\n  }\n  return age;\n};\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../rootReducer\";\n\ntype UpdatePayload = {\n  schoolPeriod: number;\n  coopPeriod: number;\n  pgwpPeriod: number;\n  workingholidayPeriod: number;\n  monthsOfStartSchool: number[];\n};\n\nconst initialState = {\n  option: {\n    schoolPeriod: 12 * 2,\n    coopPeriod: 12 * 2,\n    pgwpPeriod: 12 * 3,\n    workingholidayPeriod: 12,\n    monthsOfStartSchool: [1, 5, 9],\n  },\n};\n\nconst slices = createSlice({\n  name: \"templateOption\",\n  initialState,\n  reducers: {\n    reset: () => initialState,\n    update(state, action: PayloadAction<UpdatePayload>) {\n      state.option = action.payload;\n    },\n  },\n});\n\nexport const selectTemplateOption = (state: RootState) =>\n  state.features.templateOption.option;\n\nexport const selectWithWorkingholiday = (state: RootState) =>\n  state.features.templateOption.option.workingholidayPeriod > 0;\n\nexport const { reset: resetAction, update: updateAction } = slices.actions;\n\nexport default slices.reducer;\n","import { NAME_OF_STORY_ID, NAME_OF_ORDER, FIELD } from \"./settings\";\n\nexport const MY_TIME_LINE_NAME = \"MY_TIME_LINE_NAME\";\n\nexport const AGE_OF_START_STORY = 21;\n\nconst slotLabelFormat = [{ year: \"numeric\" }, { month: \"numeric\" }];\n\nconst initialView = { initialView: MY_TIME_LINE_NAME } as const;\n\nconst resourceGroupField = { resourceGroupField: NAME_OF_STORY_ID } as const;\n\nconst schedulerLicenseKey = {\n  schedulerLicenseKey: \"GPL-My-Project-Is-Open-Source\",\n} as const;\n\nconst views = {\n  [MY_TIME_LINE_NAME]: {\n    type: \"resourceTimelineYear\",\n    duration: { year: 15 },\n    buttonText: \"TIME_LINE\",\n  },\n} as const;\n\nconst nowIndicator = {\n  nowIndicator: true,\n} as const;\n\nconst resourceConfigs = {\n  resourceOrder: NAME_OF_ORDER,\n} as const;\n\nconst styleConfigs = {\n  // NOTE: if no height props, another calendar after opening tab would become 0 height\n  height: 600,\n\n  // NOTE: Because of capture feature. When to open preview page, need this setting.\n  resourceAreaWidth: \"250px\",\n};\n\nconst resourceAreaColumns = [\n  {\n    field: FIELD,\n  },\n];\n\nexport const FULL_CALENDAR_CONFIGS = {\n  views,\n  slotLabelFormat,\n  resourceAreaColumns,\n  ...initialView,\n  ...resourceGroupField,\n  ...schedulerLicenseKey,\n  ...nowIndicator,\n  ...resourceConfigs,\n  ...styleConfigs,\n} as const;\n","import { FIELD } from \"./settings\";\n\nexport const DARK_BLUE = \"#00008b\";\nconst GREEN = \"#206a5d\";\n// const YELLOW = \"#ffd700\";\nconst RED = \"#c70039\";\nconst PURPLE = \"#440a67\";\n\nconst EVENT_VISA_BG = GREEN;\nconst EVENT_STATUS_BG = DARK_BLUE;\nconst EVENT_TASK_BG = PURPLE;\n\n/************************\n * Resources\n ************************/\nexport const RESOURCES = {\n  PROFILE: {\n    AGE: {\n      [FIELD]: \"Age\",\n      eventBorderColor: DARK_BLUE,\n    },\n    WORKING_HOLIDAY: {\n      [FIELD]: \"Working Holiday\",\n      eventBorderColor: DARK_BLUE,\n    },\n  },\n  VISA: {\n    STUDY: {\n      [FIELD]: \"Study VISA\",\n      eventBorderColor: DARK_BLUE,\n    },\n    COOP: {\n      [FIELD]: \"Co-op VISA\",\n      eventBorderColor: DARK_BLUE,\n    },\n    WORKING_HOLIDAY: {\n      [FIELD]: \"Working Holiday VISA\",\n      eventBorderColor: DARK_BLUE,\n    },\n    PGWP: {\n      [FIELD]: \"PGWP VISA\",\n      eventBorderColor: DARK_BLUE,\n    },\n    BOWP_OR_PNP: {\n      [FIELD]: \"BOWP or PNP VISA\",\n      eventBorderColor: DARK_BLUE,\n    },\n    PR: {\n      [FIELD]: \"Permament Resident VISA\",\n      eventBorderColor: DARK_BLUE,\n    },\n  },\n  TASK: {\n    // before coming abroad\n    COLLEGE_APPLICATION: {\n      [FIELD]: \"College Application\",\n      eventBorderColor: DARK_BLUE,\n    },\n    PAYMENT: {\n      [FIELD]: \"Payment\",\n      eventBorderColor: DARK_BLUE,\n    },\n    READY_FOR_VISA_APPLICATION: {\n      [FIELD]: \"Ready for Visa Application\",\n      eventBorderColor: DARK_BLUE,\n    },\n    BIOMETRICS: {\n      [FIELD]: \"Biometrics\",\n      eventBorderColor: DARK_BLUE,\n    },\n    READY_FOR_GOING: {\n      [FIELD]: \"Ready for Going\",\n      eventBorderColor: DARK_BLUE,\n    },\n    LAST_CHECK: {\n      [FIELD]: \"Last Check\",\n      eventBorderColor: DARK_BLUE,\n    },\n\n    // after college\n    PR_APPLICATION: {\n      [FIELD]: \"PR Application\",\n      eventBorderColor: DARK_BLUE,\n    },\n    PR_WAITING_FOR_ACCEPTANCE: {\n      [FIELD]: \"PR Waiting for Acceptance\",\n      eventBorderColor: DARK_BLUE,\n    },\n    PR_ACCEPTANCE: {\n      [FIELD]: \"PR Acceptance\",\n      eventBorderColor: DARK_BLUE,\n    },\n  },\n  STATUS: {\n    [FIELD]: \"Status\",\n    eventBorderColor: DARK_BLUE,\n  },\n};\n\n/************************\n * Events\n ************************/\nexport const EVENTS = {\n  PROFILE: {\n    AGE: (age: number) => ({\n      title: `Age:${age}`,\n    }),\n    WORKING_HOLIDAY: {\n      title: \"Available Scope of WorkingHoliday\",\n    },\n    WORKING_HOLIDAY_APPLICATION_LIMIT: {\n      title: \"Application Limit\",\n    },\n  },\n  VISA: {\n    COOP: {\n      title: \"Co-op VISA\",\n      backgroundColor: EVENT_VISA_BG,\n    },\n    STUDY: {\n      title: \"Study VISA\",\n      backgroundColor: EVENT_VISA_BG,\n    },\n    PGWP: {\n      title: \"PGWP VISA\",\n      backgroundColor: EVENT_VISA_BG,\n    },\n    WORKING_HOLIDAY: {\n      title: \"Working Holiday VISA\",\n      backgroundColor: EVENT_VISA_BG,\n    },\n    READY_WORKING_HOLIDAY: {\n      title: \"Ready for Working Holiday VISA\",\n      backgroundColor: RED,\n    },\n    BOWP_OR_PNP: {\n      title: \"BOWP or PNP VISA\",\n      backgroundColor: EVENT_VISA_BG,\n    },\n    PR: {\n      title: \"Permament Resident VISA\",\n      backgroundColor: EVENT_VISA_BG,\n    },\n  },\n  STATUS: {\n    WORKER: {\n      title: \"Worker\",\n      backgroundColor: EVENT_STATUS_BG,\n    },\n    STUDENTS: {\n      title: \"Student\",\n      backgroundColor: EVENT_STATUS_BG,\n    },\n  },\n  TASK: {\n    // before coming abroad\n    COLLEGE_APPLICATION: {\n      title: \"\",\n      description: \"College Application\\nAgent Application\",\n      backgroundColor: EVENT_TASK_BG,\n    },\n    READY_FOR_GOING: {\n      title: \"\",\n      description:\n        \"Decide day when to go\\nGet Insurance\\nGet Airline Ticket\",\n      backgroundColor: EVENT_TASK_BG,\n    },\n    LAST_CHECK: {\n      title: \"\",\n      description: \"Final check before coming abroad\",\n      backgroundColor: EVENT_TASK_BG,\n    },\n    BIOMETORICS: {\n      title: \"\",\n      description: \"Register bio-metrics\",\n      backgroundColor: EVENT_TASK_BG,\n    },\n    READY_FOR_VISA_APPLICATION: {\n      title: \"\",\n      description:\n        \"ID Photo\\nBank statement\\nApply Visa\\nMedical checkup for only childcare worker\",\n      backgroundColor: EVENT_TASK_BG,\n    },\n    PAYMENT: {\n      title: \"\",\n      description: \"Payment for Agent and School\",\n      backgroundColor: EVENT_TASK_BG,\n    },\n\n    // after college\n    PR_APPLICATION: {\n      title: \"\",\n      description: \"PR Application\",\n      backgroundColor: EVENT_TASK_BG,\n    },\n    PR_WAITING_FOR_APPLICATION: {\n      title: \"Waiting for Acceptance\",\n      description: \"Waiting for Acceptance\",\n      backgroundColor: EVENT_TASK_BG,\n    },\n    PR_ACCEPTANCE: {\n      title: \"\",\n      description: \"PR Acceptance\",\n      backgroundColor: EVENT_TASK_BG,\n    },\n  },\n};\n","import { addMonths, addYears, setMonth } from \"date-fns\";\nimport { RESOURCES, EVENTS } from \"../../../constants/fullcalendar/templates\";\nimport {\n  NAME_OF_STORY_ID,\n  NAME_OF_ORDER,\n} from \"../../../constants/fullcalendar/settings\";\nimport { MONTH_OF_WORKING_HOLIDAY_APPLICATION_LIMIT } from \"../../../constants/visa\";\nimport { uuid } from \"../../../lib/uuid\";\nimport { PrivateCollegeStory } from \"./model\";\nimport { createStoryName } from \"../BaseStory\";\nimport { TemplateOption } from \"../../calendar/BaseCalendar\";\nimport { BaseEvent, initEvent } from \"../../event/BaseEvent\";\nimport { BaseResource, initResource } from \"../../resource/BaseResource\";\nimport { convertIsoToYearAndMonth } from \"../../../lib/date\";\n\nexport const createPrivateCollegeStory = (\n  {\n    startDate,\n    calendarId,\n    canWorkingholiday,\n  }: {\n    startDate: Date;\n    calendarId: string;\n    canWorkingholiday: boolean;\n  },\n  options: TemplateOption\n): PrivateCollegeStory => {\n  const storyId = uuid();\n  const name = createStoryName(startDate);\n  const params = {\n    calendarId,\n    storyId,\n    startDate,\n    canWorkingholiday,\n  };\n\n  const [resources, events] = doCreateStory(params, options);\n  return {\n    id: storyId,\n    calendarId,\n    name,\n    events,\n    resources,\n  };\n};\n\nconst doCreateStory = (\n  {\n    calendarId,\n    storyId,\n    startDate,\n    canWorkingholiday,\n  }: {\n    calendarId: string;\n    storyId: string;\n    startDate: Date;\n    canWorkingholiday: boolean;\n  },\n  options: TemplateOption\n) => {\n  let resources = [] as BaseResource[];\n  let events = [] as BaseEvent[];\n\n  const { schoolPeriod, coopPeriod, workingholidayPeriod } = options;\n  const withCoop = coopPeriod > 0;\n\n  // College Application\n  const collegeApplicationId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.TASK.COLLEGE_APPLICATION,\n      id: collegeApplicationId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 101,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.TASK.COLLEGE_APPLICATION,\n      id: uuid(),\n      resourceId: collegeApplicationId,\n      storyId,\n      start: convertIsoToYearAndMonth(addMonths(startDate, -9)),\n      end: convertIsoToYearAndMonth(addMonths(startDate, -8)),\n      extendedProps: {\n        resourceId: collegeApplicationId,\n        calendarId,\n        storyId,\n        description:\n          EVENTS.TASK.COLLEGE_APPLICATION.description ??\n          EVENTS.TASK.COLLEGE_APPLICATION.title,\n      },\n    })\n  );\n\n  // Payment\n  const paymentId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.TASK.PAYMENT,\n      id: paymentId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 102,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.TASK.PAYMENT,\n      id: uuid(),\n      resourceId: paymentId,\n      storyId,\n      start: convertIsoToYearAndMonth(addMonths(startDate, -8)),\n      end: convertIsoToYearAndMonth(addMonths(startDate, -7)),\n      extendedProps: {\n        resourceId: paymentId,\n        calendarId,\n        storyId,\n        description:\n          EVENTS.TASK.PAYMENT.description ?? EVENTS.TASK.PAYMENT.title,\n      },\n    })\n  );\n\n  // Ready for Visa Application\n  const readyForVisaApplicationId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.TASK.READY_FOR_VISA_APPLICATION,\n      id: readyForVisaApplicationId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 103,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.TASK.READY_FOR_VISA_APPLICATION,\n      id: uuid(),\n      resourceId: readyForVisaApplicationId,\n      storyId,\n      start: convertIsoToYearAndMonth(addMonths(startDate, -7)),\n      end: convertIsoToYearAndMonth(addMonths(startDate, -6)),\n      extendedProps: {\n        resourceId: readyForVisaApplicationId,\n        calendarId,\n        storyId,\n        description:\n          EVENTS.TASK.READY_FOR_VISA_APPLICATION.description ??\n          EVENTS.TASK.READY_FOR_VISA_APPLICATION.title,\n      },\n    })\n  );\n\n  // Biometrics\n  const biometricsId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.TASK.BIOMETRICS,\n      id: biometricsId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 104,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.TASK.BIOMETORICS,\n      id: uuid(),\n      resourceId: biometricsId,\n      storyId,\n      start: convertIsoToYearAndMonth(addMonths(startDate, -6)),\n      end: convertIsoToYearAndMonth(addMonths(startDate, -5)),\n      extendedProps: {\n        resourceId: biometricsId,\n        calendarId,\n        storyId,\n        description:\n          EVENTS.TASK.BIOMETORICS.description ?? EVENTS.TASK.BIOMETORICS.title,\n      },\n    })\n  );\n\n  // Ready for going\n  const readyForGoingId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.TASK.READY_FOR_GOING,\n      id: readyForGoingId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 105,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.TASK.READY_FOR_GOING,\n      id: uuid(),\n      resourceId: readyForGoingId,\n      storyId,\n      start: convertIsoToYearAndMonth(addMonths(startDate, -5)),\n      end: convertIsoToYearAndMonth(addMonths(startDate, -4)),\n      extendedProps: {\n        resourceId: readyForGoingId,\n        calendarId,\n        storyId,\n        description:\n          EVENTS.TASK.READY_FOR_GOING.description ??\n          EVENTS.TASK.READY_FOR_GOING.title,\n      },\n    })\n  );\n\n  // Last Check\n  const lastCheckId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.TASK.LAST_CHECK,\n      id: lastCheckId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 106,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.TASK.LAST_CHECK,\n      id: uuid(),\n      resourceId: lastCheckId,\n      storyId,\n      start: convertIsoToYearAndMonth(addMonths(startDate, -4)),\n      end: convertIsoToYearAndMonth(addMonths(startDate, -3)),\n      extendedProps: {\n        resourceId: lastCheckId,\n        calendarId,\n        storyId,\n        description:\n          EVENTS.TASK.LAST_CHECK.description ?? EVENTS.TASK.LAST_CHECK.title,\n      },\n    })\n  );\n\n  // Coop\n  if (withCoop) {\n    const coopVisaResourceId = uuid();\n    resources.push(\n      initResource({\n        ...RESOURCES.VISA.COOP,\n        id: coopVisaResourceId,\n        calendarId,\n        [NAME_OF_STORY_ID]: storyId,\n        [NAME_OF_ORDER]: 201,\n      })\n    );\n    events.push(\n      initEvent({\n        ...EVENTS.VISA.COOP,\n        id: uuid(),\n        resourceId: coopVisaResourceId,\n        storyId,\n        start: convertIsoToYearAndMonth(startDate),\n        end: convertIsoToYearAndMonth(addMonths(startDate, coopPeriod)),\n        extendedProps: {\n          resourceId: coopVisaResourceId,\n          calendarId,\n          storyId,\n          description: \"\",\n        },\n      })\n    );\n  }\n\n  // StudyVisa\n  const studyVisaResourceId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.VISA.STUDY,\n      id: studyVisaResourceId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 202,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.VISA.STUDY,\n      id: uuid(),\n      resourceId: studyVisaResourceId,\n      storyId,\n      start: convertIsoToYearAndMonth(startDate),\n      end: convertIsoToYearAndMonth(addMonths(startDate, schoolPeriod)),\n      extendedProps: {\n        resourceId: studyVisaResourceId,\n        calendarId,\n        storyId,\n        description: \"\",\n      },\n    })\n  );\n\n  if (canWorkingholiday) {\n    const workingholidayResourceId = uuid();\n    resources.push(\n      initResource({\n        ...RESOURCES.VISA.WORKING_HOLIDAY,\n        id: workingholidayResourceId,\n        calendarId,\n        [NAME_OF_STORY_ID]: storyId,\n        [NAME_OF_ORDER]: 203,\n      })\n    );\n    const dateAsStartWorkingHoliday = addMonths(startDate, schoolPeriod);\n    events.push(\n      initEvent({\n        ...EVENTS.VISA.WORKING_HOLIDAY,\n        id: uuid(),\n        resourceId: workingholidayResourceId,\n        storyId,\n        start: convertIsoToYearAndMonth(dateAsStartWorkingHoliday),\n        end: convertIsoToYearAndMonth(\n          addMonths(dateAsStartWorkingHoliday, workingholidayPeriod)\n        ),\n        extendedProps: {\n          resourceId: workingholidayResourceId,\n          calendarId,\n          storyId,\n          description: \"\",\n        },\n      })\n    );\n    events.push(\n      initEvent({\n        ...EVENTS.VISA.READY_WORKING_HOLIDAY,\n        id: uuid(),\n        resourceId: workingholidayResourceId,\n        storyId,\n        start: convertIsoToYearAndMonth(\n          setMonth(\n            addYears(dateAsStartWorkingHoliday, -1),\n            MONTH_OF_WORKING_HOLIDAY_APPLICATION_LIMIT\n          )\n        ),\n        end: convertIsoToYearAndMonth(dateAsStartWorkingHoliday),\n        extendedProps: {\n          resourceId: workingholidayResourceId,\n          calendarId,\n          storyId,\n          description: \"\",\n        },\n      })\n    );\n  }\n\n  // BOWP or PNP Visa\n  const bowpOrPnpVisa = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.VISA.BOWP_OR_PNP,\n      id: bowpOrPnpVisa,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 204,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.VISA.BOWP_OR_PNP,\n      id: uuid(),\n      resourceId: bowpOrPnpVisa,\n      storyId,\n      start: convertIsoToYearAndMonth(\n        addMonths(startDate, schoolPeriod + workingholidayPeriod - 4)\n      ),\n      end: convertIsoToYearAndMonth(\n        addMonths(startDate, schoolPeriod + workingholidayPeriod - 4 + 10)\n      ),\n      extendedProps: {\n        resourceId: bowpOrPnpVisa,\n        calendarId,\n        storyId,\n        description: \"\",\n      },\n    })\n  );\n\n  // PR Visa\n  const prVisa = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.VISA.PR,\n      id: prVisa,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 205,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.VISA.PR,\n      id: uuid(),\n      resourceId: prVisa,\n      storyId,\n      start: convertIsoToYearAndMonth(\n        addMonths(startDate, schoolPeriod + workingholidayPeriod + 6)\n      ),\n      end: convertIsoToYearAndMonth(\n        addMonths(startDate, schoolPeriod + workingholidayPeriod + 6 + 12 * 2)\n      ),\n      extendedProps: {\n        resourceId: prVisa,\n        calendarId,\n        storyId,\n        description: \"\",\n      },\n    })\n  );\n\n  // Status\n  const statusResourceId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.STATUS,\n      id: statusResourceId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 299,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.STATUS.WORKER,\n      id: uuid(),\n      resourceId: statusResourceId,\n      storyId,\n      start: convertIsoToYearAndMonth(addMonths(startDate, schoolPeriod)),\n      end: convertIsoToYearAndMonth(\n        addMonths(startDate, schoolPeriod + workingholidayPeriod + 6 + 12 * 2)\n      ),\n      extendedProps: {\n        resourceId: statusResourceId,\n        calendarId,\n        storyId,\n        description: \"\",\n      },\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.STATUS.STUDENTS,\n      id: uuid(),\n      resourceId: statusResourceId,\n      storyId,\n      start: convertIsoToYearAndMonth(startDate),\n      end: convertIsoToYearAndMonth(addMonths(startDate, schoolPeriod)),\n      extendedProps: {\n        resourceId: statusResourceId,\n        calendarId,\n        storyId,\n        description: \"\",\n      },\n    })\n  );\n\n  // PR Application\n  const prApplicationResourceId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.TASK.PR_APPLICATION,\n      id: prApplicationResourceId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 301,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.TASK.PR_APPLICATION,\n      id: uuid(),\n      resourceId: prApplicationResourceId,\n      storyId,\n      start: convertIsoToYearAndMonth(\n        addMonths(startDate, schoolPeriod + workingholidayPeriod - 6)\n      ),\n      end: convertIsoToYearAndMonth(\n        addMonths(startDate, schoolPeriod + workingholidayPeriod - 6 + 2)\n      ),\n      extendedProps: {\n        resourceId: prApplicationResourceId,\n        calendarId,\n        storyId,\n        description:\n          EVENTS.TASK.PR_APPLICATION.description ??\n          EVENTS.TASK.PR_APPLICATION.title,\n      },\n    })\n  );\n\n  // PR waiting\n  const prWaitingForAcceptance = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.TASK.PR_WAITING_FOR_ACCEPTANCE,\n      id: prWaitingForAcceptance,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 302,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.TASK.PR_WAITING_FOR_APPLICATION,\n      id: uuid(),\n      resourceId: prWaitingForAcceptance,\n      storyId,\n      start: convertIsoToYearAndMonth(\n        addMonths(startDate, schoolPeriod + workingholidayPeriod - 4)\n      ),\n      end: convertIsoToYearAndMonth(\n        addMonths(startDate, schoolPeriod + workingholidayPeriod - 4 + 10)\n      ),\n      extendedProps: {\n        resourceId: prWaitingForAcceptance,\n        calendarId,\n        storyId,\n        description:\n          EVENTS.TASK.PR_WAITING_FOR_APPLICATION.description ??\n          EVENTS.TASK.PR_WAITING_FOR_APPLICATION.title,\n      },\n    })\n  );\n\n  // PR Acceptance\n  const prAcceptance = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.TASK.PR_ACCEPTANCE,\n      id: prAcceptance,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 303,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.TASK.PR_ACCEPTANCE,\n      id: uuid(),\n      resourceId: prAcceptance,\n      storyId,\n      start: convertIsoToYearAndMonth(\n        addMonths(startDate, schoolPeriod + workingholidayPeriod + 6)\n      ),\n      end: convertIsoToYearAndMonth(\n        addMonths(startDate, schoolPeriod + workingholidayPeriod + 6)\n      ),\n      extendedProps: {\n        resourceId: prAcceptance,\n        calendarId,\n        storyId,\n        description:\n          EVENTS.TASK.PR_ACCEPTANCE.description ??\n          EVENTS.TASK.PR_ACCEPTANCE.title,\n      },\n    })\n  );\n\n  return [[...resources], [...events]] as [BaseResource[], BaseEvent[]];\n};\n","export const WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE = 31;\nexport const MONTH_OF_WORKING_HOLIDAY_APPLICATION_LIMIT = 8;\n","import { addMonths, addYears, setMonth } from \"date-fns\";\nimport { RESOURCES, EVENTS } from \"../../../constants/fullcalendar/templates\";\nimport {\n  NAME_OF_STORY_ID,\n  NAME_OF_ORDER,\n} from \"../../../constants/fullcalendar/settings\";\nimport { MONTH_OF_WORKING_HOLIDAY_APPLICATION_LIMIT } from \"../../../constants/visa\";\nimport { uuid } from \"../../../lib/uuid\";\nimport { PrivateCollegeStory } from \"./model\";\nimport { createStoryName } from \"../BaseStory\";\nimport { TemplateOption } from \"../../calendar/BaseCalendar\";\nimport { BaseEvent, initEvent } from \"../../event/BaseEvent\";\nimport { BaseResource, initResource } from \"../../resource/BaseResource\";\nimport { convertIsoToYearAndMonth } from \"../../../lib/date\";\n\nexport const createPublicCollegeStory = (\n  {\n    startDate,\n    calendarId,\n    canWorkingholiday,\n  }: {\n    startDate: Date;\n    calendarId: string;\n    canWorkingholiday: boolean;\n  },\n  options: TemplateOption\n): PrivateCollegeStory => {\n  const storyId = uuid();\n  const name = createStoryName(startDate);\n  const props = {\n    calendarId,\n    storyId,\n    startDate,\n    canWorkingholiday,\n  };\n  const [resources, events] = doCreateStory(props, options);\n\n  return {\n    id: storyId,\n    calendarId,\n    name,\n    events,\n    resources,\n  };\n};\n\nconst doCreateStory = (\n  {\n    calendarId,\n    storyId,\n    startDate,\n    canWorkingholiday,\n  }: {\n    calendarId: string;\n    storyId: string;\n    startDate: Date;\n    canWorkingholiday: boolean;\n  },\n  options: TemplateOption\n) => {\n  let resources = [] as BaseResource[];\n  let events = [] as BaseEvent[];\n\n  const { schoolPeriod, pgwpPeriod, workingholidayPeriod } = options;\n  const withPgwp = pgwpPeriod > 0;\n\n  // College Application\n  const collegeApplicationId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.TASK.COLLEGE_APPLICATION,\n      id: collegeApplicationId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 101,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.TASK.COLLEGE_APPLICATION,\n      id: uuid(),\n      resourceId: collegeApplicationId,\n      storyId,\n      start: convertIsoToYearAndMonth(addMonths(startDate, -9)),\n      end: convertIsoToYearAndMonth(addMonths(startDate, -8)),\n      extendedProps: {\n        resourceId: collegeApplicationId,\n        calendarId,\n        storyId,\n        description:\n          EVENTS.TASK.COLLEGE_APPLICATION.description ??\n          EVENTS.TASK.COLLEGE_APPLICATION.title,\n      },\n    })\n  );\n\n  // Payment\n  const paymentId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.TASK.PAYMENT,\n      id: paymentId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 102,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.TASK.PAYMENT,\n      id: uuid(),\n      resourceId: paymentId,\n      storyId,\n      start: convertIsoToYearAndMonth(addMonths(startDate, -8)),\n      end: convertIsoToYearAndMonth(addMonths(startDate, -7)),\n      extendedProps: {\n        resourceId: paymentId,\n        calendarId,\n        storyId,\n        description:\n          EVENTS.TASK.PAYMENT.description ?? EVENTS.TASK.PAYMENT.title,\n      },\n    })\n  );\n\n  // Ready for Visa Application\n  const readyForVisaApplicationId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.TASK.READY_FOR_VISA_APPLICATION,\n      id: readyForVisaApplicationId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 103,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.TASK.READY_FOR_VISA_APPLICATION,\n      id: uuid(),\n      resourceId: readyForVisaApplicationId,\n      storyId,\n      start: convertIsoToYearAndMonth(addMonths(startDate, -7)),\n      end: convertIsoToYearAndMonth(addMonths(startDate, -6)),\n      extendedProps: {\n        resourceId: readyForVisaApplicationId,\n        calendarId,\n        storyId,\n        description:\n          EVENTS.TASK.READY_FOR_VISA_APPLICATION.description ??\n          EVENTS.TASK.READY_FOR_VISA_APPLICATION.title,\n      },\n    })\n  );\n\n  // Biometrics\n  const biometricsId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.TASK.BIOMETRICS,\n      id: biometricsId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 104,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.TASK.BIOMETORICS,\n      id: uuid(),\n      resourceId: biometricsId,\n      storyId,\n      start: convertIsoToYearAndMonth(addMonths(startDate, -6)),\n      end: convertIsoToYearAndMonth(addMonths(startDate, -5)),\n      extendedProps: {\n        resourceId: biometricsId,\n        calendarId,\n        storyId,\n        description:\n          EVENTS.TASK.BIOMETORICS.description ?? EVENTS.TASK.BIOMETORICS.title,\n      },\n    })\n  );\n\n  // Ready for going\n  const readyForGoingId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.TASK.READY_FOR_GOING,\n      id: readyForGoingId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 105,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.TASK.READY_FOR_GOING,\n      id: uuid(),\n      resourceId: readyForGoingId,\n      storyId,\n      start: convertIsoToYearAndMonth(addMonths(startDate, -5)),\n      end: convertIsoToYearAndMonth(addMonths(startDate, -4)),\n      extendedProps: {\n        resourceId: readyForGoingId,\n        calendarId,\n        storyId,\n        description:\n          EVENTS.TASK.READY_FOR_GOING.description ??\n          EVENTS.TASK.READY_FOR_GOING.title,\n      },\n    })\n  );\n\n  // Last Check\n  const lastCheckId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.TASK.LAST_CHECK,\n      id: lastCheckId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 106,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.TASK.LAST_CHECK,\n      id: uuid(),\n      resourceId: lastCheckId,\n      storyId,\n      start: convertIsoToYearAndMonth(addMonths(startDate, -4)),\n      end: convertIsoToYearAndMonth(addMonths(startDate, -3)),\n      extendedProps: {\n        resourceId: lastCheckId,\n        calendarId,\n        storyId,\n        description:\n          EVENTS.TASK.LAST_CHECK.description ?? EVENTS.TASK.LAST_CHECK.title,\n      },\n    })\n  );\n\n  // StudyVisa\n  const studyVisaResourceId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.VISA.STUDY,\n      id: studyVisaResourceId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 201,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.VISA.STUDY,\n      id: uuid(),\n      resourceId: studyVisaResourceId,\n      storyId,\n      start: convertIsoToYearAndMonth(startDate),\n      end: convertIsoToYearAndMonth(addMonths(startDate, schoolPeriod)),\n      extendedProps: {\n        resourceId: studyVisaResourceId,\n        calendarId,\n        storyId,\n        description: \"\",\n      },\n    })\n  );\n\n  // PGWP\n  if (withPgwp) {\n    const pgwpVisaResourceId = uuid();\n    resources.push(\n      initResource({\n        ...RESOURCES.VISA.PGWP,\n        id: pgwpVisaResourceId,\n        calendarId,\n        [NAME_OF_STORY_ID]: storyId,\n        [NAME_OF_ORDER]: 202,\n      })\n    );\n    events.push(\n      initEvent({\n        ...EVENTS.VISA.PGWP,\n        id: uuid(),\n        resourceId: pgwpVisaResourceId,\n        storyId,\n        start: convertIsoToYearAndMonth(addMonths(startDate, schoolPeriod)),\n        end: convertIsoToYearAndMonth(\n          addMonths(startDate, schoolPeriod + pgwpPeriod)\n        ),\n        extendedProps: {\n          resourceId: pgwpVisaResourceId,\n          calendarId,\n          storyId,\n          description: \"\",\n        },\n      })\n    );\n  }\n\n  if (canWorkingholiday) {\n    const workingholidayResourceId = uuid();\n    resources.push(\n      initResource({\n        ...RESOURCES.VISA.WORKING_HOLIDAY,\n        id: workingholidayResourceId,\n        calendarId,\n        [NAME_OF_STORY_ID]: storyId,\n        [NAME_OF_ORDER]: 203,\n      })\n    );\n    const dateAsStartWorkingHoliday = addMonths(\n      startDate,\n      schoolPeriod + pgwpPeriod\n    );\n    events.push(\n      initEvent({\n        ...EVENTS.VISA.WORKING_HOLIDAY,\n        id: uuid(),\n        resourceId: workingholidayResourceId,\n        storyId,\n        start: convertIsoToYearAndMonth(dateAsStartWorkingHoliday),\n        end: convertIsoToYearAndMonth(\n          addMonths(dateAsStartWorkingHoliday, workingholidayPeriod)\n        ),\n        extendedProps: {\n          resourceId: workingholidayResourceId,\n          calendarId,\n          storyId,\n          description: \"\",\n        },\n      })\n    );\n    events.push(\n      initEvent({\n        ...EVENTS.VISA.READY_WORKING_HOLIDAY,\n        id: uuid(),\n        resourceId: workingholidayResourceId,\n        storyId,\n        start: convertIsoToYearAndMonth(\n          setMonth(\n            addYears(dateAsStartWorkingHoliday, -1),\n            MONTH_OF_WORKING_HOLIDAY_APPLICATION_LIMIT\n          )\n        ),\n        end: convertIsoToYearAndMonth(dateAsStartWorkingHoliday),\n        extendedProps: {\n          resourceId: workingholidayResourceId,\n          calendarId,\n          storyId,\n          description: \"\",\n        },\n      })\n    );\n  }\n\n  // BOWP or PNP Visa\n  const bowpOrPnpVisa = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.VISA.BOWP_OR_PNP,\n      id: bowpOrPnpVisa,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 204,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.VISA.BOWP_OR_PNP,\n      id: uuid(),\n      resourceId: bowpOrPnpVisa,\n      storyId,\n      start: convertIsoToYearAndMonth(\n        addMonths(\n          startDate,\n          schoolPeriod + workingholidayPeriod + pgwpPeriod - 4\n        )\n      ),\n      end: convertIsoToYearAndMonth(\n        addMonths(\n          startDate,\n          schoolPeriod + workingholidayPeriod + pgwpPeriod - 4 + 10\n        )\n      ),\n      extendedProps: {\n        resourceId: bowpOrPnpVisa,\n        calendarId,\n        storyId,\n        description: \"\",\n      },\n    })\n  );\n\n  // PR Visa\n  const prVisa = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.VISA.PR,\n      id: prVisa,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 205,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.VISA.PR,\n      id: uuid(),\n      resourceId: prVisa,\n      storyId,\n      start: convertIsoToYearAndMonth(\n        addMonths(\n          startDate,\n          schoolPeriod + workingholidayPeriod + pgwpPeriod + 6\n        )\n      ),\n      end: convertIsoToYearAndMonth(\n        addMonths(\n          startDate,\n          schoolPeriod + workingholidayPeriod + pgwpPeriod + 6 + 12 * 2\n        )\n      ),\n      extendedProps: {\n        resourceId: prVisa,\n        calendarId,\n        storyId,\n        description: \"\",\n      },\n    })\n  );\n\n  // status\n  const statusResourceId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.STATUS,\n      id: statusResourceId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 205,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.STATUS.WORKER,\n      id: uuid(),\n      resourceId: statusResourceId,\n      storyId,\n      start: convertIsoToYearAndMonth(addMonths(startDate, schoolPeriod)),\n      end: convertIsoToYearAndMonth(\n        addMonths(\n          startDate,\n          schoolPeriod + pgwpPeriod + workingholidayPeriod + 6 + 2 * 12\n        )\n      ),\n      extendedProps: {\n        resourceId: statusResourceId,\n        calendarId,\n        storyId,\n        description: \"\",\n      },\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.STATUS.STUDENTS,\n      id: uuid(),\n      resourceId: statusResourceId,\n      storyId,\n      start: convertIsoToYearAndMonth(startDate),\n      end: convertIsoToYearAndMonth(addMonths(startDate, schoolPeriod)),\n      extendedProps: {\n        resourceId: statusResourceId,\n        calendarId,\n        storyId,\n        description: \"\",\n      },\n    })\n  );\n\n  // PR Application\n  const prApplicationResourceId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.TASK.PR_APPLICATION,\n      id: prApplicationResourceId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 301,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.TASK.PR_APPLICATION,\n      id: uuid(),\n      resourceId: prApplicationResourceId,\n      storyId,\n      start: convertIsoToYearAndMonth(\n        addMonths(\n          startDate,\n          schoolPeriod + pgwpPeriod + workingholidayPeriod - 6\n        )\n      ),\n      end: convertIsoToYearAndMonth(\n        addMonths(\n          startDate,\n          schoolPeriod + pgwpPeriod + workingholidayPeriod - 6 + 2\n        )\n      ),\n      extendedProps: {\n        resourceId: prApplicationResourceId,\n        calendarId,\n        storyId,\n        description:\n          EVENTS.TASK.PR_APPLICATION.description ??\n          EVENTS.TASK.PR_APPLICATION.title,\n      },\n    })\n  );\n\n  // PR waiting\n  const prWaitingForAcceptance = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.TASK.PR_WAITING_FOR_ACCEPTANCE,\n      id: prWaitingForAcceptance,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 302,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.TASK.PR_WAITING_FOR_APPLICATION,\n      id: uuid(),\n      resourceId: prWaitingForAcceptance,\n      storyId,\n      start: convertIsoToYearAndMonth(\n        addMonths(\n          startDate,\n          schoolPeriod + pgwpPeriod + workingholidayPeriod - 4\n        )\n      ),\n      end: convertIsoToYearAndMonth(\n        addMonths(\n          startDate,\n          schoolPeriod + pgwpPeriod + workingholidayPeriod - 4 + 10\n        )\n      ),\n      extendedProps: {\n        resourceId: prWaitingForAcceptance,\n        calendarId,\n        storyId,\n        description:\n          EVENTS.TASK.PR_WAITING_FOR_APPLICATION.description ??\n          EVENTS.TASK.PR_WAITING_FOR_APPLICATION.title,\n      },\n    })\n  );\n\n  // PR Acceptance\n  const prAcceptance = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCES.TASK.PR_ACCEPTANCE,\n      id: prAcceptance,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 303,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENTS.TASK.PR_ACCEPTANCE,\n      id: uuid(),\n      resourceId: prAcceptance,\n      storyId,\n      start: convertIsoToYearAndMonth(\n        addMonths(\n          startDate,\n          schoolPeriod + pgwpPeriod + workingholidayPeriod + 6\n        )\n      ),\n      end: convertIsoToYearAndMonth(\n        addMonths(\n          startDate,\n          schoolPeriod + pgwpPeriod + workingholidayPeriod + 6\n        )\n      ),\n      extendedProps: {\n        resourceId: prAcceptance,\n        calendarId,\n        storyId,\n        description:\n          EVENTS.TASK.PR_ACCEPTANCE.description ??\n          EVENTS.TASK.PR_ACCEPTANCE.title,\n      },\n    })\n  );\n\n  return [[...resources], [...events]] as [BaseResource[], BaseEvent[]];\n};\n","import { addYears, setMonth, compareAsc } from \"date-fns\";\nimport {\n  PrivateCollegeCalendar,\n  PRIVATE_COLLEGE_CALENDAR_ID,\n  PUBLIC_COLLEGE_CALENDAR_ID,\n} from \"./model\";\nimport { AGE_OF_START_STORY } from \"../../../constants/fullcalendar/options\";\nimport { WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE } from \"../../../constants/visa\";\nimport { range } from \"../../../lib/util\";\nimport { createPrivateCollegeStory } from \"../../story/PrivateCollegeStory/createPrivateCollegeStory\";\nimport { createPublicCollegeStory } from \"../../story/PublicCollegeStory/createPublicCollegeStory\";\nimport { BaseStory } from \"../../story/BaseStory\";\nimport { TemplateOption } from \"../BaseCalendar\";\n\nconst scopeAges = range(\n  AGE_OF_START_STORY,\n  WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE\n);\n\nconst shouldViewPast = false;\nconst now = new Date();\n\nconst createStoryList = (\n  {\n    birth,\n    calendarId,\n    canWorkingholiday,\n    storyCreater,\n  }: {\n    birth: Date;\n    calendarId: string;\n    canWorkingholiday: boolean;\n    storyCreater: Function;\n  },\n  options: TemplateOption\n): BaseStory[] => {\n  const monthsOfStartSchool = options.monthsOfStartSchool;\n\n  return scopeAges\n    .map((num) => addYears(birth, num))\n    .filter((date) => {\n      if (shouldViewPast) return true;\n      const isPastPeriod = compareAsc(now, date) !== -1;\n      return !isPastPeriod;\n    })\n    .flatMap((startDate) => {\n      const startDateListInYear = monthsOfStartSchool.map((month) =>\n        setMonth(startDate, month - 1)\n      );\n      return startDateListInYear;\n    })\n    .map((startDate) => {\n      const params = { startDate, calendarId, canWorkingholiday };\n      return storyCreater(params, options);\n    });\n};\n\nexport const createPrivateCollegeCalendar = (\n  {\n    birth,\n    canWorkingholiday,\n  }: {\n    birth: Date;\n    canWorkingholiday: boolean;\n  },\n  options: TemplateOption\n): PrivateCollegeCalendar => {\n  const params = {\n    birth,\n    calendarId: PRIVATE_COLLEGE_CALENDAR_ID,\n    canWorkingholiday,\n    storyCreater: createPrivateCollegeStory,\n  };\n  const stories = createStoryList(params, options);\n  return {\n    id: PRIVATE_COLLEGE_CALENDAR_ID,\n    stories,\n  };\n};\n\nexport const createPublicCollegeCalendar = (\n  {\n    birth,\n    canWorkingholiday,\n  }: {\n    birth: Date;\n    canWorkingholiday: boolean;\n  },\n  options: TemplateOption\n): PrivateCollegeCalendar => {\n  const params = {\n    birth,\n    calendarId: PUBLIC_COLLEGE_CALENDAR_ID,\n    canWorkingholiday,\n    storyCreater: createPublicCollegeStory,\n  };\n  const stories = createStoryList(params, options);\n  return {\n    id: PUBLIC_COLLEGE_CALENDAR_ID,\n    stories,\n  };\n};\n","// REF: https://stackoverflow.com/a/15453499/8842333\nexport function range(start: number, stop: number, step?: number) {\n  var a = [start],\n    b = start;\n  while (b < stop) {\n    a.push((b += step || 1));\n  }\n  return a;\n}\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport {\n  createPrivateCollegeCalendar,\n  createPublicCollegeCalendar,\n} from \"../../core/calendar/TemplateCalendar/createCalendar\";\nimport {\n  PRIVATE_COLLEGE_CALENDAR_ID,\n  PUBLIC_COLLEGE_CALENDAR_ID,\n} from \"../../core/calendar/TemplateCalendar/model\";\nimport { TemplateOption } from \"../../core/calendar/BaseCalendar\";\nimport {\n  PrivateCollegeCalendar,\n  PublicCollegeCalendar,\n} from \"../../core/calendar/TemplateCalendar/model\";\nimport { RootState } from \"../rootReducer\";\n\ntype UpsertPrivateCollegeStoriesPayload = {\n  birth: string;\n  canWorkingholiday: boolean;\n  options: TemplateOption;\n};\n\ntype UpsertPublicCollegeStoriesPayload = {\n  birth: string;\n  canWorkingholiday: boolean;\n  options: TemplateOption;\n};\n\nconst initialState = {\n  [PRIVATE_COLLEGE_CALENDAR_ID]: undefined as\n    | PrivateCollegeCalendar\n    | undefined,\n  [PUBLIC_COLLEGE_CALENDAR_ID]: undefined as PublicCollegeCalendar | undefined,\n};\nconst templateCalendarTable = createSlice({\n  name: \"templateCalendarTable\",\n  initialState,\n  reducers: {\n    reset: () => initialState,\n    upsertPrivateCollegeStories(\n      state,\n      action: PayloadAction<UpsertPrivateCollegeStoriesPayload>\n    ) {\n      const { birth, canWorkingholiday, options } = action.payload;\n\n      const _calendar = createPrivateCollegeCalendar(\n        {\n          birth: new Date(birth), // TODO: don't new here\n          canWorkingholiday,\n        },\n        options\n      );\n      state[PRIVATE_COLLEGE_CALENDAR_ID] = _calendar;\n    },\n    upsertPublicCollegeStories(\n      state,\n      action: PayloadAction<UpsertPublicCollegeStoriesPayload>\n    ) {\n      const { birth, canWorkingholiday, options } = action.payload;\n\n      const _calendar = createPublicCollegeCalendar(\n        {\n          birth: new Date(birth), // TODO: don't new here\n          canWorkingholiday,\n        },\n        options\n      );\n      state[PUBLIC_COLLEGE_CALENDAR_ID] = _calendar;\n    },\n  },\n});\n\nexport default templateCalendarTable.reducer;\n\nexport const {\n  reset: resetAction,\n  upsertPrivateCollegeStories: upsertPrivateCollegeStoriesAction,\n  upsertPublicCollegeStories: upsertPublicCollegeStoriesAction,\n} = templateCalendarTable.actions;\n\nexport const selectPrivateCollegeCalendar = (state: RootState) =>\n  state.features.templateCalendar[PRIVATE_COLLEGE_CALENDAR_ID];\n\nexport const selectPublicCollegeCalendar = (state: RootState) =>\n  state.features.templateCalendar[PUBLIC_COLLEGE_CALENDAR_ID];\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../rootReducer\";\n\ntype State = {\n  step: {\n    isOpen: boolean;\n    activeStepIdx: number;\n  };\n};\n\ntype TogglePayload = {\n  isOpen?: boolean;\n};\n\nconst initialState = {\n  step: {\n    isOpen: true,\n    activeStepIdx: 0,\n  },\n} as State;\n\nconst slice = createSlice({\n  name: \"step\",\n  initialState,\n  reducers: {\n    reset: () => initialState,\n    toggle(state, _action: PayloadAction<TogglePayload>) {\n      const isOpen =\n        _action.payload === undefined\n          ? !state.step.isOpen\n          : !!_action.payload.isOpen;\n      state.step.isOpen = isOpen;\n    },\n    next(state, _action) {\n      state.step.activeStepIdx += 1;\n    },\n    back(state, _action) {\n      state.step.activeStepIdx -= 1;\n    },\n  },\n});\n\nexport const selectIsOpen = (state: RootState) => !!state.ui.step.step.isOpen;\n\nexport const selectActiveStepIdx = (state: RootState) =>\n  state.ui.step.step.activeStepIdx;\n\nexport const {\n  reset: resetAction,\n  toggle: toggleAction,\n  next: nextAction,\n  back: backAction,\n} = slice.actions;\n\nexport default slice.reducer;\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { resetAction as resetUserCalendarsAction } from \"../redux/features/userCalendars\";\nimport { resetAction as resetUserAction } from \"../redux/features/user\";\nimport { resetAction as resetTemplateOptionAction } from \"../redux/features/templateOption\";\nimport { resetAction as resetTemplateCalendarAction } from \"../redux/features/templateCalendarTable\";\nimport { resetAction as resetStepAction } from \"../redux/ui/step\";\n\nexport function useResetAllData() {\n  const dispatch = useDispatch();\n\n  const reset = React.useCallback(() => {\n    dispatch(resetUserCalendarsAction());\n    dispatch(resetUserAction());\n    dispatch(resetTemplateOptionAction());\n    dispatch(resetTemplateCalendarAction());\n    dispatch(resetStepAction());\n  }, [dispatch]);\n\n  return { reset } as const;\n}\n","export const THIS_GITHUB_URL = \"https://github.com/snamiki1212/plangoab\";\n","export const SNS_LIST = [\n  {\n    name: \"GitHub\",\n    url: \"https://github.com/snamiki1212\",\n  },\n  {\n    name: \"Twitter\",\n    url: \"https://twitter.com/snamiki1212\",\n  },\n];\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../rootReducer\";\n\ntype State = {\n  isOpen: boolean;\n};\n\nconst slice = createSlice({\n  name: \"previewModal\",\n  initialState: {\n    isOpen: false,\n  } as State,\n  reducers: {\n    toggle(state) {\n      state.isOpen = !state.isOpen;\n    },\n  },\n});\n\nexport const selectIsOpen = (state: RootState) => state.ui.previewModal.isOpen;\n\nexport const { toggle: toggleAction } = slice.actions;\n\nexport default slice.reducer;\n","import { useCallback } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { toggleAction, selectIsOpen } from \"../redux/ui/previewModal\";\n\nexport const usePreviewCommand = () => {\n  const dispatch = useDispatch();\n  const toggle = useCallback(() => dispatch(toggleAction()), [dispatch]);\n  return { toggle };\n};\n\nexport const usePreviewQuery = () => {\n  const isOpen = useSelector(selectIsOpen);\n  return { isOpen };\n};\n","import React, { PropsWithChildren } from \"react\";\nimport FullCalendarLib from \"@fullcalendar/react\";\nimport resourceTimelinePlugin from \"@fullcalendar/resource-timeline\";\nimport listPlugin from \"@fullcalendar/list\";\nimport interactionPlugin from \"@fullcalendar/interaction\";\nimport { FULL_CALENDAR_CONFIGS } from \"../../constants/fullcalendar/options\";\n\nexport function CalendarBase<T>(props: PropsWithChildren<T>) {\n  return (\n    <FullCalendarLib\n      {...FULL_CALENDAR_CONFIGS}\n      plugins={[interactionPlugin, resourceTimelinePlugin, listPlugin]}\n      {...props}\n    />\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { CalendarBase } from \"./CalendarBase\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\n\nconst eventContent = function (arg: any) {\n  const text = arg.event.title ?? \"\";\n  const description = arg.event.extendedProps.description ?? text;\n  if (description === \"\") return <span>{text}</span>;\n  return (\n    <Tooltip\n      title={<span style={{ whiteSpace: \"pre-line\" }}>{description}</span>}\n    >\n      <span>{text}</span>\n    </Tooltip>\n  );\n};\n\nexport function CalendarBaseContainer(props: any) {\n  return (\n    <StyledContainer>\n      <CalendarBase {...props} eventContent={eventContent} />\n    </StyledContainer>\n  );\n}\n\nconst StyledContainer = styled.div`\n  .fc-button {\n    background: transparent;\n    color: #000;\n    border-color: lightgray;\n    transition: 0.3s;\n    &:hover {\n      transition: 0.3s;\n      background: transparent;\n      opacity: 0.7;\n      color: #000;\n    }\n  }\n`;\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  removeEventAction,\n  updateEventAction,\n  updateEventByIdAction,\n} from \"../redux/features/userCalendars\";\nimport { BaseEvent, updateEvent } from \"../core/event/BaseEvent\";\n\ntype IdSet = { calendarId: string; storyId: string; eventId: string };\n\nexport const useEvent = () => {\n  const dispatch = useDispatch();\n\n  const remove = React.useCallback(\n    ({ calendarId, storyId, eventId }: IdSet) => {\n      if (!window.confirm(\"Do you remove this story?\")) return;\n      dispatch(\n        removeEventAction({\n          calendarId,\n          storyId,\n          eventId,\n        })\n      );\n    },\n    [dispatch]\n  );\n\n  const update = React.useCallback(\n    (idSet: IdSet, event: BaseEvent, params: any) => {\n      const newEvent = updateEvent(event, params);\n      dispatch(updateEventAction({ ...idSet, newEvent }));\n    },\n    [dispatch]\n  );\n\n  const updateById = React.useCallback(\n    (idSet: IdSet, params: Partial<BaseEvent>) => {\n      dispatch(updateEventByIdAction({ ...idSet, params }));\n    },\n    [dispatch]\n  );\n\n  return {\n    remove,\n    update,\n    updateById\n  } as const;\n};\n","import { addMonths, addYears, setMonth } from \"date-fns\";\nimport {\n  RESOURCE_ID__SHARED__AGE,\n  RESOURCE_ID__SHARED__LIMIT,\n} from \"../../constants/fullcalendar/settings\";\nimport { EVENTS } from \"../../constants/fullcalendar/templates\";\nimport { getRangeNumbers } from \"../../lib/age\";\nimport { uuid } from \"../../lib/uuid\";\nimport { convertIsoToDateTime } from \"../../lib/date\";\nimport { WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE } from \"../../constants/visa\";\nimport { BaseEvent } from \"../event/BaseEvent\";\n\nexport const createProfileEvents = ({\n  startDate,\n  storyId,\n  calendarId,\n  withWorkingholiday,\n  workingholidayPeriod,\n}: {\n  startDate: Date;\n  storyId: string;\n  calendarId: string;\n  withWorkingholiday: boolean;\n  workingholidayPeriod: number;\n}): BaseEvent[] => {\n  const workingHolidayLimitEvents = withWorkingholiday\n    ? createWorkingHolidayLimitEvents({\n        startDate,\n        storyId,\n        calendarId,\n        workingholidayPeriod,\n      })\n    : [];\n\n  // create age events\n  const startYear = new Date(startDate).getFullYear();\n  const endYear = getLastYear();\n  const years = getRangeNumbers(startYear, endYear);\n  const ageEventList = years.map((year, index) => {\n    const start = (() => {\n      startDate.setFullYear(year);\n      const isoStr = startDate.toISOString();\n      const str = convertIsoToDateTime(isoStr);\n      return str;\n    })();\n\n    const isoStr = addMonths(new Date(start), +11).toISOString();\n    const end = convertIsoToDateTime(isoStr);\n\n    return {\n      ...EVENTS.PROFILE.AGE(index),\n      id: uuid(),\n      start,\n      end,\n      storyId,\n      resourceId: RESOURCE_ID__SHARED__AGE,\n      extendedProps: {\n        resourceId: RESOURCE_ID__SHARED__AGE,\n        calendarId,\n        storyId,\n        description: \"\",\n      },\n    };\n  });\n\n  return [...workingHolidayLimitEvents, ...ageEventList];\n};\n\nconst getLastYear = () => {\n  const BUFFER_YEAR = 10;\n  const date = new Date();\n  return addYears(date, BUFFER_YEAR).getFullYear();\n};\n\nconst createWorkingHolidayLimitEvents = ({\n  startDate,\n  storyId,\n  calendarId,\n  workingholidayPeriod,\n}: {\n  startDate: Date;\n  storyId: string;\n  calendarId: string;\n  workingholidayPeriod: number;\n}): BaseEvent[] => {\n  const lastYearDate = addYears(\n    startDate,\n    WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE\n  );\n  const start = convertIsoToDateTime(startDate.toISOString());\n  const endDate = addMonths(lastYearDate, workingholidayPeriod);\n  const endOfLimit = convertIsoToDateTime(endDate.toISOString());\n  const endOfApplication = convertIsoToDateTime(\n    addYears(setMonth(endDate, +6), -1).toISOString()\n  );\n\n  const limitation = {\n    ...EVENTS.PROFILE.WORKING_HOLIDAY,\n    id: uuid(),\n    start,\n    end: endOfLimit,\n    resourceId: RESOURCE_ID__SHARED__LIMIT,\n    storyId,\n    extendedProps: {\n      resourceId: RESOURCE_ID__SHARED__LIMIT,\n      storyId,\n      calendarId,\n      description: \"\",\n    },\n  };\n\n  const application = {\n    ...EVENTS.PROFILE.WORKING_HOLIDAY_APPLICATION_LIMIT,\n    id: uuid(),\n    start,\n    end: endOfApplication,\n    storyId,\n    resourceId: RESOURCE_ID__SHARED__LIMIT,\n    extendedProps: {\n      storyId,\n      resourceId: RESOURCE_ID__SHARED__LIMIT,\n      calendarId,\n      description: \"\",\n    },\n  };\n  return [limitation, application];\n};\n","import { ProfileStory } from \"./model\";\nimport { PROFILE_ID } from \"../../../constants/fullcalendar/settings\";\nimport { createProfileResources } from \"../../resource/createProfileResources\";\nimport { createProfileEvents } from \"../../event/createProfileEvents\";\n\nconst STORY_NAME = \"Profile\";\n\nexport const createProfileStory = ({\n  birth,\n  calendarId,\n  workingholidayPeriod,\n}: {\n  birth: string | Date;\n  calendarId: string;\n  workingholidayPeriod: number;\n}): ProfileStory => {\n  const _birth = new Date(birth);\n  const storyId = PROFILE_ID;\n  const withWorkingholiday = workingholidayPeriod > 0;\n  const resources = createProfileResources({\n    calendarId,\n    storyId,\n    withWorkingholiday,\n  });\n  const events = createProfileEvents({\n    calendarId,\n    storyId,\n    startDate: _birth,\n    withWorkingholiday,\n    workingholidayPeriod,\n  });\n\n  return {\n    id: storyId,\n    calendarId,\n    name: STORY_NAME,\n    resources,\n    events,\n  };\n};\n","import {\n  NAME_OF_STORY_ID,\n  NAME_OF_ORDER,\n} from \"../../constants/fullcalendar/settings\";\nimport {\n  RESOURCE_ID__SHARED__AGE,\n  RESOURCE_ID__SHARED__LIMIT,\n} from \"../../constants/fullcalendar/settings\";\nimport { RESOURCES } from \"../../constants/fullcalendar/templates\";\nimport { BaseResource } from \"./BaseResource\";\n\nexport const createProfileResources = ({\n  calendarId,\n  storyId,\n  withWorkingholiday,\n}: {\n  calendarId: string;\n  storyId: string;\n  withWorkingholiday: boolean;\n}): BaseResource[] => {\n  const list = [\n    {\n      ...RESOURCES.PROFILE.AGE,\n      id: RESOURCE_ID__SHARED__AGE,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 0,\n      calendarId,\n    },\n  ];\n\n  if (withWorkingholiday) {\n    list.push({\n      ...RESOURCES.PROFILE.WORKING_HOLIDAY,\n      id: RESOURCE_ID__SHARED__LIMIT,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 1,\n      calendarId,\n    });\n  }\n\n  return list;\n};\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { DateSelectArg } from \"@fullcalendar/react\";\nimport { uuid } from \"../lib/uuid\";\nimport { createProfileStory } from \"../core/story/ProfileStory/createProfileStory\";\nimport { initEvent } from \"../core/event/BaseEvent\";\nimport { createUserCalendar } from \"../core/calendar/UserCalendar/createUserCalendar\";\nimport {\n  updateCalendarsAction,\n  removeCalendarAction,\n  addEventAction,\n  selectUserCalendar,\n} from \"../redux/features/userCalendars\";\n\nexport const useUserCalendar = () => {\n  const dispatch = useDispatch();\n  const calendar = useSelector(selectUserCalendar);\n\n  const init = React.useCallback(\n    ({\n      birthday,\n      workingholidayPeriod,\n    }: {\n      birthday: string | Date;\n      workingholidayPeriod: number;\n    }) => {\n      const calendarId = uuid();\n      const story = createProfileStory({\n        birth: birthday,\n        calendarId,\n        workingholidayPeriod,\n      });\n      const _calendar = createUserCalendar({\n        id: calendarId,\n        stories: [story],\n      });\n      const _calendars = [_calendar];\n      dispatch(updateCalendarsAction({ calendars: _calendars }));\n    },\n    [dispatch]\n  );\n\n  const select = React.useCallback(\n    (info: DateSelectArg) => {\n      if (!info.resource) {\n        console.warn(\"Unexpected data that info does not have resource.\");\n        return;\n      }\n\n      // storyId\n      const storyId = info.resource.extendedProps.storyId;\n      if (!storyId) {\n        console.warn(\"Unexpected data not including storyId.\");\n        return;\n      }\n\n      // calendarId\n      const calendarId = info.resource.extendedProps.calendarId;\n      if (!calendarId) {\n        console.warn(\"Unexpected data not including calendarId.\");\n        return;\n      }\n\n      const newEvent = initEvent({\n        id: uuid(),\n        resourceId: info.resource.id,\n        calendarId,\n        storyId,\n        start: info.startStr,\n        end: info.endStr,\n      });\n\n      dispatch(addEventAction({ event: newEvent, calendarId, storyId }));\n    },\n    [dispatch]\n  );\n\n  const remove = React.useCallback(\n    (calendarId: string) => {\n      dispatch(removeCalendarAction({ calendarId }));\n    },\n    [dispatch]\n  );\n\n  const stories = React.useMemo(() => calendar?.stories ?? [], [calendar]);\n\n  const events = React.useMemo(\n    () => calendar?.stories.flatMap((story) => story.events) ?? [],\n    [calendar]\n  );\n\n  const resources = React.useMemo(\n    () => calendar?.stories.flatMap((story) => story.resources) ?? [],\n    [calendar]\n  );\n\n  return {\n    // callbacks\n    init,\n    select,\n    remove,\n\n    // params\n    calendar,\n    stories,\n    events,\n    resources,\n  } as const;\n};\n","import { UserCalendar } from \"./model\";\nimport { ProfileStory } from \"../../story/ProfileStory/model\";\n\ntype Story = ProfileStory;\n\nexport const createUserCalendar = ({\n  id,\n  stories,\n}: {\n  id: string;\n  stories: Story[];\n}): UserCalendar => {\n  return {\n    id,\n    stories,\n  };\n};\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  removeStoryAction,\n  updateStoryAction,\n  updateStoryByIdAction,\n  addStoryAction,\n} from \"../redux/features/userCalendars\";\nimport { BaseStory, updateStory } from \"../core/story/BaseStory\";\nimport { initStory } from \"../core/story/BaseStory\";\nimport { PROFILE_ID } from \"../constants/fullcalendar/settings\";\n\ntype IdSet = { calendarId: string; storyId: string };\n\nexport const useStory = () => {\n  const dispatch = useDispatch();\n\n  const remove = React.useCallback(\n    ({ calendarId, storyId }: IdSet) => {\n      // TODO: move this line outside\n      if (!window.confirm(\"Do you remove this story?\")) return;\n      dispatch(\n        removeStoryAction({\n          storyId,\n          calendarId,\n        })\n      );\n    },\n    [dispatch]\n  );\n\n  const update = React.useCallback(\n    (idSet: IdSet, story: BaseStory, data: Partial<BaseStory>) => {\n      const newStory = updateStory(story, data);\n      dispatch(updateStoryAction({ ...idSet, newStory }));\n    },\n    [dispatch]\n  );\n\n  const updateById = React.useCallback(\n    (idSet: IdSet, params: Partial<BaseStory>) => {\n      dispatch(updateStoryByIdAction({ ...idSet, params }));\n    },\n    [dispatch]\n  );\n\n  const create = React.useCallback(\n    ({ calendarId }: { calendarId: string }, story?: BaseStory) => {\n      const _story = !!story ? story : initStory({ calendarId });\n      dispatch(addStoryAction({ calendarId, story: _story }));\n    },\n    [dispatch]\n  );\n\n  return {\n    remove,\n    update,\n    updateById,\n    create,\n    profileStoryId: PROFILE_ID,\n  } as const;\n};\n","import React from \"react\";\nimport { useUserCalendar } from \"./useUserCalendar\";\nimport { useStory } from \"./useStory\";\n\nexport const ADD_STORY_BUTTON = \"ADD_STORY_BUTTON\";\nexport const REMOVE_CALENDAR_BUTTON = \"REMOVE_CALENDAR_BUTTON\";\n\nexport const useUserCalendarCustomButtons = () => {\n  const { calendar, remove: removeUserCalendar } = useUserCalendar();\n  const { create: createStory } = useStory();\n\n  const handleAddStory = React.useCallback(() => {\n    if (!calendar) return;\n    const calendarId = calendar.id;\n    createStory({ calendarId });\n  }, [calendar, createStory]);\n\n  const handleRemoveCalendar = React.useCallback(() => {\n    if (!calendar) return;\n    const calendarId = calendar.id;\n\n    if (!window.confirm(\"Do you want to delete this calendar?\")) return;\n    removeUserCalendar(calendarId);\n  }, [removeUserCalendar, calendar]);\n\n  const customButtons = React.useMemo(\n    () => ({\n      [ADD_STORY_BUTTON]: {\n        text: \"Add story\",\n        click: handleAddStory,\n      },\n      [REMOVE_CALENDAR_BUTTON]: {\n        text: \"Clear Calendar\",\n        click: handleRemoveCalendar,\n      },\n    }),\n    [handleAddStory, handleRemoveCalendar]\n  );\n\n  return { customButtons };\n};\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { selectUserCalendar } from \"../redux/features/userCalendars\";\nimport styled from \"styled-components\";\nimport Button from \"@material-ui/core/Button\";\n\ntype Props = {\n  createOpenHandle: Function;\n};\n\ntype ContentProps = {\n  // REF: https://fullcalendar.io/docs/resource-group-render-hooks\n  groupValue: string;\n};\n\nexport const useResourceGroupLabelContentInUserCalendar = ({\n  createOpenHandle,\n}: Props) => {\n  const calendar = useSelector(selectUserCalendar);\n\n  const resourceGroupLabelContent = React.useCallback(\n    ({ groupValue: storyId }: ContentProps) => {\n      if (!calendar) return;\n\n      // story validation\n      const story = calendar.stories.find((story) => story.id === storyId);\n      if (!story) {\n        console.warn(\"cannot find story\", storyId);\n        return;\n      }\n\n      // name handler\n      let name: string;\n      if (story.name) {\n        name = story.name;\n      } else {\n        console.warn(\"cannot find this story name\", storyId);\n        name = \"No Name\";\n      }\n\n      const calendarId = calendar.id;\n      const openHandle = createOpenHandle({ calendarId, storyId });\n\n      return (\n        <Container>\n          <i>{name}</i>\n          <Button onClick={openHandle} variant=\"outlined\">\n            \n          </Button>\n        </Container>\n      );\n    },\n    [calendar, createOpenHandle]\n  );\n\n  return { resourceGroupLabelContent };\n};\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../rootReducer\";\n\ntype State = {\n  story: null | {\n    calendarId: string;\n    storyId: string;\n  };\n};\n\ntype PushPayload = {\n  calendarId: string;\n  storyId: string;\n};\n\ntype PopPayload = undefined;\n\nconst slice = createSlice({\n  name: \"storyModal\",\n  initialState: {\n    story: null,\n  } as State,\n  reducers: {\n    push(state, action: PayloadAction<PushPayload>) {\n      const _payload = action.payload;\n      state.story = _payload;\n    },\n    pop(state, _action: PayloadAction<PopPayload>) {\n      state.story = null;\n    },\n  },\n});\n\nexport const selectIsOpen = (state: RootState) => !!state.ui.storyModal.story;\n\nexport const selectStoryModal = (state: RootState) => state.ui.storyModal.story;\n\nexport const selectStory = (state: RootState) => {\n  const _story = state.ui.storyModal.story;\n  if (!_story) return null;\n  const { calendarId, storyId } = _story;\n\n  // calendar\n  const calendarIdx = state.features.userCalendars.calendars.findIndex(\n    (calendar) => calendar.id === calendarId\n  );\n  const cannotFind = calendarIdx === -1;\n  if (cannotFind) {\n    console.warn(\"cannot find calendar on removeStory\", calendarId);\n    return;\n  }\n\n  // story\n  return state.features.userCalendars.calendars[calendarIdx].stories.find(\n    (story) => story.id === storyId\n  );\n};\n\nexport const { push: pushAction, pop: popAction } = slice.actions;\n\nexport default slice.reducer;\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { pushAction, popAction, selectIsOpen } from \"../redux/ui/storyModal\";\n\nexport const useStoryModal = () => {\n  const dispatch = useDispatch();\n\n  const push = React.useCallback(\n    ({\n      storyId,\n      calendarId,\n    }: {\n      storyId: string;\n      calendarId: string;\n    }) => {\n      dispatch(pushAction({ calendarId, storyId }));\n    },\n    [dispatch]\n  );\n\n  const pop = React.useCallback(() => {\n    dispatch(popAction());\n  }, [dispatch]);\n\n  const isOpen = useSelector(selectIsOpen);\n\n  return { push, pop, isOpen } as const;\n};\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../rootReducer\";\n\ntype State = {\n  event: null | {\n    calendarId: string;\n    storyId: string;\n    eventId: string;\n  };\n};\n\ntype PushPayload = {\n  calendarId: string;\n  storyId: string;\n  eventId: string;\n};\n\ntype PopPayload = undefined;\n\nconst slice = createSlice({\n  name: \"eventModal\",\n  initialState: {\n    event: null,\n  } as State,\n  reducers: {\n    push(state, action: PayloadAction<PushPayload>) {\n      const _payload = action.payload;\n      state.event = _payload;\n    },\n    pop(state, _action: PayloadAction<PopPayload>) {\n      state.event = null;\n    },\n  },\n});\n\nexport const selectIsOpen = (state: RootState) => !!state.ui.eventModal.event;\n\nexport const selectEventModal = (state: RootState) => state.ui.eventModal.event;\n\nexport const selectEvent = (state: RootState) => {\n  const event = state.ui.eventModal.event;\n  if (!event) return null;\n  const { calendarId, storyId, eventId } = event;\n\n  // calendar\n  const calendarIdx = state.features.userCalendars.calendars.findIndex(\n    (calendar) => calendar.id === calendarId\n  );\n  const cannotFind = calendarIdx === -1;\n  if (cannotFind) {\n    console.warn(\"cannot find calendar on removeResource\", calendarId);\n    return;\n  }\n\n  // story\n  const storyIdx = state.features.userCalendars.calendars[\n    calendarIdx\n  ].stories.findIndex((story) => story.id === storyId);\n  const cannotFindStory = storyIdx === -1;\n  if (cannotFindStory) {\n    console.warn(\"cannot find story on removeResource\", calendarId);\n    return;\n  }\n\n  //\n  return state.features.userCalendars.calendars[calendarIdx].stories[\n    storyIdx\n  ].events.find((event) => event.id === eventId);\n};\n\nexport const { push: pushAction, pop: popAction } = slice.actions;\n\nexport default slice.reducer;\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { pushAction, popAction, selectIsOpen } from \"../redux/ui/eventModal\";\n\nexport const useEventModal = () => {\n  const dispatch = useDispatch();\n\n  const push = React.useCallback(\n    ({\n      eventId,\n      storyId,\n      calendarId,\n    }: {\n      eventId: string;\n      storyId: string;\n      calendarId: string;\n    }) => {\n      dispatch(pushAction({ calendarId, eventId, storyId }));\n    },\n    [dispatch]\n  );\n\n  const pop = React.useCallback(() => {\n    dispatch(popAction());\n  }, [dispatch]);\n\n  const isOpen = useSelector(selectIsOpen);\n\n  return { push, pop, isOpen } as const;\n};\n","import React from \"react\";\nimport { CalendarBaseContainer } from \"../atoms/CalendarBaseContainer\";\nimport { useEvent } from \"../../hooks/useEvent\";\nimport {\n  useUserCalendarCustomButtons,\n  ADD_STORY_BUTTON,\n  REMOVE_CALENDAR_BUTTON,\n} from \"../../hooks/useUserCalendarCustomButtons\";\nimport { EventClickArg } from \"@fullcalendar/react\";\nimport { useUserCalendar } from \"../../hooks/useUserCalendar\";\nimport { useResourceGroupLabelContentInUserCalendar } from \"../../hooks/useResourceGroupLabelContentInUserCalendar\";\nimport { useStoryModal } from \"../../hooks/useStoryModal\";\nimport { useEventModal } from \"../../hooks/useEventModal\";\n\nconst headerToolbar = {\n  left: `${ADD_STORY_BUTTON},${REMOVE_CALENDAR_BUTTON}`,\n  center: \"title\",\n  right: \"prev,next\",\n} as const;\n\nconst previewConfig = { height: 3000 } as const;\nconst nonPreviewConfig = { height: 600 } as const;\n\ntype Props = { isPreviewMode?: boolean };\nexport function UserCalendar({ isPreviewMode = false }: Props) {\n  const { push: pushStoryModal } = useStoryModal();\n  const { push: pushEventModal } = useEventModal();\n\n  const createOpenStoryHandle = React.useCallback(\n    (idSet: { calendarId: string; storyId: string }) => () => {\n      pushStoryModal(idSet);\n    },\n    [pushStoryModal]\n  );\n\n  const {\n    resourceGroupLabelContent,\n  } = useResourceGroupLabelContentInUserCalendar({\n    createOpenHandle: createOpenStoryHandle,\n  });\n  const { events, resources, select } = useUserCalendar();\n\n  const click = React.useCallback(\n    (info: EventClickArg) => {\n      const calendarId = info.event.extendedProps.calendarId as\n        | string\n        | undefined;\n      if (!calendarId) {\n        return console.warn(\"Invalid data. cannot find calendarId.\");\n      }\n\n      const eventId = info.event.id;\n      if (!eventId) {\n        return console.warn(\"Invalid data. cannot find eventId.\");\n      }\n\n      const storyId = info.event.extendedProps.storyId as string | undefined;\n      if (!storyId) {\n        return console.warn(\"Invalid data. cannot find storyId.\");\n      }\n\n      const idSet = {\n        calendarId,\n        eventId,\n        storyId,\n      } as const;\n\n      pushEventModal(idSet);\n    },\n    [pushEventModal]\n  );\n  const { updateById } = useEvent();\n  const updateEvent = React.useCallback(\n    (data: any) => {\n      if (!data.event || !data.event.extendedProps) {\n        return console.error(\"Invalid data. cannot find event data.\");\n      }\n      const calendarId: string | undefined =\n        data.event.extendedProps?.calendarId;\n      const storyId: string | undefined = data.event.extendedProps?.storyId;\n      const eventId: string | undefined = data.event.id;\n      if (!calendarId)\n        return console.error(\n          \"Invalid data. Cannot find calendarId in extendedProps\"\n        );\n      if (!storyId)\n        return console.error(\n          \"Invalid data. Cannot find storyId in extendedProps\"\n        );\n      if (!eventId) return console.error(\"Invalid data. Cannot find eventId\");\n\n      const start = data.event.start;\n      const end = data.event.end;\n      const idSet = { calendarId, storyId, eventId };\n\n      const params = { start, end };\n      updateById(idSet, params);\n    },\n    [updateById]\n  );\n\n  const { customButtons } = useUserCalendarCustomButtons();\n\n  const config = isPreviewMode ? previewConfig : nonPreviewConfig;\n\n  return (\n    <CalendarBaseContainer\n      events={events}\n      resources={resources}\n      // click event\n      eventClick={click}\n      // select empty space\n      selectable={true}\n      select={select}\n      // drag or resize event\n      editable={true}\n      eventResize={updateEvent}\n      eventDrop={updateEvent}\n      // etc\n      initialDate={\"2020-06-01\"} // TODO: change dynamically\n      resourceGroupLabelContent={resourceGroupLabelContent}\n      customButtons={customButtons}\n      headerToolbar={headerToolbar}\n      resourcesInitiallyExpanded\n      {...config}\n    />\n  );\n}\n","import React from \"react\";\nimport { EVENTS } from \"../../constants/fullcalendar/templates\";\n\nconst { TASK } = EVENTS;\nconst tasksWithDescription = Object.entries(TASK).filter(\n  ([_key, val]) => val.description\n);\n\nexport function ExplanationSection() {\n  return (\n    <div>\n      <h3>Explanation for template description</h3>\n      <table style={{ border: \"1px solid gray\", borderCollapse: \"collapse\" }}>\n        {tasksWithDescription.map(([key, val]) => (\n          <tr>\n            <td style={{ border: \"1px solid gray\" }}>{key}</td>\n            <td style={{ border: \"1px solid gray\" }}>\n              <span style={{ whiteSpace: \"pre-line\" }}>{val.description}</span>\n            </td>\n          </tr>\n        ))}\n      </table>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { UserCalendar } from \"../organisms/UserCalendar\";\nimport { ExplanationSection } from \"../atoms/ExplanationSection\";\nimport { usePreviewQuery, usePreviewCommand } from \"../../hooks/usePreview\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\n\nexport function PreviewModal() {\n  const { toggle } = usePreviewCommand();\n  const { isOpen } = usePreviewQuery();\n  return (\n    <Dialog onClose={toggle} open={isOpen} fullScreen>\n      <div style={{ overflowX: \"scroll\", width: \"10000px\", height: \"10000px\" }}>\n        <Button onClick={toggle} variant=\"outlined\">\n          {\"<< Back\"}\n        </Button>\n        <UserCalendar isPreviewMode />\n        <br />\n        <ExplanationSection />\n      </div>\n    </Dialog>\n  );\n}\n","import React, { PropsWithChildren } from \"react\";\nimport styled from \"styled-components\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport { useResetAllData } from \"../../hooks/useResetAllData\";\nimport { THIS_GITHUB_URL } from \"../../constants/meta\";\nimport { SNS_LIST } from \"../../constants/sns\";\nimport { collaborations } from \"../../constants/collaborations\";\nimport { usePreviewCommand } from \"../../hooks/usePreview\";\nimport { PreviewModal } from \"../molecules/PreviewModal\";\n\ntype Props = {\n  isOpen: boolean;\n  onClose: () => void;\n};\n\nexport function AboutModal({ isOpen, onClose }: PropsWithChildren<Props>) {\n  return (\n    <Dialog onClose={onClose} open={isOpen}>\n      <DialogTitle>\n        <MainTitle> Plangoab</MainTitle>\n      </DialogTitle>\n      <DialogContent dividers={true}>\n        <AboutContent />\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nfunction HowToPrintSection() {\n  const { toggle } = usePreviewCommand();\n  return (\n    <>\n      <Section\n        title=\" How To Print\"\n        content={\n          <p>\n            <li>1. Go to fullscreen Calendar view.</li>\n            <li>2. Ctrl + P, Ope print feature.</li>\n            <li>3. Change Layout {\"[Layout] > Landscape\"} </li>\n            <li>4. Change Scale {\"[More Settings] > [Scale] > 20\"}</li>\n            <li>5. Save as PDF </li>\n            <Button onClick={toggle} variant=\"outlined\">\n              Open Fullscreen Calendar View\n            </Button>\n          </p>\n        }\n      />\n      <PreviewModal />\n    </>\n  );\n}\n\nfunction AboutContent() {\n  return (\n    <ContentContainer>\n      <AboutSection />\n      <HowToUseSection />\n      <TipsSection />\n      <ResetSection />\n      <HowToPrintSection />\n      <LicenseSection />\n      <AuthorSection />\n      <CollaborationsSection />\n      <CodeSection />\n    </ContentContainer>\n  );\n}\n\nfunction Section({\n  title,\n  content,\n}: {\n  title: string;\n  content: React.ReactNode;\n}) {\n  return (\n    <div>\n      <h2>{title}</h2>\n      <div>{content}</div>\n    </div>\n  );\n}\n\nfunction AboutSection() {\n  return (\n    <Section\n      title=\" About Planogoab\"\n      content={\n        <p>\n          A web calendar for a person going abroad. Generating a suitable\n          schedule and customizable.\n        </p>\n      }\n    />\n  );\n}\n\nfunction HowToUseSection() {\n  return (\n    <Section\n      title=\" How To Use\"\n      content={\n        <div>\n          <p>\n            There are two sections.\n            <br />\n            <li>1. My calendar</li>\n            <li>2. Template calendars</li>\n          </p>\n\n          <br />\n\n          <p>\n            <h3>Instruction</h3>\n            <li>\n              1. Pick appropriate plan from a template calendar to click \"Copy\n              to my calendar\".\n            </li>\n            <li>\n              2. Stories are copied from a template calendar into my calendar.\n            </li>\n            <li>3. Edit my story and events in my calendar.</li>\n          </p>\n        </div>\n      }\n    />\n  );\n}\n\nfunction TipsSection() {\n  return (\n    <Section\n      title=\" Tips\"\n      content={\n        <div>\n          <li>Zoom in: [Command] + [-]</li>\n          <li>Zoom out: [Command] + [+]</li>\n        </div>\n      }\n    />\n  );\n}\n\nfunction LicenseSection() {\n  return (\n    <Section\n      title=\" License\"\n      content={\n        <div>\n          <li>GPL-3.0</li>\n        </div>\n      }\n    />\n  );\n}\n\nfunction ResetSection() {\n  const { reset } = useResetAllData();\n\n  const handleResetAllData = React.useCallback(() => {\n    if (!window.confirm(\"Would you remove all data in Plangoab?\")) return;\n    reset();\n  }, [reset]);\n  return (\n    <Section\n      title=\" Reset All Data\"\n      content={\n        <div>\n          <div>\n            <p>Would you like to reset all data in Plangoab?</p>\n            <br />\n            <Button\n              onClick={handleResetAllData}\n              variant=\"outlined\"\n              color=\"secondary\"\n            >\n              RESET ALL DATA\n            </Button>\n          </div>\n        </div>\n      }\n    />\n  );\n}\nfunction AuthorSection() {\n  return (\n    <Section\n      title=\" Author\"\n      content={\n        <div>\n          {SNS_LIST.map(({ name, url }) => (\n            <li>\n              <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n                {name}\n              </a>\n            </li>\n          ))}\n        </div>\n      }\n    />\n  );\n}\n\nfunction CollaborationsSection() {\n  return (\n    <Section\n      title=\" Collaborations\"\n      content={\n        <div>\n          {collaborations.map(({ name, link }) => (\n            <li>\n              <a target=\"_blank\" rel=\"noopener noreferrer\" href={link}>\n                {name}\n              </a>\n            </li>\n          ))}\n        </div>\n      }\n    />\n  );\n}\n\nfunction CodeSection() {\n  return (\n    <Section\n      title=\" Source Code\"\n      content={\n        <div>\n          <span>\n            Plangoab is OSS managed at <a href={THIS_GITHUB_URL}>GitHub</a> so\n            you can check all of code.\n          </span>\n        </div>\n      }\n    />\n  );\n}\n\nconst ContentContainer = styled.div`\n  display: grid;\n  gap: 2rem;\n`;\n\nconst MainTitle = styled.span`\n  font-weight: 900;\n`;\n","import React from'react';\n\nexport const useModal = (init?: boolean) => {\n  const [isOpen, setIsOpen] = React.useState(!!init)\n\n  const open = React.useCallback(() => {\n    setIsOpen(true);\n  }, []);\n\n  const close = React.useCallback(() => {\n    setIsOpen(false);\n  }, []);\n\n  const toggle = React.useCallback(() => {\n    setIsOpen(prev => !prev)\n  }, []);\n\n  return {isOpen, open, close, toggle}\n}","export default __webpack_public_path__ + \"static/media/choose_school.c7f2b371.gif\";","export default __webpack_public_path__ + \"static/media/copy_story.b2490017.gif\";","export default __webpack_public_path__ + \"static/media/edit_calendar.c2bec5c3.gif\";","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  toggleAction,\n  nextAction,\n  backAction,\n  selectActiveStepIdx,\n  selectIsOpen,\n} from \"../redux/ui/step\";\n\nexport const useStepper = () => {\n  const isOpen = useSelector(selectIsOpen);\n  const activeStepIdx = useSelector(selectActiveStepIdx);\n  const dispatch = useDispatch();\n  const next = React.useCallback(() => dispatch(nextAction({})), [dispatch]);\n  const back = React.useCallback(() => dispatch(backAction({})), [dispatch]);\n\n  const open = React.useCallback(\n    () => dispatch(toggleAction({ isOpen: true })),\n    [dispatch]\n  );\n\n  const close = React.useCallback(\n    () => dispatch(toggleAction({ isOpen: false })),\n    [dispatch]\n  );\n\n  return { isOpen, activeStepIdx, open, close, next, back };\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Stepper from \"@material-ui/core/Stepper\";\nimport Step from \"@material-ui/core/Step\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport GIF_ChooseScool from \"../../assets/choose_school.gif\";\nimport GIF_CopyStory from \"../../assets/copy_story.gif\";\nimport GIF_EditCalendar from \"../../assets/edit_calendar.gif\";\nimport { useStepper } from \"../../hooks/useStepper\";\n\nconst steps = [\n  {\n    label: \"Choose School Type\",\n    content: (\n      <div>\n        <div>\n          <span>Choose school on Template section.</span>\n          <ul>\n            <li>Private college</li>\n            <li>Public college</li>\n          </ul>\n        </div>\n        <img src={GIF_ChooseScool} alt=\"chooseScool\" style={{ width: \"50%\" }} />\n      </div>\n    ),\n  },\n  {\n    label: \"Click Copy button\",\n    content: (\n      <div>\n        <div>Click [ Copy to my calendar] button.</div>\n        <br />\n        <div>Check that your calendar has copied section.</div>\n        <br />\n        <img src={GIF_CopyStory} alt=\"CopyStory\" style={{ width: \"50%\" }} />\n      </div>\n    ),\n  },\n  {\n    label: \"Edit your calendar\",\n    content: (\n      <div>\n        <div>Edit your plan for feel free in your calendar.</div>\n        <img\n          src={GIF_EditCalendar}\n          alt=\"Edit Calendar\"\n          style={{ width: \"50%\" }}\n        />\n      </div>\n    ),\n  },\n  {\n    label: \"Done!\",\n    content: <div>Finished tutorial! Let's Enjoy</div>,\n  },\n] as const;\n\nexport function TutorialModal() {\n  const { activeStepIdx, isOpen, close, next, back } = useStepper();\n\n  const isFirstStep = React.useMemo(() => activeStepIdx === 0, [activeStepIdx]);\n  const isLastStep = React.useMemo(() => activeStepIdx === steps.length - 1, [\n    activeStepIdx,\n  ]);\n\n  return (\n    <Dialog open={isOpen} onClose={close} maxWidth=\"lg\">\n      <DialogTitle>\n        <Title>How To Use</Title>\n        <Stepper activeStep={activeStepIdx} alternativeLabel>\n          {steps.map(({ label }) => (\n            <Step key={label}>\n              <StepLabel>{label}</StepLabel>\n            </Step>\n          ))}\n        </Stepper>\n      </DialogTitle>\n      <Divider />\n      <DialogContent>\n        <ContentContainer>{steps[activeStepIdx].content}</ContentContainer>\n      </DialogContent>\n      <Divider />\n      <ButtonContainer>\n        <div></div>\n        <Button onClick={back} disabled={isFirstStep}>\n          Back\n        </Button>\n        {isLastStep ? (\n          <Button onClick={close} color=\"primary\" variant=\"contained\">\n            Let's try!\n          </Button>\n        ) : (\n          <Button onClick={next} color=\"primary\" variant=\"contained\">\n            Next\n          </Button>\n        )}\n        <Button onClick={close}>Close</Button>\n      </ButtonContainer>\n    </Dialog>\n  );\n}\n\nconst Title = styled.span`\n  font-weight: 900;\n`;\n\nconst ButtonContainer = styled.div`\n  display: grid;\n  grid-template-columns: 0.3fr 1fr 1fr 0.3fr;\n  gap: 1rem;\n  margin: 1rem;\n`;\n\nconst ContentContainer = styled.div`\n  height: 70vh;\n  width: 70vw;\n`;\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport styled from \"styled-components\";\nimport { AboutModal } from \"../organisms/AboutModal\";\nimport { LogoImage } from \"../atoms/LogoImage\";\nimport { useModal } from \"../../hooks/useModal\";\nimport { TutorialModal } from \"../organisms/TutorialModal\";\nimport { useStepper } from \"../../hooks/useStepper\";\n\nexport function Header() {\n  const {\n    isOpen: isOpenAbout,\n    open: openAbout,\n    close: closeAbout,\n  } = useModal();\n\n  const { open } = useStepper();\n\n  return (\n    <>\n      <AppBar position=\"static\" style={{ background: \"#fff\", color: \"#000\" }}>\n        <Toolbar>\n          <div style={{ width: \"50px\", height: \"50px\" }}>\n            <LogoImage />\n          </div>\n          <Title>Plangoab</Title>\n          <ButtonContainer>\n            <Button\n              variant=\"contained\"\n              onClick={open}\n              style={{ background: \"white\" }}\n            >\n              HowTo\n            </Button>\n            <Button\n              variant=\"contained\"\n              onClick={openAbout}\n              style={{ background: \"white\" }}\n            >\n              About Plangoab\n            </Button>\n          </ButtonContainer>\n        </Toolbar>\n      </AppBar>\n\n      {/* Modal */}\n      <AboutModal isOpen={isOpenAbout} onClose={closeAbout} />\n      <TutorialModal />\n    </>\n  );\n}\n\nconst Title = styled.span`\n  font-size: 2rem;\n  padding: 1rem;\n  font-weight: 600;\n`;\n\nconst ButtonContainer = styled.div`\n  margin-left: auto;\n  display: grid;\n  gap: 1rem;\n  grid-template-columns: 1fr 1fr;\n`;\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useForm } from \"react-hook-form\";\nimport styled from \"styled-components\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\n//\nimport { selectStoryModal, selectStory } from \"../../redux/ui/storyModal\";\nimport { useStory } from \"../../hooks/useStory\";\nimport { useResource } from \"../../hooks/useResource\";\nimport { FIELD } from \"../../constants/fullcalendar/settings\";\n\ntype Props = {\n  isOpen: boolean;\n  onClose: () => void;\n};\n\nexport function StoryEditModal({ isOpen, onClose }: Props) {\n  const storyModal = useSelector(selectStoryModal);\n  const story = useSelector(selectStory);\n  const { register, handleSubmit } = useForm();\n  const { remove: removeStory, update: updateStory } = useStory();\n  const { push: pushResource, remove: removeResource } = useResource();\n\n  const handleRemoveStory = React.useCallback(() => {\n    if (!storyModal) {\n      return console.warn(\"Invalid data status when to update resource.\");\n    }\n    removeStory(storyModal);\n    onClose();\n  }, [storyModal, removeStory, onClose]);\n\n  const handleRemoveResource = React.useCallback(\n    (resourceId: string) => () => {\n      if (!storyModal) {\n        return console.warn(\"Invalid data status when to remove resource.\");\n      }\n      removeResource({ ...storyModal, resourceId });\n    },\n    [storyModal, removeResource]\n  );\n\n  const handleAddResource = React.useCallback(() => {\n    if (!storyModal) {\n      return console.warn(\"Invalid data status when to add resource.\");\n    }\n    pushResource(storyModal);\n  }, [storyModal, pushResource]);\n\n  const onSubmit = React.useCallback(\n    (data: any) => {\n      if (!storyModal || !story) {\n        return console.warn(\"Invalid data status when to update story.\");\n      }\n      updateStory(storyModal, story, data);\n      onClose();\n    },\n    [updateStory, storyModal, story, onClose]\n  );\n\n  // // TODO: error handler\n  // // const { register, handleSubmit, errors } = useForm();\n  // const { register, handleSubmit } = useForm();\n\n  if (!story) return <></>;\n\n  return (\n    <Dialog onClose={onClose} open={isOpen}>\n      <DialogTitle>\n        <form onSubmit={handleSubmit(onSubmit)}>\n          <DialogTitleInner>\n            <TextField\n              inputRef={register}\n              name=\"name\"\n              defaultValue={story.name}\n              variant=\"outlined\"\n              label=\"Story Name\"\n            />\n          </DialogTitleInner>\n        </form>\n      </DialogTitle>\n\n      <DialogContent dividers={true}>\n        <div>\n          <form onSubmit={handleSubmit(onSubmit)}>\n            {story.resources.map((resource, idx) => {\n              const fieldName = `resources[${idx}]`;\n              return (\n                <Fieldset name={fieldName} key={fieldName}>\n                  <input\n                    type=\"hidden\"\n                    name={`${fieldName}.id`}\n                    ref={register}\n                    value={resource.id}\n                  />\n                  <TextField\n                    defaultValue={resource[FIELD]}\n                    inputRef={register}\n                    name={`${fieldName}.${FIELD}`}\n                    label=\"Field\"\n                  />\n                  <Button\n                    onClick={handleRemoveResource(resource.id)}\n                    color=\"secondary\"\n                    variant=\"contained\"\n                  >\n                    Delete\n                  </Button>\n                </Fieldset>\n              );\n            })}\n            <AddResourceButtonContainer>\n              <Button\n                onClick={handleAddResource}\n                variant=\"outlined\"\n                color=\"primary\"\n              >\n                + Add Resource\n              </Button>\n            </AddResourceButtonContainer>\n\n            <UpdateButtonContainer>\n              <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n                Update\n              </Button>\n            </UpdateButtonContainer>\n          </form>\n        </div>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          onClick={handleRemoveStory}\n          color=\"secondary\"\n          variant=\"contained\"\n        >\n          Delete this story\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nconst DialogTitleInner = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst Fieldset = styled.fieldset`\n  border: none;\n  display: grid;\n  grid-template-columns: 2fr 1fr;\n  gap: 1rem;\n  padding: 1rem;\n  margin: 1rem;\n  border: 1px solid lightgray;\n`;\n\nconst AddResourceButtonContainer = styled.div`\n  padding: 1rem;\n`;\n\nconst UpdateButtonContainer = styled.div`\n  padding: 1rem;\n  text-align: right;\n`;\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectUserCalendar } from \"../redux/features/userCalendars\";\nimport {\n  removeResourceAction,\n  pushResourceAction,\n} from \"../redux/features/userCalendars\";\nimport { initResource } from \"../core/resource/BaseResource\";\n\ntype IdSet = { calendarId: string; resourceId: string; storyId: string };\n\nexport const useResource = () => {\n  const dispatch = useDispatch();\n\n  // TODO: remoove this line and get params as arg in each function\n  const calendar = useSelector(selectUserCalendar);\n\n  const push = React.useCallback(\n    ({ calendarId, storyId }: { calendarId: string; storyId: string }) => {\n      // story\n      const storyIdx = calendar.stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateResource\", calendarId);\n        return;\n      }\n\n      // resource\n      const _resources = calendar.stories[storyIdx].resources;\n      let lastResource = { idx: -1, order: -1 };\n      for (let i = 0; i < _resources.length; i++) {\n        const resource = _resources[i];\n        const _order = resource.order ?? -1;\n        if (_order > lastResource.order) {\n          lastResource = { idx: i, order: _order };\n        }\n      }\n\n      const _resource = initResource({\n        calendarId,\n        storyId,\n        order: lastResource.order + 1,\n      });\n\n      dispatch(\n        pushResourceAction({ calendarId, storyId, resource: _resource })\n      );\n    },\n    [dispatch, calendar]\n  );\n\n  const remove = React.useCallback(\n    ({ calendarId, resourceId, storyId }: IdSet) => {\n      // TODO: Move outside\n      if (!window.confirm(\"Do you remove this resource?\")) return;\n\n      dispatch(\n        removeResourceAction({\n          resourceId: resourceId,\n          storyId: storyId,\n          calendarId,\n        })\n      );\n    },\n    [dispatch]\n  );\n\n  return { remove, push } as const;\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { useForm } from \"react-hook-form\";\nimport { useSelector } from \"react-redux\";\nimport { selectEventModal, selectEvent } from \"../../redux/ui/eventModal\";\nimport { useEvent } from \"../../hooks/useEvent\";\nimport { BaseEvent } from \"../../core/event/BaseEvent\";\n\ntype Props = {\n  isOpen: boolean;\n  onClose: () => void;\n};\n\nexport function EventEditModal({ isOpen, onClose }: Props) {\n  const eventModal = useSelector(selectEventModal);\n  const event = useSelector(selectEvent);\n\n  const { remove, update } = useEvent();\n\n  const onRemove = React.useCallback(() => {\n    if (!eventModal) {\n      return console.warn(\"Invalid data status when to update event.\");\n    }\n    remove(eventModal);\n    onClose();\n  }, [eventModal, remove, onClose]);\n\n  const onUpdate = React.useCallback(\n    (data: Partial<BaseEvent>) => {\n      if (!eventModal || !event) {\n        return console.warn(\"Invalid data status when to remove event.\");\n      }\n      update(eventModal, event, data);\n      onClose();\n    },\n    [eventModal, event, update, onClose]\n  );\n\n  // TODO: error handler\n  const { register, handleSubmit } = useForm();\n\n  return (\n    <Dialog onClose={onClose} open={isOpen}>\n      <DialogTitle>Event</DialogTitle>\n      <form onSubmit={handleSubmit(onUpdate)}>\n        <DialogContent dividers={true}>\n          <Flex>\n            <TextField\n              inputRef={register}\n              name={\"title\"}\n              defaultValue={event?.title}\n              label=\"Title\"\n              variant=\"outlined\"\n            />\n            <TextField\n              multiline\n              rows={3}\n              rowsMax={10}\n              inputRef={register}\n              name={\"extendedProps.description\"}\n              defaultValue={event?.extendedProps.description}\n              label=\"Description\"\n              variant=\"outlined\"\n            />\n          </Flex>\n        </DialogContent>\n        <DialogActions>\n          <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n            UPDATE\n          </Button>\n          <Button onClick={onRemove} variant=\"contained\" color=\"secondary\">\n            Remove\n          </Button>\n        </DialogActions>\n      </form>\n    </Dialog>\n  );\n}\n\nconst Flex = styled.div`\n  display: grid;\n  gap: 2rem;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Box from \"@material-ui/core/Box\";\nimport Divider from \"@material-ui/core/Divider\";\nimport { useStoryModal } from \"../../hooks/useStoryModal\";\nimport { useEventModal } from \"../../hooks/useEventModal\";\nimport { StoryEditModal } from \"../molecules/StoryEditModal\";\nimport { EventEditModal } from \"../molecules/EventEditModal\";\nimport { UserCalendar } from \"../organisms/UserCalendar\";\n\nexport function UserCalendarSection() {\n  const { pop: popStoryModal, isOpen: isOpenStoryModal } = useStoryModal();\n  const { pop: popEventModal, isOpen: isOpenEventModal } = useEventModal();\n  return (\n    <>\n      <Box>\n        <Paper elevation={8}>\n          <PaperHeader>\n            <Title>My Calendar</Title>\n          </PaperHeader>\n          <Divider />\n          <CalendarContainer>\n            <UserCalendar />\n          </CalendarContainer>\n        </Paper>\n      </Box>\n\n      {/* Modal */}\n      <StoryEditModal isOpen={isOpenStoryModal} onClose={popStoryModal} />\n      <EventEditModal isOpen={isOpenEventModal} onClose={popEventModal} />\n    </>\n  );\n}\n\nconst Title = styled.span`\n  font-size: 2rem;\n  font-weight: 900;\n  margin-right: 1rem;\n`;\n\nconst PaperHeader = styled.div`\n  padding: 1rem 1.5rem;\n`;\n\nconst CalendarContainer = styled.div`\n  padding: 1rem 1.5rem;\n`;\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport {\n  selectPrivateCollegeCalendar,\n  selectPublicCollegeCalendar,\n} from \"../redux/features/templateCalendarTable\";\nimport { selectUserCalendar } from \"../redux/features/userCalendars\";\nimport { updateStory } from \"../core/story/BaseStory\";\nimport styled from \"styled-components\";\nimport Button from \"@material-ui/core/Button\";\n\ntype ResourceContentProps = {\n  // REF: https://fullcalendar.io/docs/resource-group-render-hooks\n  groupValue: string;\n};\n\ntype Props = {\n  createClickHandel: Function;\n};\n\nexport const useResourceGroupLabelContentInTemplateCalendar = ({\n  createClickHandel,\n}: Props) => {\n  const privateCollegeTemplate = useSelector(selectPrivateCollegeCalendar);\n  const publicCollegeTemplate = useSelector(selectPublicCollegeCalendar);\n  const myCalendar = useSelector(selectUserCalendar);\n\n  const resourceGroupLabelContent = React.useCallback(\n    ({ groupValue: storyId }: ResourceContentProps) => {\n      if (!myCalendar) {\n        console.warn(\"cannot find selected myCalendar\");\n        return;\n      }\n\n      const myCalendarId = myCalendar.id;\n\n      if (!privateCollegeTemplate && !publicCollegeTemplate) {\n        console.warn(\"cannot find selected template calendar\");\n        return;\n      }\n\n      // story validation\n      const story = [\n        ...(privateCollegeTemplate?.stories ?? []),\n        ...(publicCollegeTemplate?.stories ?? []),\n      ].find((story) => story.id === storyId);\n      if (!story) {\n        console.warn(\"cannot find story\", storyId);\n        return;\n      }\n\n      // name handler\n      let name: string;\n      if (story.name) {\n        name = story.name;\n      } else {\n        console.warn(\"cannot find this story name\", storyId);\n        name = \"No Name\";\n      }\n\n      const updatedStory = updateStory(story, { calendarId: myCalendarId });\n\n      const clickHandle = createClickHandel({\n        calendarId: myCalendarId,\n        story: updatedStory,\n      });\n\n      return (\n        <span>\n          <i>{name}</i>\n          <br />\n\n          <ButtonContainer>\n            <Button\n              onClick={clickHandle}\n              variant=\"outlined\"\n              style={{ textTransform: \"none\" }}\n            >\n              Copy to my calendar\n            </Button>\n          </ButtonContainer>\n        </span>\n      );\n    },\n    [\n      myCalendar,\n      privateCollegeTemplate,\n      publicCollegeTemplate,\n      createClickHandel,\n    ]\n  );\n\n  return { resourceGroupLabelContent };\n};\n\nconst ButtonContainer = styled.div`\n  margin-left: 1rem;\n`;\n","import React from \"react\";\nimport { useModal } from \"./useModal\";\n\nexport const OPEN_OPTION_BUTTON = \"OPEN_OPTION_BUTTON\";\n\nexport const useTemplateCustomButtons = () => {\n  const { open, isOpen, close } = useModal();\n\n  const handleOpenOption = React.useCallback(() => {\n    open();\n  }, [open]);\n\n  const customButtons = React.useMemo(\n    () => ({\n      [OPEN_OPTION_BUTTON]: {\n        text: \"Change Options\",\n        click: handleOpenOption,\n      },\n    }),\n    [handleOpenOption]\n  );\n\n  return { customButtons, isOpen, close };\n};\n","import React from \"react\";\nimport { CalendarBaseContainer } from \"../atoms/CalendarBaseContainer\";\nimport { useResourceGroupLabelContentInTemplateCalendar } from \"../../hooks/useResourceGroupLabelContentInTemplateCalendar\";\nimport { useStory } from \"../../hooks/useStory\";\nimport { BaseStory } from \"../../core/story/BaseStory\";\nimport { OPEN_OPTION_BUTTON } from \"../../hooks/useTemplateCustomButtons\";\n\nconst configs = {\n  selectable: false,\n  editable: false,\n  resourcesInitiallyExpanded: false,\n} as const;\n\nconst headerToolbar = {\n  left: `${OPEN_OPTION_BUTTON}`,\n  center: \"title\",\n  right: \"prev,next\",\n} as const;\n\nexport function CollegeCalendarBase(props: any) {\n  const { create: createStory } = useStory();\n\n  const createClickHandel = React.useCallback(\n    ({ story, calendarId }: { story: BaseStory; calendarId: string }) => () => {\n      if (!window.confirm(\"Do you copy this story to My Calendar?\")) return;\n      createStory({ calendarId }, story);\n    },\n    [createStory]\n  );\n\n  const {\n    resourceGroupLabelContent,\n  } = useResourceGroupLabelContentInTemplateCalendar({ createClickHandel });\n\n  return (\n    <CalendarBaseContainer\n      {...props}\n      initialDate={\"2020-06-01\"}\n      resourceGroupLabelContent={resourceGroupLabelContent}\n      headerToolbar={headerToolbar}\n      {...configs}\n    />\n  );\n}\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { BaseEvent } from \"../core/event/BaseEvent\";\nimport { BaseResource } from \"../core/resource/BaseResource\";\nimport { TemplateOption } from \"../core/calendar/BaseCalendar\";\nimport {\n  upsertPrivateCollegeStoriesAction,\n  selectPrivateCollegeCalendar,\n} from \"../redux/features/templateCalendarTable\";\n\nexport const usePrivateCollegeCalendar = () => {\n  const dispatch = useDispatch();\n  const generate = React.useCallback(\n    ({\n      birth,\n      canWorkingholiday,\n      options,\n    }: {\n      birth: string;\n      canWorkingholiday: boolean;\n      options: TemplateOption;\n    }) => {\n      dispatch(\n        upsertPrivateCollegeStoriesAction({ birth, canWorkingholiday, options })\n      );\n    },\n    [dispatch]\n  );\n\n  const calendar = useSelector(selectPrivateCollegeCalendar);\n\n  const stories = React.useMemo(() => calendar?.stories ?? [], [calendar]);\n\n  const resources = React.useMemo(\n    () =>\n      stories.reduce<BaseResource[]>(\n        (prev, story) => [...prev, ...story.resources],\n        []\n      ),\n    [stories]\n  );\n\n  const events = React.useMemo(\n    () =>\n      stories.reduce<BaseEvent[]>(\n        (prev, story) => [...prev, ...story.events],\n        [] as any[]\n      ),\n    [stories]\n  );\n\n  return { stories, generate, resources, events } as const;\n};\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { updateBirthdayAction, selectUser } from \"../redux/features/user\";\n\nexport const useUser = () => {\n  const dispatch = useDispatch();\n\n  const setBirth = React.useCallback(\n    (birth: string) => dispatch(updateBirthdayAction({ birthday: birth })),\n    [dispatch]\n  );\n\n  const { birthday, age } = useSelector(selectUser);\n\n  return {\n    birth: birthday,\n    age,\n    setBirth,\n  } as const;\n};\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  selectTemplateOption,\n  selectWithWorkingholiday,\n  updateAction,\n} from \"../redux/features/templateOption\";\nimport { TemplateOption } from \"../core/calendar/BaseCalendar\";\n\nexport const useTemplateOptions = () => {\n  const dispatch = useDispatch();\n\n  const options = useSelector(selectTemplateOption);\n  const withWorkingholiday = useSelector(selectWithWorkingholiday);\n\n  const update = React.useCallback(\n    (params: Partial<TemplateOption>) => {\n      const newTemplateOption = { ...options, ...params };\n      dispatch(updateAction(newTemplateOption));\n    },\n    [dispatch, options]\n  );\n\n  return { options, update, withWorkingholiday } as const;\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport { useTemplateOptions } from \"../../hooks/useTemplateOptions\";\n\nconst MONTHS = [\n  \"Jan\",\n  \"Feb\",\n  \"Mar\",\n  \"Apr\",\n  \"May\",\n  \"Jun\",\n  \"Jul\",\n  \"Aug\",\n  \"Sep\",\n  \"Oct\",\n  \"Nov\",\n  \"Dec\",\n] as const;\n\n// TODO: Use react-hook-form because of reducing render cost\nexport function TemplateOptionContent() {\n  const { update: updateOption, options } = useTemplateOptions();\n  const {\n    schoolPeriod,\n    coopPeriod,\n    monthsOfStartSchool,\n    pgwpPeriod,\n    workingholidayPeriod,\n  } = options;\n\n  const handleChangeSchoolPeriod = React.useCallback(\n    (_event) => {\n      const value = _event.target.value;\n      const maybeNum = value === \"\" ? 0 : parseInt(value);\n      if (!Number.isInteger(maybeNum)) return;\n      updateOption({ schoolPeriod: maybeNum });\n    },\n    [updateOption]\n  );\n\n  const handleChangeCoopPeriod = React.useCallback(\n    (_event) => {\n      const value = _event.target.value;\n      const maybeNum = value === \"\" ? 0 : parseInt(value);\n      if (!Number.isInteger(maybeNum)) return;\n      updateOption({ coopPeriod: maybeNum });\n    },\n    [updateOption]\n  );\n\n  const handleChangePgwpPeriod = React.useCallback(\n    (_event) => {\n      const value = _event.target.value;\n      const maybeNum = value === \"\" ? 0 : parseInt(value);\n      if (!Number.isInteger(maybeNum)) return;\n      updateOption({ pgwpPeriod: maybeNum });\n    },\n    [updateOption]\n  );\n\n  const handleChangeWorkingholidayPeriod = React.useCallback(\n    (_event) => {\n      const value = _event.target.value;\n      const maybeNum = value === \"\" ? 0 : parseInt(value);\n      if (!Number.isInteger(maybeNum)) return;\n      updateOption({ workingholidayPeriod: maybeNum });\n    },\n    [updateOption]\n  );\n\n  const handleCheck = React.useCallback(\n    (_event) => {\n      const month = parseInt(_event.target.value);\n      const newMonthsOfStartSchool = monthsOfStartSchool.includes(month)\n        ? monthsOfStartSchool.filter((_month) => _month !== month)\n        : [...monthsOfStartSchool, month].sort((a, b) => a - b);\n      updateOption({ monthsOfStartSchool: newMonthsOfStartSchool });\n    },\n    [updateOption, monthsOfStartSchool]\n  );\n\n  return (\n    <Container>\n      <PeriodContainer>\n        <TextField\n          value={schoolPeriod}\n          onChange={handleChangeSchoolPeriod}\n          label=\"School Period\"\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">Month</InputAdornment>,\n          }}\n        />\n        <TextField\n          value={coopPeriod}\n          onChange={handleChangeCoopPeriod}\n          label=\"Co-op Period\"\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">Month</InputAdornment>,\n          }}\n        />\n        <TextField\n          value={pgwpPeriod}\n          onChange={handleChangePgwpPeriod}\n          label=\"PWGP Period\"\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">Month</InputAdornment>,\n          }}\n        />\n        <TextField\n          value={workingholidayPeriod}\n          onChange={handleChangeWorkingholidayPeriod}\n          label=\"Working Holiday Period\"\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">Month</InputAdornment>,\n          }}\n        />\n      </PeriodContainer>\n\n      <div>\n        <label>School start from (Month)</label>\n        <div>\n          {MONTHS.map((month, idx) => {\n            const monthNum = idx + 1;\n            const isChecked = monthsOfStartSchool.includes(monthNum);\n            return (\n              <CheckboxListItem key={month}>\n                <label>{month}</label>\n                <Checkbox\n                  value={monthNum}\n                  checked={isChecked}\n                  onChange={handleCheck}\n                />\n              </CheckboxListItem>\n            );\n          })}\n        </div>\n      </div>\n    </Container>\n  );\n}\n\nconst Container = styled.div``;\n\nconst CheckboxListItem = styled.div`\n  display: inline-block;\n  margin-right: 1rem;\n`;\n\nconst PeriodContainer = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  gap: 2rem;\n  margin-bottom: 1rem;\n`;\n","import React from \"react\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport { TemplateOptionContent } from \"./TemplateOptionContent\";\n\ntype Props = {\n  isOpen: boolean;\n  onClose: () => void;\n};\n\nexport function TemplateOptionModal({ onClose, isOpen }: Props) {\n  return (\n    <Dialog onClose={onClose} open={isOpen}>\n      <DialogTitle>Template Option</DialogTitle>\n      <DialogContent>\n        <TemplateOptionContent />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Close</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React from \"react\";\nimport { CollegeCalendarBase } from \"../molecules/CollegeCalendarBase\";\nimport { usePrivateCollegeCalendar } from \"../../hooks/usePrivateCollegeCalendar\";\nimport { useUser } from \"../../hooks/useUser\";\nimport { useTemplateOptions } from \"../../hooks/useTemplateOptions\";\nimport { useTemplateCustomButtons } from \"../../hooks/useTemplateCustomButtons\";\nimport { TemplateOptionModal } from \"../molecules/TemplateOptionModal\";\n\nexport function PrivateCollegeCalendar() {\n  const { birth } = useUser();\n  const { resources, events, generate } = usePrivateCollegeCalendar();\n  const { options, withWorkingholiday } = useTemplateOptions();\n  const { customButtons, close, isOpen } = useTemplateCustomButtons();\n\n  // TODO: prevent re-rendering when to select tab again\n  React.useEffect(() => {\n    generate({ birth, canWorkingholiday: withWorkingholiday, options });\n  }, [generate, birth, withWorkingholiday, options]);\n\n  return (\n    <>\n      <CollegeCalendarBase\n        events={events}\n        resources={resources}\n        customButtons={customButtons}\n      />\n      <TemplateOptionModal onClose={close} isOpen={isOpen} />\n    </>\n  );\n}\n","import React from \"react\";\nimport { CollegeCalendarBase } from \"../molecules/CollegeCalendarBase\";\nimport { usePublicCollegeCalendar } from \"../../hooks/usePublicCollegeCalendar\";\nimport { useUser } from \"../../hooks/useUser\";\nimport { useTemplateOptions } from \"../../hooks/useTemplateOptions\";\nimport { useTemplateCustomButtons } from \"../../hooks/useTemplateCustomButtons\";\nimport { TemplateOptionModal } from \"../molecules/TemplateOptionModal\";\n\nexport function PublicCollegeCalendar() {\n  const { birth } = useUser();\n  const { resources, events, generate } = usePublicCollegeCalendar();\n  const { options, withWorkingholiday } = useTemplateOptions();\n  const { customButtons, close, isOpen } = useTemplateCustomButtons();\n\n  // TODO: prevent re-rendering when to select tab again\n  React.useEffect(() => {\n    generate({ birth, canWorkingholiday: withWorkingholiday, options });\n  }, [generate, birth, withWorkingholiday, options]);\n\n  return (\n    <>\n      <CollegeCalendarBase\n        events={events}\n        resources={resources}\n        customButtons={customButtons}\n      />\n      <TemplateOptionModal onClose={close} isOpen={isOpen} />\n    </>\n  );\n}\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { BaseEvent } from \"../core/event/BaseEvent\";\nimport { BaseResource } from \"../core/resource/BaseResource\";\nimport { TemplateOption } from \"../core/calendar/BaseCalendar\";\nimport {\n  upsertPublicCollegeStoriesAction,\n  selectPublicCollegeCalendar,\n} from \"../redux/features/templateCalendarTable\";\n\nexport const usePublicCollegeCalendar = () => {\n  const dispatch = useDispatch();\n  const generate = React.useCallback(\n    (args: {\n      birth: string;\n      canWorkingholiday: boolean;\n      options: TemplateOption;\n    }) => {\n      dispatch(upsertPublicCollegeStoriesAction(args));\n    },\n    [dispatch]\n  );\n\n  const calendar = useSelector(selectPublicCollegeCalendar);\n\n  const stories = React.useMemo(() => calendar?.stories ?? [], [calendar]);\n\n  const resources = React.useMemo(\n    () =>\n      stories.reduce<BaseResource[]>(\n        (prev, story) => [...prev, ...story.resources],\n        []\n      ),\n    [stories]\n  );\n\n  const events = React.useMemo(\n    () =>\n      stories.reduce<BaseEvent[]>(\n        (prev, story) => [...prev, ...story.events],\n        [] as any[]\n      ),\n    [stories]\n  );\n\n  return { stories, generate, resources, events } as const;\n};\n","import React, { PropsWithChildren } from \"react\";\nimport styled from \"styled-components\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Box from \"@material-ui/core/Box\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { PrivateCollegeCalendar } from \"../organisms/PrivateCollegeCalendar\";\nimport { PublicCollegeCalendar } from \"../organisms/PublicCollegeCalendar\";\n\nfunction TabPanel({\n  shouldShow,\n  children,\n}: PropsWithChildren<{\n  shouldShow: boolean;\n}>) {\n  return (\n    <div role=\"tabpanel\" style={{ display: shouldShow ? \"block\" : \"none\" }}>\n      <Box p={3}>{children}</Box>\n    </div>\n  );\n}\n\nexport function CollegeCalendarSection() {\n  const [selectedIdx, setSelectedIdx] = React.useState(0);\n\n  const handleChange = React.useCallback((_event, newValue) => {\n    setSelectedIdx(newValue);\n  }, []);\n\n  return (\n    <Box>\n      <Paper elevation={8}>\n        <PaperHeader>\n          <Title>Templates</Title>\n        </PaperHeader>\n        <Divider />\n        <Tabs\n          value={selectedIdx}\n          onChange={handleChange}\n          textColor=\"primary\"\n          indicatorColor=\"primary\"\n        >\n          <Tab\n            icon={<Icon></Icon>}\n            label=\"Private College\"\n            style={{ textTransform: \"none\" }}\n          />\n          <Tab\n            icon={<Icon></Icon>}\n            label=\"Public College\"\n            style={{ textTransform: \"none\" }}\n          />\n        </Tabs>\n        <TabPanel shouldShow={selectedIdx === 0}>\n          <PrivateCollegeCalendar />\n        </TabPanel>\n        <TabPanel shouldShow={selectedIdx === 1}>\n          <PublicCollegeCalendar />\n        </TabPanel>\n      </Paper>\n    </Box>\n  );\n}\n\nconst PaperHeader = styled.div`\n  padding: 2rem;\n`;\n\nconst Title = styled.span`\n  font-size: 2rem;\n  font-weight: 900;\n  margin-right: 1rem;\n`;\n\nconst Icon = styled.span`\n  font-size: 2rem;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Button from \"@material-ui/core/Button\";\nimport { useUserCalendar } from \"../../hooks/useUserCalendar\";\nimport { useUser } from \"../../hooks/useUser\";\nimport { useTemplateOptions } from \"../../hooks/useTemplateOptions\";\n\nexport function EmptyCalendar() {\n  const { init: initUserCalendar } = useUserCalendar();\n  const { birth } = useUser();\n  const { options } = useTemplateOptions();\n  const workingholidayPeriod = React.useMemo(\n    () => options.workingholidayPeriod,\n    [options.workingholidayPeriod]\n  );\n\n  // TODO: open modal and start setting birthday\n  const handleCreate = React.useCallback(() => {\n    if (!birth) return;\n    initUserCalendar({ birthday: birth, workingholidayPeriod });\n  }, [initUserCalendar, birth, workingholidayPeriod]);\n\n  return (\n    <Container>\n      <Button onClick={handleCreate} variant=\"contained\" color=\"primary\">\n        Create Calendar\n      </Button>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  height: 50vh;\n  display: grid;\n  place-items: center;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { UserCalendarSection } from \"./UserCalendarSection\";\nimport { CollegeCalendarSection } from \"./CollegeCalendarSection\";\nimport { EmptyCalendar } from \"../molecules/EmptyCalendar\";\nimport { useUserCalendar } from \"../../hooks/useUserCalendar\";\n\nexport function CalendarPageContent() {\n  const { calendar } = useUserCalendar();\n  const existsCalendar = !!calendar;\n  return (\n    <div>\n      {existsCalendar ? (\n        <InnerContainer>\n          <UserCalendarSection />\n          <CollegeCalendarSection />\n        </InnerContainer>\n      ) : (\n        <EmptyCalendar />\n      )}\n    </div>\n  );\n}\n\nconst InnerContainer = styled.div`\n  display: grid;\n  gap: 3rem;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nexport function PolicyExplanation() {\n  return (\n    <Text>\n      Plangoab use local state. When you accept Plangoab to access to local\n      data, please click button.\n    </Text>\n  );\n}\n\nconst Text = styled.div`\n  font-size: 0.7rem;\n  color: gray;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport { useTemplateOptions } from \"../../hooks/useTemplateOptions\";\n\n// TODO: Use react-hook-form because of reducing render cost\n// TODO: rename AdvancedOptions\nexport function AdvancedOptions() {\n  const [opens, toggle] = React.useReducer((state) => !state, false);\n  const { update: updateOption, options } = useTemplateOptions();\n  const { workingholidayPeriod } = options;\n\n  const handleChangeWorkingholidayPeriod = React.useCallback(\n    (_event) => {\n      const value = _event.target.value;\n      const maybeNum = value === \"\" ? 0 : parseInt(value);\n      if (!Number.isInteger(maybeNum)) return;\n      updateOption({ workingholidayPeriod: maybeNum });\n    },\n    [updateOption]\n  );\n\n  return (\n    <Container>\n      <Button\n        onClick={toggle}\n        size=\"small\"\n        style={{ textTransform: \"none\", color: \"gray\" }}\n      >\n        Advanced Options\n      </Button>\n      {opens && (\n        <TextField\n          value={workingholidayPeriod}\n          onChange={handleChangeWorkingholidayPeriod}\n          label=\"Working Holiday Period\"\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">Month</InputAdornment>,\n          }}\n        />\n      )}\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  display: grid;\n  gap: 1rem;\n  padding: 2rem;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Button from \"@material-ui/core/Button\";\nimport { DatePicker } from \"@material-ui/pickers\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport { PolicyExplanation } from \"../atoms/PolicyExplanation\";\nimport { useModal } from \"../../hooks/useModal\";\nimport { useUserCalendar } from \"../../hooks/useUserCalendar\";\nimport { useUser } from \"../../hooks/useUser\";\nimport { AdvancedOptions } from \"./AdvancedOptions\";\nimport { useTemplateOptions } from \"../../hooks/useTemplateOptions\";\n\nexport function WelcomeModal() {\n  const { calendar } = useUserCalendar();\n  const shouldSkipIntroFlow = !!calendar;\n  const { isOpen, close } = useModal(!shouldSkipIntroFlow);\n  const { init: initUserCalendar } = useUserCalendar();\n  const { birth, setBirth } = useUser();\n  const { options } = useTemplateOptions();\n  const workingholidayPeriod = React.useMemo(\n    () => options.workingholidayPeriod,\n    [options.workingholidayPeriod]\n  );\n\n  const handleFinish = React.useCallback(() => {\n    initUserCalendar({ birthday: birth, workingholidayPeriod });\n    close();\n  }, [close, initUserCalendar, birth, workingholidayPeriod]);\n\n  const handleDateChange = React.useCallback(\n    (date: Date | null) => {\n      if (!date) return;\n      setBirth(date.toISOString());\n    },\n    [setBirth]\n  );\n\n  return (\n    <Dialog open={isOpen}>\n      <DialogTitle>\n        <Title>Welcome to Plangoab</Title>\n      </DialogTitle>\n      <DialogContent>\n        <p>\n          hi \n          <br />\n          <br />\n          Plangoab helps you to create awesome plan to go abroad!\n          <br />\n          <br />\n          Let's input your birthday and create your plans\n        </p>\n        <InputContainer>\n          <Avatar alt=\"you\" />\n          <DatePicker\n            disableFuture\n            openTo=\"year\"\n            format=\"yyyy-MM-dd\"\n            label=\"Date of birth\"\n            views={[\"year\", \"month\", \"date\"]}\n            value={birth}\n            onChange={handleDateChange}\n          />\n        </InputContainer>\n        <ButtonsContainer>\n          <Button\n            onClick={handleFinish}\n            variant=\"contained\"\n            color=\"primary\"\n            style={{ textTransform: \"none\" }}\n          >\n            Create Calendar\n          </Button>\n          <AdvancedOptions />\n        </ButtonsContainer>\n      </DialogContent>\n      <Divider />\n      <DialogActions>\n        <PolicyExplanation />\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nconst Title = styled.span`\n  font-weight: 900;\n`;\n\nconst InputContainer = styled.div`\n  display: flex;\n  gap: 1rem;\n  padding: 2rem;\n`;\n\nconst ButtonsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Footer } from \"../molecules/Footer\";\nimport { Header } from \"../molecules/Header\";\nimport { CalendarPageContent } from \"../templates/CalendarPageContent\";\nimport { WelcomeModal } from \"../organisms/WelcomeModal\";\n\nexport function CalendarPage() {\n  return (\n    <>\n      <Container>\n        <Header />\n        <ContentContainer>\n          <CalendarPageContent />\n        </ContentContainer>\n        <Footer />\n      </Container>\n\n      {/* Modal */}\n      <WelcomeModal />\n    </>\n  );\n}\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n`;\n\nconst ContentContainer = styled.div`\n  padding: 0 3rem;\n  display: grid;\n  gap: 5rem;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Button from \"@material-ui/core/Button\";\nimport { LogoImage } from \"../atoms/LogoImage\";\nimport { useResetAllData } from \"../../hooks/useResetAllData\";\n\nexport function ErrorPage() {\n  const { reset } = useResetAllData();\n\n  const handleResetAllData = React.useCallback(() => {\n    if (!window.confirm(\"Would you remove all data in Plangoab?\")) return;\n    reset();\n  }, [reset]);\n\n  return (\n    <Container>\n      <LogoContainer>\n        <LogoImage />\n      </LogoContainer>\n      <div>\n        Sorry\n        <br />\n        Something Error Happened\n        <br />\n      </div>\n      <div>\n        <Button\n          onClick={handleResetAllData}\n          variant=\"contained\"\n          color=\"secondary\"\n        >\n          Reset data\n        </Button>\n        <div>Reset and plese reload.</div>\n      </div>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  height: 100vh;\n  display: grid;\n  place-items: center;\n  align-content: center;\n  gap: 2rem;\n`;\n\nconst LogoContainer = styled.div`\n  width: 10rem;\n  height: 10rem;\n`;\n","import React from \"react\";\nimport { ErrorPage } from \"./components/pages/ErrorPage\";\n\nexport class ErrorBoundary extends React.Component<any, { hasError: boolean }> {\n  constructor(props: any) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error: any) {\n    console.error(\"getDerivedStateFromError:\", error);\n    return { hasError: true };\n  }\n\n  componentDidCatch(error: any, errorInfo: any) {\n    console.error(error);\n    console.error(errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorPage />;\n    }\n\n    return this.props.children;\n  }\n}\n","import React from \"react\";\nimport { MuiPickersUtilsProvider } from \"./providers/MuiPickersUtilsProvider\";\nimport { CalendarPage } from \"./components/pages/CalendarPage\";\nimport { ErrorBoundary } from \"./ErrorBoundary\";\nimport \"./reset.css\";\nimport \"./core.css\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <ErrorBoundary>\n        <MuiPickersUtilsProvider>\n          <CalendarPage />\n        </MuiPickersUtilsProvider>\n      </ErrorBoundary>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { combineReducers } from \"@reduxjs/toolkit\";\n\nimport userReducer from \"./features/user\";\nimport templateCalendarTableReducer from \"./features/templateCalendarTable\";\nimport templateOptionReducer from \"./features/templateOption\";\nimport userCalendarsReducer from \"./features/userCalendars\";\nimport eventModalReducer from \"./ui/eventModal\";\nimport storyModalReducer from \"./ui/storyModal\";\nimport stepReducer from \"./ui/step\";\nimport previewModalReducer from \"./ui/previewModal\";\n\nconst uiReducer = combineReducers({\n  storyModal: storyModalReducer,\n  eventModal: eventModalReducer,\n  step: stepReducer,\n  previewModal: previewModalReducer,\n});\n\nconst featuresReducer = combineReducers({\n  templateCalendar: templateCalendarTableReducer,\n  templateOption: templateOptionReducer,\n  userCalendars: userCalendarsReducer,\n  user: userReducer,\n});\n\nconst rootReducer = combineReducers({\n  features: featuresReducer,\n  ui: uiReducer,\n});\n\nexport type RootState = ReturnType<typeof rootReducer>;\n\nexport default rootReducer;\n","import { persistReducer } from \"redux-persist\";\nimport storage from \"redux-persist/lib/storage\"; // NOTE: localstorage for web\nimport rootReducer from \"../rootReducer\";\n\nconst persistConfig = {\n  key: \"root\",\n  version: 0,\n  storage,\n  whitelist: [\"features\", \"ui\"],\n};\n\nexport const persistedReducer = persistReducer(persistConfig, rootReducer);\n","import { configureStore, getDefaultMiddleware } from \"@reduxjs/toolkit\";\nimport { persistedReducer } from \"./store/persistedReducer\";\n\nconst store = configureStore({\n  reducer: persistedReducer,\n  middleware: getDefaultMiddleware({ serializableCheck: false }),\n});\n\nif (process.env.NODE_ENV === \"development\" && module.hot) {\n  module.hot.accept(\"./rootReducer\", () => {\n    const newRootReducer = require(\"./rootReducer\").default;\n    store.replaceReducer(newRootReducer);\n  });\n}\n\nexport type AppDispatch = typeof store.dispatch;\n\nexport default store;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { LogoImage } from \"../atoms/LogoImage\";\n\nexport function LoadingPage() {\n  return (\n    <Container>\n      <AppName />\n      <LogoContainer>\n        <LogoImage />\n      </LogoContainer>\n      <div>\n        <CircularProgress />\n      </div>\n    </Container>\n  );\n}\n\nconst AppName = () => <h2>Plangoab</h2>;\n\nconst Container = styled.div`\n  height: 100vh;\n  display: grid;\n  place-items: center;\n  align-content: center;\n  gap: 2rem;\n`;\n\nconst LogoContainer = styled.div`\n  width: 10rem;\n  height: 10rem;\n`;\n","import React, { PropsWithChildren } from \"react\";\nimport { Provider } from \"react-redux\";\nimport { persistStore } from \"redux-persist\";\nimport { PersistGate } from \"redux-persist/integration/react\";\nimport store from \"../redux/store\";\nimport {LoadingPage} from '../components/pages/LoadingPage'\n\nexport function ReactReduxProvider<T>({ children }: PropsWithChildren<T>) {\n\n  return (\n    <Provider store={store}>\n      <PersistProvider>\n        {children}\n      </PersistProvider>\n    </Provider>\n  );\n}\n\nfunction PersistProvider<T>({ children }: PropsWithChildren<T>) {\n  let persistor = persistStore(store);\n  return (\n    <PersistGate loading={<LoadingPage />} persistor={persistor}>\n      {children}\n    </PersistGate>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { ReactReduxProvider } from './providers/ReactReduxProvider'\n\nconst render = () => {\n  ReactDOM.render(\n    <React.StrictMode>\n      <ReactReduxProvider>\n        <App />\n      </ReactReduxProvider>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n  );\n};\n\nrender();\n\n// for redux\nif (process.env.NODE_ENV === \"development\" && module.hot) {\n  module.hot.accept(\"./App\", render);\n}\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.warn))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}