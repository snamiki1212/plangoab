{"version":3,"sources":["providers/MuiPickersUtilsProvider.tsx","redux/features/user.ts","lib/age.ts","hooks/useUser.tsx","components/organisms/ProfileCard.tsx","components/atoms/LogoImage.tsx","components/molecules/Footer.tsx","components/atoms/AboutModal.tsx","components/molecules/AboutContent.tsx","constants/meta.ts","hooks/useModal.tsx","components/molecules/Header.tsx","lib/uuid.ts","constants/fullcalendar/settings.ts","constants/fullcalendar/templates.ts","core/resource/createProfileResources.ts","lib/date.ts","core/event/createProfileEvents.ts","constants/visa.ts","core/event/BaseEvent.ts","redux/features/userCalendars.ts","hooks/useUserCalendar.ts","core/calendar/UserCalendar/createUserCalendar.ts","core/story/ProfileStory/createProfileStory.ts","constants/fullcalendar/options.ts","components/atoms/BaseFullCalendar.tsx","components/atoms/BaseCalendarContainer.tsx","hooks/useResourceGroupLabelContentInUserCalendar.tsx","redux/ui/storyModal.ts","redux/ui/eventModal.ts","hooks/useEvent.tsx","core/resource/BaseResource.ts","core/story/BaseStory.ts","hooks/useStory.tsx","hooks/useCustomButtons.tsx","components/molecules/StoryModal.tsx","hooks/useResource.tsx","components/molecules/EventModal.tsx","components/molecules/UserCalendarContainer.tsx","hooks/useStoryModal.tsx","hooks/useEventModal.tsx","components/molecules/UserCalendarCreater.tsx","components/organisms/UserCalendarArea.tsx","redux/features/templateOption.ts","hooks/useTemplateOptions.tsx","components/molecules/TemplateOptionCard.tsx","core/story/PrivateCollegeStory/createPrivateCollegeStory.ts","core/story/PublicCollegeStory/createPublicCollegeStory.ts","core/calendar/TemplateCalendar/createCalendar.ts","lib/util.ts","redux/features/templateCalendarTable.ts","components/molecules/BaseTemplate.tsx","hooks/useResourceGroupLabelContentInTemplateCalendar.tsx","components/templates/PrivateCollegeTemplate.tsx","hooks/usePrivateCollegeCalendar.tsx","components/templates/PublicCollegeTemplate.tsx","hooks/usePublicCollegeCalendar.tsx","components/templates/TemplateList.tsx","components/organisms/TemplateCalendarArea.tsx","components/pages/IntroFlow.tsx","components/pages/CalendarPage.tsx","components/pages/ErrorPage.tsx","ErrorBoundary.tsx","App.tsx","reportWebVitals.ts","redux/rootReducer.ts","redux/store.ts","providers/ReactReduxProvider.tsx","index.tsx"],"names":["MuiPickersUtilsProvider","children","utils","DateFnsUtils","personaBirth","addYears","Date","toISOString","userSlice","createSlice","name","initialState","birthday","age","canWorkingholiday","reducers","updateBirthday","state","action","payload","_birthday","today","birthDate","getFullYear","m","getMonth","getDate","calcAge","toggleWorkingholiday","_action","actions","updateBirthdayAction","toggleWorkingholidayAction","selectUser","features","user","useUser","dispatch","useDispatch","setBirth","React","useCallback","birth","useSelector","ProfileCard","handleDateChange","date","handleToggleWorkingholiday","Card","CardContent","InnerContainer","Avatar","alt","TextField","id","label","disabled","InputProps","readOnly","InputLabelProps","shrink","type","value","DatePicker","disableFuture","openTo","format","views","onChange","Checkbox","checked","styled","div","LogoImage","Img","src","img","Footer","Container","LogoText","LogoImageContainer","AboutModal","isOpen","onClose","Dialog","open","DialogTitle","DialogContent","dividers","AboutContent","href","useModal","init","useState","setIsOpen","close","toggle","prev","Header","Title","ButtonContainer","Button","variant","onClick","span","uuid","uuidV4","FIELD","NAME_OF_STORY_ID","NAME_OF_ORDER","PRIVATE_COLLEGE_CALENDAR_ID","PUBLIC_COLLEGE_CALENDAR_ID","RESOURCE_ID__SHARED__AGE","RESOURCE_ID__SHARED__LIMIT","DARK_BLUE","GREEN","YELLOW","RESOURCE_TEMPLATE__VISA_STUDY","RESOURCE_TEMPLATE__VISA_COOP","RESOURCE_TEMPLATE__VISA_WORKING_HOLIDAY","RESOURCE_TEMPLATE__VISA_PGWP","RESOURCE_TEMPLATE__STUDENT_STATUS","RESOURCE_TEMPLATE__WORKER_STATUS","EVENT_TEMPLATE__VISA_COOP","title","backgroundColor","EVENT_TEMPLATE__VISA_STUDY","EVENT_TEMPLATE__VISA_PGWP","EVENT_TEMPLATE__VISA_WORKING_HOLIDAY","EVENT_TEMPLATE__VISA_READY_WORKING_HOLIDAY","EVENT_TEMPLATE__STATUS_WORKER","eventBackgroundCoor","EVENT_TEMPLATE__STATUS_STATUS","createProfileResources","calendarId","storyId","convertIsoToDateTime","isoStr","split","convertIsoToYearAndMonth","replace","createProfileEvents","startDate","years","start","end","list","i","push","getRangeNumbers","getLastYear","workingHolidayLimitEvents","createWorkingHolidayLimitEvents","ageEventList","map","year","index","setFullYear","addMonths","resourceId","extendedProps","lastYearDate","endDate","endOfLimit","endOfApplication","setMonth","initEvent","props","_resourceId","_storyId","_title","_start","_end","rest","undefined","updateEvent","event","params","Object","assign","userCalendarsSlice","calendars","removeCalendar","filter","calendar","updateCalendars","pushResource","resource","calendarIdx","findIndex","console","warn","storyIdx","stories","story","resources","updateResources","newResources","removeResource","addStory","idx","removeStory","updateStory","newStory","addEvent","events","removeEvent","eventId","_event","newEvent","eventIdx","updateEventById","oldEvent","removeCalendarAction","updateCalendarsAction","pushResourceAction","removeResourceAction","addStoryAction","removeStoryAction","updateStoryAction","addEventAction","removeEventAction","updateEventAction","updateEventByIdAction","selectUserCalendar","userCalendars","useUserCalendar","_birth","createProfileStory","_calendar","select","info","startStr","endStr","remove","useMemo","flatMap","MY_TIME_LINE_NAME","initialView","resourceGroupField","duration","buttonText","resourceConfigs","resourceOrder","resourcesInitiallyExpanded","resourceAreaColumns","field","FULL_CALENDAR_CONFIGS","slotLabelFormat","month","schedulerLicenseKey","nowIndicator","height","BaseFullCalendar","plugins","interactionPlugin","resourceTimelinePlugin","listPlugin","BaseCalendarContainer","slice","_payload","pop","selectIsOpen","ui","storyModal","selectStoryModal","selectStory","_story","find","pushAction","popAction","eventModal","selectEventModal","selectEvent","useEvent","window","confirm","update","idSet","updateById","initResource","createStoryName","reduce","curr","newResource","useStory","data","create","_calendarId","initStory","ADD_STORY_BUTTON","REMOVE_CALENDAR_BUTTON","StoryModal","useForm","register","handleSubmit","createStory","_resources","lastResource","order","length","_order","_resource","useResource","handleRemoveStory","handleRemoveResource","handleAddResource","handleNewStory","onSubmit","DialogTitleInner","inputRef","defaultValue","fieldName","Fieldset","ref","color","AddResourceButtonContainer","UpdateButtonContainer","DialogActions","fieldset","EventModal","onRemove","onUpdate","headerToolbar","left","center","right","UserCalendarContainer","useStoryModal","pushStoryModal","popStoryModal","isOpenStoryModal","useEventModal","pushEventModal","popEventModal","isOpenEventModal","resourceGroupLabelContent","createOpenHandle","groupValue","openHandle","containerEl","document","createElement","style","display","justifyContent","nameElement","innerHTML","appendChild","buttonElement","onclick","domNodes","useResourceGroupLabelContentInUserCalendar","click","log","customButtons","removeUserCalendar","handleAddStory","handleRemoveCalendar","text","useCustomButtons","eventClick","selectable","editable","eventResize","eventDrop","initialDate","UserCalendarCreater","initUserCalendar","handleCreate","UserCalendarArea","existsCalendar","slices","option","schoolPeriod","coopPeriod","pgwpPeriod","workingholidayPeriod","monthsOfStartSchool","selectTemplateOption","templateOption","updateAction","useTemplateOptions","options","newTemplateOption","TemplateOptionCard","updateOption","handleChangeSchoolPeriod","target","maybeNum","parseInt","Number","isInteger","handleChangeCoopPeriod","handleChangePgwpPeriod","handleCheck","newMonthsOfStartSchool","includes","_month","sort","a","b","PeriodContainer","endAdornment","InputAdornment","position","Array","from","_","isChecked","CheckboxListItem","createPrivateCollegeStory","doCreateStory","coopVisaResourceId","studyVisaResourceId","workingholidayResourceId","dateAsStartWorkingHoliday","workerStatusResourceId","studentStatusResourceId","createPublicCollegeStory","pgwpVisaResourceId","scopeAges","stop","step","range","now","createStoryList","storyCreater","num","compareAsc","templateCalendarTable","upsertPrivateCollegeStories","createPrivateCollegeCalendar","upsertPublicCollegeStories","createPublicCollegeCalendar","upsertPrivateCollegeStoriesAction","upsertPublicCollegeStoriesAction","selectPrivateCollegeCalendar","templateCalendar","selectPublicCollegeCalendar","ableConfis","BaseTemplate","createClickHandel","privateCollegeTemplate","publicCollegeTemplate","myCalendar","myCalendarId","updatedStory","clickHandle","marginLeft","useResourceGroupLabelContentInTemplateCalendar","PrivateCollegeTemplate","generate","usePrivateCollegeCalendar","useEffect","PublicCollegeTemplate","args","usePublicCollegeCalendar","TabPanel","shouldShow","role","Box","p","TemplateList","selectedIdx","setSelectedIdx","handleChange","newValue","Tabs","Tab","TemplateHeader","TemplateCalendarArea","IntroFlow","handleFinish","CalendarPage","ContentContainer","ControllerContainer","TemplateContainer","ErrorPage","handleReset","LogoContainer","ErrorBoundary","hasError","error","errorInfo","this","Component","App","className","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","uiReducer","combineReducers","storyModalReducer","eventModalReducer","featuresReducer","templateCalendarTableReducer","templateOptionReducer","userCalendarsReducer","userReducer","rootReducer","store","configureStore","reducer","ReactReduxProvider","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c7ed11d0.chunk.js","sourcesContent":["import React, { PropsWithChildren } from \"react\";\nimport { MuiPickersUtilsProvider as RawMuiPickersUtilsProvider } from \"@material-ui/pickers\";\nimport DateFnsUtils from \"@date-io/date-fns\";\n\nexport function MuiPickersUtilsProvider<T>({ children }: PropsWithChildren<T>) {\n  return (\n    <RawMuiPickersUtilsProvider utils={DateFnsUtils}>\n      {children}\n    </RawMuiPickersUtilsProvider>\n  );\n}\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { calcAge } from \"../../lib/age\";\nimport { addYears } from \"date-fns\";\nimport { RootState } from \"../rootReducer\";\n\nconst PERSONA_AGE = 25;\nconst personaBirth = addYears(new Date(), -PERSONA_AGE).toISOString();\n\ntype UpdatePayload = {\n  birthday: string;\n};\n\nconst userSlice = createSlice({\n  name: \"user\",\n  initialState: {\n    birthday: personaBirth,\n    age: PERSONA_AGE,\n    canWorkingholiday: true,\n  },\n  reducers: {\n    updateBirthday(state, action: PayloadAction<UpdatePayload>) {\n      const { birthday } = action.payload;\n      state.birthday = birthday;\n      state.age = calcAge(birthday);\n    },\n    toggleWorkingholiday(state, _action: PayloadAction<undefined>) {\n      state.canWorkingholiday = !state.canWorkingholiday;\n    },\n  },\n});\n\nexport const {\n  updateBirthday: updateBirthdayAction,\n  toggleWorkingholiday: toggleWorkingholidayAction,\n} = userSlice.actions;\n\nexport default userSlice.reducer;\n\nexport const selectUser = (state: RootState) => state.features.user;\n","export const getRangeNumbers = (start: number, end: number) => {\n  let list = [] as number[];\n  for (let i = start; i <= end; i++) {\n    list.push(i);\n  }\n  return list;\n};\n\n// REF: https://stackoverflow.com/a/7091965/8842333\nexport const calcAge = (_birthday: string | Date) => {\n  const today = new Date();\n  const birthDate = new Date(_birthday);\n  let age = today.getFullYear() - birthDate.getFullYear();\n\n  const m = today.getMonth() - birthDate.getMonth();\n  if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\n    age--;\n  }\n  return age;\n};\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  updateBirthdayAction,\n  selectUser,\n  toggleWorkingholidayAction,\n} from \"../redux/features/user\";\n\nexport const useUser = () => {\n  const dispatch = useDispatch();\n\n  const setBirth = React.useCallback(\n    (birth: string) => dispatch(updateBirthdayAction({ birthday: birth })),\n    [dispatch]\n  );\n\n  const toggleWorkingholiday = React.useCallback(() => {\n    dispatch(toggleWorkingholidayAction());\n  }, [dispatch]);\n\n  const { birthday, age, canWorkingholiday } = useSelector(selectUser);\n\n  return {\n    birth: birthday,\n    age,\n    setBirth,\n    toggleWorkingholiday,\n    canWorkingholiday\n  } as const;\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { DatePicker } from \"@material-ui/pickers\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\n\nimport { useUser } from \"../../hooks/useUser\";\n\nexport function ProfileCard() {\n  const {\n    birth,\n    age,\n    setBirth,\n    toggleWorkingholiday,\n    canWorkingholiday,\n  } = useUser();\n\n  const handleDateChange = React.useCallback(\n    (date: Date | null) => {\n      if (!date) return;\n      setBirth(date.toISOString());\n    },\n    [setBirth]\n  );\n\n  const handleToggleWorkingholiday = React.useCallback(() => {\n    toggleWorkingholiday();\n  }, [toggleWorkingholiday]);\n\n  return (\n    <Card>\n      <CardContent>\n        <h2>Profile</h2>\n        <InnerContainer>\n          <Avatar alt=\"you\" />\n          <TextField\n            id=\"age-text\"\n            label=\"Your Age\"\n            disabled\n            InputProps={{\n              readOnly: true,\n            }}\n            InputLabelProps={{\n              shrink: true,\n            }}\n            type=\"number\"\n            value={age}\n          />\n          <DatePicker\n            disableFuture\n            openTo=\"year\"\n            format=\"yyyy-MM-dd\"\n            label=\"Date of birth\"\n            views={[\"year\", \"month\", \"date\"]}\n            value={birth}\n            onChange={handleDateChange}\n          />\n          <div>\n            <span>with working holiday(TODO: move to template options)</span>\n            <Checkbox\n              checked={canWorkingholiday}\n              onChange={handleToggleWorkingholiday}\n            />\n          </div>\n        </InnerContainer>\n      </CardContent>\n    </Card>\n  );\n}\n\nconst InnerContainer = styled.div`\n  display: flex;\n  gap: 1rem;\n  padding: 2rem;\n`;\n","import React from 'react'\nimport styled from 'styled-components';\n\nexport function LogoImage(){\n  return(\n    <Img src={process.env.PUBLIC_URL + '/logo457_transparent.png'} alt=\"img\" />\n  )\n}\n\nconst Img = styled.img`\n  display: inline-block;\n  height: 100%;\n  object-fit: contain;\n  background: white;\n  padding: .3rem;\n`","import React from \"react\";\nimport styled from \"styled-components\";\nimport { LogoImage } from \"../atoms/LogoImage\";\n\nexport function Footer() {\n  return (\n    <Container>\n      <LogoText>\n        <LogoImageContainer>\n          <LogoImage />\n        </LogoImageContainer>\n        <span>Plangoab</span>\n      </LogoText>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  padding: 5rem;\n  min-height: 30vh;\n  background: var(--main-color);\n  color: white;\n`;\n\nconst LogoImageContainer = styled.div`\n  height: 4rem;\n  width: 4rem;\n`;\n\nconst LogoText = styled.div`\n  display: flex;\n  color: white;\n  font-size: 4rem;\n`;\n","import React, {PropsWithChildren} from \"react\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\n\ntype Props = {\n  isOpen: boolean;\n  onClose: () => void;\n};\n\nexport function AboutModal({ isOpen, onClose, children }: PropsWithChildren<Props>) {\n  return (\n    <Dialog onClose={onClose} open={isOpen}>\n      <DialogTitle>About Plangoab</DialogTitle>\n      <DialogContent dividers={true}>\n        {children}\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport * as AuthorInfo from \"../../constants/meta\";\n\nexport function AboutContent() {\n  return (\n    <Container>\n      <div>\n        <h2>About</h2>\n        <p>\n          A web calendar for a person going abroad. Generating a suitable\n          schedule and customizable.\n        </p>\n      </div>\n\n      <div>\n        <h2>How to use</h2>\n        <p>\n          There are three sections.\n          <br />\n          <li>1. My calendar</li>\n          <li>2. Profile + Template Options</li>\n          <li>3. Template calendars</li>\n        </p>\n        <p>\n          <p>Instruction</p>\n          <li>\n            First, pick appropriate plans from a template calendar. Choose tab\n            and story in a template calendar and clicking \"Copy to my calendar\"\n            button.\n          </li>\n          <li>\n            And then stories are copied from a template calendar into my\n            calendar.\n          </li>\n          <li>Edit my story and events in my calendar.</li>\n        </p>\n      </div>\n\n      <div>\n        <h2>License</h2>\n        <li>GPL-3.0</li>\n      </div>\n\n      <div>\n        <h2>Author</h2>\n        <li>\n          <a href={AuthorInfo.MY_GITHUB_URL}>GitHub:snamiki1212</a>\n        </li>\n        <li>\n          <a href={AuthorInfo.MY_TWITTER_URL}>Twitter:snamiki1212</a>\n        </li>\n        <li>\n          <a href={AuthorInfo.MY_PORTFOLIO}>Portfolio</a>\n        </li>\n      </div>\n\n      <div>\n        <h2>Source</h2>\n        <span>\n          This page is managed at{\" \"}\n          <a href={AuthorInfo.THIS_GITHUB_URL}>GitHub</a>.\n        </span>\n      </div>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  display: grid;\n  gap: 2rem;\n`;\n","export const THIS_GITHUB_URL = \"https://github.com/snamiki1212/plangoab\";\nexport const MY_GITHUB_URL = \"https://github.com/snamiki1212\";\nexport const MY_TWITTER_URL = \"https://twitter.com/snamiki1212\";\nexport const MY_PORTFOLIO = \"https://snamiki1212.github.io\";\n","import React from'react';\n\nexport const useModal = (init?: boolean) => {\n  const [isOpen, setIsOpen] = React.useState(!!init)\n\n  const open = React.useCallback(() => {\n    setIsOpen(true);\n  }, []);\n\n  const close = React.useCallback(() => {\n    setIsOpen(false);\n  }, []);\n\n  const toggle = React.useCallback(() => {\n    setIsOpen(prev => !prev)\n  }, []);\n\n  return {isOpen, open, close, toggle}\n}","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport styled from \"styled-components\";\nimport { AboutModal } from \"../atoms/AboutModal\";\nimport { LogoImage } from \"../atoms/LogoImage\";\nimport { AboutContent } from \"./AboutContent\";\nimport { useModal } from \"../../hooks/useModal\";\n\nexport function Header() {\n  const { isOpen, open, close } = useModal();\n\n  return (\n    <>\n      <Container>\n        <LogoImage />\n        <Title>Plangoab</Title>\n        <ButtonContainer>\n          <Button variant=\"contained\" onClick={open}>About Plangoab</Button>\n        </ButtonContainer>\n      </Container>\n\n      {/* Modal */}\n      <AboutModal isOpen={isOpen} onClose={close}>\n        <AboutContent />\n      </AboutModal>\n    </>\n  );\n}\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  height: 6rem;\n  background: var(--main-color);\n  padding: 1rem;\n`;\n\nconst Title = styled.span`\n  color: white;\n  font-size: 3rem;\n  padding: 1rem;\n`;\n\nconst ButtonContainer = styled.div`\n  margin-left: auto;\n`;\n","import { v4 as uuidV4 } from \"uuid\";\n\nexport function uuid() {\n  return uuidV4();\n}\n","// field name\nexport const FIELD = \"FIELD\";\n\n// keys\nexport const NAME_OF_STORY_ID = \"storyId\";\nexport const NAME_OF_ORDER = \"order\";\nexport const RESOURCE_NAME_KEY = \"RESOURCE_NAME_KEY\";\n\n// calendar ID\nexport const PRIVATE_COLLEGE_CALENDAR_ID = \"PRIVATE_COLLEGE_CALENDAR_ID\";\nexport const PUBLIC_COLLEGE_CALENDAR_ID = \"PUBLIC_COLLEGE_CALENDAR_ID\";\n\n// story ID\nexport const PROFILE_ID = \"PROFILE_ID\";\n\n// resouce ID\nexport const RESOURCE_ID__SHARED__AGE = \"RESOURCE_ID__SHARED__AGE\";\nexport const RESOURCE_ID__SHARED__LIMIT = \"RESOURCE_ID__SHARED__LIMIT\";\nexport const RESOURCE_ID__VISA__STUDY = \"RESOURCE_ID__VISA__STUDY\";\nexport const RESOURCE_ID__VISA__COOP = \"RESOURCE_ID__VISA__COOP\";\nexport const RESOURCE_ID__VISA__WORKING_HOLIDAY =\n  \"RESOURCE_ID__VISA__WORKING_HOLIDAY\";\nexport const RESOURCE_ID__STATUS__WORKER = \"RESOURCE_ID__STATUS__WORKER\";\nexport const RESOURCE_ID__STATUS__STUDENT = \"RESOURCE_ID__STATUS__STUDENT\";\nexport const RESOURCE_ID__ETC__CUSTOM = \"RESOURCE_ID__ETC__CUSTOM\";\nexport type RESOURCE_ID =\n  | typeof RESOURCE_ID__SHARED__AGE\n  | typeof RESOURCE_ID__SHARED__LIMIT\n  | typeof RESOURCE_ID__VISA__STUDY\n  | typeof RESOURCE_ID__VISA__COOP\n  | typeof RESOURCE_ID__VISA__WORKING_HOLIDAY\n  | typeof RESOURCE_ID__STATUS__WORKER\n  | typeof RESOURCE_ID__STATUS__STUDENT\n  | typeof RESOURCE_ID__ETC__CUSTOM;\n","import { FIELD } from \"./settings\";\n\nexport const DARK_BLUE = \"#00008b\";\nconst GREEN = \"#8fbc8b\";\nconst YELLOW = \"#ffd700\";\nconst RED = \"#e73758\";\n\nexport const RESOURCE_TEMPLATE__VISA_STUDY = {\n  [FIELD]: \"Study VISA\",\n  eventBorderColor: DARK_BLUE,\n};\n\nexport const RESOURCE_TEMPLATE__VISA_COOP = {\n  [FIELD]: \"Co-op VISA\",\n  eventBorderColor: DARK_BLUE,\n};\n\nexport const RESOURCE_TEMPLATE__VISA_WORKING_HOLIDAY = {\n  [FIELD]: \"Working Holiday VISA\",\n  eventBorderColor: DARK_BLUE,\n};\n\nexport const RESOURCE_TEMPLATE__VISA_PGWP = {\n  [FIELD]: \"PGWP VISA\",\n  eventBorderColor: DARK_BLUE,\n};\n\nexport const RESOURCE_TEMPLATE__STUDENT_STATUS = {\n  [FIELD]: \"Student\",\n  eventBorderColor: DARK_BLUE,\n};\n\nexport const RESOURCE_TEMPLATE__WORKER_STATUS = {\n  [FIELD]: \"Worker\",\n  eventBorderColor: DARK_BLUE,\n};\n\nexport const EVENT_TEMPLATE__VISA_COOP = {\n  title: \"Co-op VISA\",\n  backgroundColor: GREEN,\n};\n\nexport const EVENT_TEMPLATE__VISA_STUDY = {\n  title: \"Study VISA\",\n  backgroundColor: GREEN,\n};\n\nexport const EVENT_TEMPLATE__VISA_PGWP = {\n  title: \"PGWP VISA\",\n  backgroundColor: GREEN,\n};\n\nexport const EVENT_TEMPLATE__VISA_WORKING_HOLIDAY = {\n  title: \"Working Holiday VISA\",\n  backgroundColor: GREEN,\n};\n\nexport const EVENT_TEMPLATE__VISA_READY_WORKING_HOLIDAY = {\n  title: \"Ready for Working Holiday VISA\",\n  backgroundColor: RED,\n};\n\nexport const EVENT_TEMPLATE__STATUS_WORKER = {\n  title: \"Status: Worker\",\n  eventBackgroundCoor: YELLOW,\n};\n\nexport const EVENT_TEMPLATE__STATUS_STATUS = {\n  title: \"Status: Student\",\n  eventBackgroundCoor: YELLOW,\n};\n","import { DARK_BLUE } from \"../../constants/fullcalendar/templates\";\nimport {\n  FIELD,\n  NAME_OF_STORY_ID,\n  NAME_OF_ORDER,\n} from \"../../constants/fullcalendar/settings\";\nimport {\n  // PROFILE_ID,\n  RESOURCE_ID__SHARED__AGE,\n  RESOURCE_ID__SHARED__LIMIT,\n} from \"../../constants/fullcalendar/settings\";\nimport { BaseResource } from \"./BaseResource\";\n\nexport const createProfileResources = ({\n  calendarId,\n  storyId,\n}: {\n  calendarId: string;\n  storyId: string;\n}): BaseResource[] => [\n  {\n    id: RESOURCE_ID__SHARED__AGE,\n    [FIELD]: \"Age\",\n    [NAME_OF_STORY_ID]: storyId,\n    [NAME_OF_ORDER]: 0,\n    calendarId,\n    eventBorderColor: DARK_BLUE,\n  },\n  {\n    id: RESOURCE_ID__SHARED__LIMIT,\n    [FIELD]: \"Working Holiday\",\n    [NAME_OF_STORY_ID]: storyId,\n    [NAME_OF_ORDER]: 1,\n    calendarId,\n    eventBorderColor: DARK_BLUE,\n  },\n];\n","export const convertIsoToDateTime = (isoStr: string | Date) => {\n  if (typeof isoStr !== \"string\") {\n    isoStr = isoStr.toISOString();\n  }\n  return isoStr.split(\"T\")[0];\n};\n\nexport const convertIsoToYearAndMonth = (isoStr: string | Date) => {\n  if (typeof isoStr !== \"string\") {\n    isoStr = isoStr.toISOString();\n  }\n  return convertIsoToDateTime(isoStr).replace(/-[0-9][0-9]$/, \"\");\n};\n","import { addMonths, addYears, setMonth } from \"date-fns\";\n\nimport {\n  RESOURCE_ID__SHARED__AGE,\n  RESOURCE_ID__SHARED__LIMIT,\n} from \"../../constants/fullcalendar/settings\";\nimport { getRangeNumbers } from \"../../lib/age\";\nimport { uuid } from \"../../lib/uuid\";\nimport { convertIsoToDateTime } from \"../../lib/date\";\nimport { WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE } from \"../../constants/visa\";\nimport { BaseEvent } from \"../event/BaseEvent\";\n\nexport const createProfileEvents = ({\n  startDate,\n  storyId,\n  calendarId,\n}: {\n  startDate: Date;\n  storyId: string;\n  calendarId: string;\n}): BaseEvent[] => {\n  // get year num\n  const startYear = new Date(startDate).getFullYear();\n  const endYear = getLastYear();\n\n  // create years list\n  const years = getRangeNumbers(startYear, endYear);\n\n  const workingHolidayLimitEvents = createWorkingHolidayLimitEvents(\n    startDate,\n    storyId,\n    calendarId\n  );\n\n  // create EventInput obj\n  const ageEventList = years.map((year, index) => {\n    const start = (() => {\n      startDate.setFullYear(year);\n      const isoStr = startDate.toISOString();\n      const str = convertIsoToDateTime(isoStr);\n      return str;\n    })();\n\n    const isoStr = addMonths(new Date(start), +11).toISOString();\n    const end = convertIsoToDateTime(isoStr);\n\n    return {\n      id: uuid(),\n      title: `Aage:${index}`,\n      start,\n      end,\n      storyId,\n      resourceId: RESOURCE_ID__SHARED__AGE,\n      extendedProps: {\n        resourceId: RESOURCE_ID__SHARED__AGE,\n        calendarId,\n        storyId,\n      },\n    };\n  });\n\n  return [...workingHolidayLimitEvents, ...ageEventList];\n};\n\nconst getLastYear = () => {\n  const BUFFER_YEAR = 10;\n  const date = new Date();\n  return addYears(date, BUFFER_YEAR).getFullYear();\n};\n\nconst createWorkingHolidayLimitEvents = (\n  birthday: Date,\n  storyId: string,\n  calendarId: string\n): BaseEvent[] => {\n  const lastYearDate = addYears(\n    birthday,\n    WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE\n  );\n  const start = convertIsoToDateTime(birthday.toISOString());\n  const endDate = addMonths(lastYearDate, +11);\n  const endOfLimit = convertIsoToDateTime(endDate.toISOString());\n  const endOfApplication = convertIsoToDateTime(\n    addYears(setMonth(endDate, +6), -1).toISOString()\n  );\n\n  const limitation = {\n    id: uuid(),\n    title: \"Limitation till WorkingHoliday\",\n    start,\n    end: endOfLimit,\n    resourceId: RESOURCE_ID__SHARED__LIMIT,\n    storyId,\n    extendedProps: {\n      resourceId: RESOURCE_ID__SHARED__LIMIT,\n      storyId,\n      calendarId,\n    },\n  };\n\n  const application = {\n    id: uuid(),\n    title: \"Application Limit\",\n    start,\n    end: endOfApplication,\n    storyId,\n    resourceId: RESOURCE_ID__SHARED__LIMIT,\n    extendedProps: {\n      storyId,\n      resourceId: RESOURCE_ID__SHARED__LIMIT,\n      calendarId,\n    },\n  };\n  return [limitation, application];\n};\n","export const WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE = 31;\nexport const MONTH_OF_WORKING_HOLIDAY_APPLICATION_LIMIT = 8;\n","import { EventInput } from \"@fullcalendar/react\";\nimport { uuid } from \"../../lib/uuid\";\nimport { convertIsoToYearAndMonth } from \"../../lib/date\";\n\nexport type BaseEvent = EventInput & {\n  extendedProps: {\n    calendarId: string;\n    storyId: string;\n  };\n};\n\nexport const initEvent = (props?: Partial<BaseEvent>): BaseEvent => {\n  const {\n    id,\n    calendarId,\n    resourceId: _resourceId,\n    storyId: _storyId,\n    title: _title,\n    start: _start,\n    end: _end,\n    ...rest\n  } = props ?? {};\n\n  const storyId = _storyId ?? uuid();\n  const resourceId = _resourceId ?? uuid();\n  const title = _title ?? \"New Event\";\n  const start = _start ? convertIsoToYearAndMonth(_start as Date) : undefined;\n  const end = _end ? convertIsoToYearAndMonth(_end as Date) : undefined;\n\n  return {\n    id: id ?? uuid(),\n    resourceId,\n    storyId,\n    title,\n    start,\n    end,\n    extendedProps: {\n      calendarId,\n      storyId,\n      resourceId,\n    },\n    ...rest,\n  };\n};\n\nexport const updateEvent = (\n  event: BaseEvent,\n  params: Partial<Omit<BaseEvent, \"id\" | \"storyId\">>\n): BaseEvent => {\n  const title = params.title;\n  const start = params.start\n    ? convertIsoToYearAndMonth(params.start as Date)\n    : undefined;\n  const end = params.end\n    ? convertIsoToYearAndMonth(params.end as Date)\n    : undefined;\n\n  const newEvent = Object.assign(\n    { ...event },\n    title !== undefined && { title },\n    start !== undefined && { start },\n    end !== undefined && { end }\n  );\n\n  return newEvent;\n};\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../rootReducer\";\nimport { BaseCalendar } from \"../../core/calendar/BaseCalendar\";\nimport { BaseStory } from \"../../core/story/BaseStory\";\nimport { BaseEvent, updateEvent } from \"../../core/event/BaseEvent\";\nimport { BaseResource } from \"../../core/resource/BaseResource\";\n\ntype Calendar = BaseCalendar;\ntype RemoveCalendarPayload = { calendarId: string };\ntype UpdateCalendarsPayload = { calendars: Calendar[] };\ntype PushRsourceAction = {\n  calendarId: string;\n  storyId: string;\n  resource: BaseResource;\n};\ntype UpdateResourcesPayload = {\n  calendarId: string;\n  storyId: string;\n  newResources: BaseResource[];\n};\ntype RemoveResourcePayload = {\n  calendarId: string;\n  storyId: string;\n  resourceId: string;\n};\ntype AddStoryPayload = { calendarId: string; story: BaseStory };\ntype RemoveStoryPayload = { calendarId: string; storyId: string };\ntype UpdateStoryPayload = {\n  calendarId: string;\n  storyId: string;\n  newStory: BaseStory;\n};\ntype AddEventPayload = {\n  calendarId: string;\n  storyId: string;\n  event: BaseEvent;\n};\ntype RemoveEventPayload = {\n  calendarId: string;\n  storyId: string;\n  eventId: string;\n};\ntype UpdateEventPayload = {\n  calendarId: string;\n  storyId: string;\n  eventId: string;\n  newEvent: BaseEvent;\n};\ntype UpdateEventByIdPayload = {\n  calendarId: string;\n  storyId: string;\n  eventId: string;\n  params: Partial<BaseEvent>;\n};\n\nconst userCalendarsSlice = createSlice({\n  name: \"userCalendars\",\n  initialState: {\n    calendars: [] as Calendar[],\n  },\n  reducers: {\n    removeCalendar(state, action: PayloadAction<RemoveCalendarPayload>) {\n      const { calendarId } = action.payload;\n      state.calendars = state.calendars.filter(\n        (calendar) => calendar.id !== calendarId\n      );\n    },\n    updateCalendars(state, action: PayloadAction<UpdateCalendarsPayload>) {\n      const { calendars } = action.payload;\n      state.calendars = calendars;\n    },\n    pushResource(state, action: PayloadAction<PushRsourceAction>) {\n      const { calendarId, storyId, resource } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFind = calendarIdx === -1;\n      if (cannotFind) {\n        console.warn(\"cannot find calendar on updateResource\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateResource\", calendarId);\n        return;\n      }\n\n      // process\n      state.calendars[calendarIdx].stories[storyIdx].resources.push(resource);\n    },\n    updateResources(state, action: PayloadAction<UpdateResourcesPayload>) {\n      const { calendarId, storyId, newResources } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFind = calendarIdx === -1;\n      if (cannotFind) {\n        console.warn(\"cannot find calendar on updateResource\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateResource\", calendarId);\n        return;\n      }\n\n      // query\n      state.calendars[calendarIdx].stories[storyIdx].resources = newResources;\n    },\n    removeResource(state, action: PayloadAction<RemoveResourcePayload>) {\n      const { calendarId, resourceId, storyId } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFind = calendarIdx === -1;\n      if (cannotFind) {\n        console.warn(\"cannot find calendar on removeResource\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on removeResource\", calendarId);\n        return;\n      }\n\n      // query\n      state.calendars[calendarIdx].stories[\n        storyIdx\n      ].resources = state.calendars[calendarIdx].stories[\n        storyIdx\n      ].resources.filter((resource) => resource.id !== resourceId);\n    },\n    addStory(state, action: PayloadAction<AddStoryPayload>) {\n      const { calendarId, story } = action.payload;\n      const idx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFind = idx === -1;\n      if (cannotFind) {\n        console.warn(\"cannot find calendar on addStory\", calendarId);\n        return;\n      }\n      state.calendars[idx].stories.push(story);\n    },\n    removeStory(state, action: PayloadAction<RemoveStoryPayload>) {\n      const { calendarId, storyId } = action.payload;\n      const idx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFind = idx === -1;\n      if (cannotFind) {\n        console.warn(\"cannot find calendar on removeStory\", calendarId);\n        return;\n      }\n      state.calendars[idx].stories = state.calendars[idx].stories.filter(\n        (story) => story.id !== storyId\n      );\n    },\n    updateStory(state, action: PayloadAction<UpdateStoryPayload>) {\n      const { calendarId, storyId, newStory } = action.payload;\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFindCalendar = calendarIdx === -1;\n      if (cannotFindCalendar) {\n        console.warn(\"cannot find calendar on updateStory\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateStory\", calendarId);\n        return;\n      }\n\n      // prcess\n      state.calendars[calendarIdx].stories[storyIdx] = newStory;\n    },\n    addEvent(state, action: PayloadAction<AddEventPayload>) {\n      const { calendarId, storyId, event } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFindCalendar = calendarIdx === -1;\n      if (cannotFindCalendar) {\n        console.warn(\"cannot find calendar on addEvent\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on addEvent\", calendarId);\n        return;\n      }\n\n      // addd\n      state.calendars[calendarIdx].stories[storyIdx].events.push(event);\n    },\n    removeEvent(state, action: PayloadAction<RemoveEventPayload>) {\n      const { calendarId, storyId, eventId } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFindCalendar = calendarIdx === -1;\n      if (cannotFindCalendar) {\n        console.warn(\"cannot find calendar on removeEvent\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on removeEvent\", storyIdx);\n        return;\n      }\n\n      // remove\n      state.calendars[calendarIdx].stories[storyIdx].events = state.calendars[\n        calendarIdx\n      ].stories[storyIdx].events.filter((_event) => _event.id !== eventId);\n    },\n    updateEvent(state, action: PayloadAction<UpdateEventPayload>) {\n      const { calendarId, storyId, eventId, newEvent } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFindCalendar = calendarIdx === -1;\n      if (cannotFindCalendar) {\n        console.warn(\"cannot find calendar on updateStory\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateStory\", calendarId);\n        return;\n      }\n\n      // event\n      const eventIdx = state.calendars[calendarIdx].stories[\n        storyIdx\n      ].events.findIndex((event) => event.id === eventId);\n      const cannotFindEvent = eventIdx === -1;\n      if (cannotFindEvent) {\n        console.warn(\"cannot find event on updateEvent\");\n        return;\n      }\n\n      // prcess\n      state.calendars[calendarIdx].stories[storyIdx].events[\n        eventIdx\n      ] = newEvent;\n    },\n    updateEventById(state, action: PayloadAction<UpdateEventByIdPayload>) {\n      const { calendarId, storyId, eventId, params } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFindCalendar = calendarIdx === -1;\n      if (cannotFindCalendar) {\n        console.warn(\"cannot find calendar on updateStory\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateStory\", calendarId);\n        return;\n      }\n\n      // event\n      const eventIdx = state.calendars[calendarIdx].stories[\n        storyIdx\n      ].events.findIndex((event) => event.id === eventId);\n      const cannotFindEvent = eventIdx === -1;\n      if (cannotFindEvent) {\n        console.warn(\"cannot find event on updateEvent\");\n        return;\n      }\n\n      // prcess\n      const oldEvent =\n        state.calendars[calendarIdx].stories[storyIdx].events[eventIdx];\n      const newEvent = updateEvent(oldEvent, params);\n      state.calendars[calendarIdx].stories[storyIdx].events[\n        eventIdx\n      ] = newEvent;\n    },\n  },\n});\n\nexport const {\n  // calendars\n  removeCalendar: removeCalendarAction,\n  updateCalendars: updateCalendarsAction,\n\n  // resources\n  pushResource: pushResourceAction,\n  updateResources: updateResourcesAction,\n  removeResource: removeResourceAction,\n\n  // story\n  addStory: addStoryAction,\n  removeStory: removeStoryAction,\n  updateStory: updateStoryAction,\n\n  // event\n  addEvent: addEventAction,\n  removeEvent: removeEventAction,\n  updateEvent: updateEventAction,\n  updateEventById: updateEventByIdAction,\n} = userCalendarsSlice.actions;\n\nexport default userCalendarsSlice.reducer;\n\n// export const selectUserCalendars = (state: RootState) =>\n//   state.userCalendars.calendars;\n\nexport const selectUserCalendar = (state: RootState) =>\n  state.features.userCalendars.calendars[0]; // NOTE: now calendars have only 1 calendar.\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { DateSelectArg } from \"@fullcalendar/react\";\nimport { uuid } from \"../lib/uuid\";\nimport { createProfileStory } from \"../core/story/ProfileStory/createProfileStory\";\nimport { initEvent } from \"../core/event/BaseEvent\";\nimport { createUserCalendar } from \"../core/calendar/UserCalendar/createUserCalendar\";\nimport {\n  updateCalendarsAction,\n  removeCalendarAction,\n  addEventAction,\n  selectUserCalendar,\n} from \"../redux/features/userCalendars\";\n\nexport const useUserCalendar = () => {\n  const dispatch = useDispatch();\n  const calendar = useSelector(selectUserCalendar);\n\n  const init = React.useCallback(\n    (birthday: string | Date) => {\n      const calendarId = uuid();\n      const story = createProfileStory({ birth: birthday, calendarId });\n      const _calendar = createUserCalendar({\n        id: calendarId,\n        stories: [story],\n      });\n      const _calendars = [_calendar];\n      dispatch(updateCalendarsAction({ calendars: _calendars }));\n    },\n    [dispatch]\n  );\n\n  const select = React.useCallback(\n    (info: DateSelectArg) => {\n      if (!info.resource) {\n        console.warn(\"Unexpected data that info does not have resource.\");\n        return;\n      }\n\n      // storyId\n      const storyId = info.resource.extendedProps.storyId;\n      if (!storyId) {\n        console.warn(\"Unexpected data not including storyId.\");\n        return;\n      }\n\n      // calendarId\n      const calendarId = info.resource.extendedProps.calendarId;\n      if (!calendarId) {\n        console.warn(\"Unexpected data not including calendarId.\");\n        return;\n      }\n\n      const newEvent = initEvent({\n        id: uuid(),\n        resourceId: info.resource.id,\n        calendarId,\n        storyId,\n        start: info.startStr,\n        end: info.endStr,\n      });\n\n      dispatch(addEventAction({ event: newEvent, calendarId, storyId }));\n    },\n    [dispatch]\n  );\n\n  const remove = React.useCallback(\n    (calendarId: string) => {\n      dispatch(removeCalendarAction({ calendarId }));\n    },\n    [dispatch]\n  );\n\n  const stories = React.useMemo(() => calendar?.stories ?? [], [calendar]);\n\n  const events = React.useMemo(\n    () => calendar?.stories.flatMap((story) => story.events) ?? [],\n    [calendar]\n  );\n\n  const resources = React.useMemo(\n    () => calendar?.stories.flatMap((story) => story.resources) ?? [],\n    [calendar]\n  );\n\n  return {\n    // callbacks\n    init,\n    select,\n    remove,\n\n    // params\n    calendar,\n    stories,\n    events,\n    resources,\n  } as const;\n};\n","import { UserCalendar } from \"./model\";\nimport { ProfileStory } from \"../../story/ProfileStory/model\";\n\ntype Story = ProfileStory;\n\nexport const createUserCalendar = ({\n  id,\n  stories,\n}: {\n  id: string;\n  stories: Story[];\n}): UserCalendar => {\n  return {\n    id,\n    stories,\n  };\n};\n","import { ProfileStory } from \"./model\";\nimport { PROFILE_ID } from \"../../../constants/fullcalendar/settings\";\nimport { createProfileResources } from \"../../resource/createProfileResources\";\nimport { createProfileEvents } from \"../../event/createProfileEvents\";\n\nconst STORY_NAME = \"Profile\";\n\nexport const createProfileStory = ({\n  birth,\n  calendarId,\n}: {\n  birth: string | Date;\n  calendarId: string;\n}): ProfileStory => {\n  const _birth = new Date(birth);\n  const storyId = PROFILE_ID;\n  return {\n    id: storyId,\n    calendarId,\n    name: STORY_NAME,\n    resources: createProfileResources({ calendarId, storyId }),\n    events: createProfileEvents({ calendarId, storyId, startDate: _birth }),\n  };\n};\n","import { NAME_OF_STORY_ID, NAME_OF_ORDER, FIELD } from \"./settings\";\n\nexport const MY_TIME_LINE_NAME = \"MY_TIME_LINE_NAME\";\n\nexport const AGE_OF_START_STORY = 21;\n\nconst slotLabelFormat = [{ year: \"numeric\" }, { month: \"numeric\" }];\n\nconst initialView = { initialView: MY_TIME_LINE_NAME } as const;\n\nconst resourceGroupField = { resourceGroupField: NAME_OF_STORY_ID } as const;\n\nconst schedulerLicenseKey = {\n  schedulerLicenseKey: \"GPL-My-Project-Is-Open-Source\",\n} as const;\n\nconst views = {\n  [MY_TIME_LINE_NAME]: {\n    type: \"resourceTimelineYear\",\n    duration: { year: 15 },\n    buttonText: \"TIME_LINE\",\n  },\n} as const;\n\nconst nowIndicator = {\n  nowIndicator: true,\n} as const;\n\nconst resourceConfigs = {\n  resourceOrder: NAME_OF_ORDER,\n  resourcesInitiallyExpanded: false,\n} as const;\n\nconst styleConfigs = {\n  height: 700,\n};\n\nconst resourceAreaColumns = [\n  {\n    field: FIELD,\n  },\n];\n\nexport const FULL_CALENDAR_CONFIGS = {\n  views,\n  slotLabelFormat,\n  resourceAreaColumns,\n  ...initialView,\n  ...resourceGroupField,\n  ...schedulerLicenseKey,\n  ...nowIndicator,\n  ...resourceConfigs,\n  ...styleConfigs,\n} as const;\n","import React, { PropsWithChildren } from \"react\";\nimport FullCalendarLib from \"@fullcalendar/react\";\nimport resourceTimelinePlugin from \"@fullcalendar/resource-timeline\";\nimport listPlugin from \"@fullcalendar/list\";\nimport interactionPlugin from \"@fullcalendar/interaction\";\nimport { FULL_CALENDAR_CONFIGS } from \"../../constants/fullcalendar/options\";\n\nexport function BaseFullCalendar<T>(props: PropsWithChildren<T>) {\n  return (\n    <FullCalendarLib\n      {...FULL_CALENDAR_CONFIGS}\n      plugins={[interactionPlugin, resourceTimelinePlugin, listPlugin]}\n      {...props}\n    />\n  );\n}\n","import React from \"react\";\nimport { BaseFullCalendar } from \"./BaseFullCalendar\";\n\nexport function BaseCalendarContainer(props: any) {\n  const args = {\n    // \n  };\n\n  return <BaseFullCalendar {...props} {...args} />;\n}\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { selectUserCalendar } from \"../redux/features/userCalendars\";\n\ntype Props = {\n  createOpenHandle: Function;\n};\n\ntype ContentProps = {\n  // REF: https://fullcalendar.io/docs/resource-group-render-hooks\n  groupValue: string;\n};\n\nexport const useResourceGroupLabelContentInUserCalendar = ({\n  createOpenHandle,\n}: Props) => {\n  const calendar = useSelector(selectUserCalendar);\n\n  const resourceGroupLabelContent = React.useCallback(\n    ({ groupValue: storyId }: ContentProps) => {\n      if (!calendar) return;\n\n      // story validation\n      const story = calendar.stories.find((story) => story.id === storyId);\n      if (!story) {\n        console.warn(\"cannot find story\", storyId);\n        return;\n      }\n\n      // name handler\n      let name: string;\n      if (story.name) {\n        name = story.name;\n      } else {\n        console.warn(\"cannot find this story name\", storyId);\n        name = \"No Name\";\n      }\n\n      const calendarId = calendar.id;\n      const openHandle = createOpenHandle({ calendarId, storyId });\n\n      const containerEl = document.createElement(\"span\");\n      containerEl.style.display = \"flex\";\n      containerEl.style.justifyContent = \"space-between\";\n\n      const nameElement = document.createElement(\"i\");\n      nameElement.innerHTML = name + \" \"; // NOTE: space is for design, so not good way\n      containerEl.appendChild(nameElement);\n\n      const buttonElement = document.createElement(\"button\");\n      buttonElement.innerHTML = \"\";\n      buttonElement.onclick = openHandle;\n      containerEl.appendChild(buttonElement);\n\n      const arrayOfDomNodes = [containerEl];\n      return { domNodes: arrayOfDomNodes };\n    },\n    [calendar, createOpenHandle]\n  );\n\n  return { resourceGroupLabelContent };\n};\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../rootReducer\";\n\ntype State = {\n  story: null | {\n    calendarId: string;\n    storyId: string;\n  };\n};\n\ntype PushPayload = {\n  calendarId: string;\n  storyId: string;\n};\n\ntype PopPayload = undefined;\n\nconst slice = createSlice({\n  name: \"storyModal\",\n  initialState: {\n    story: null,\n  } as State,\n  reducers: {\n    push(state, action: PayloadAction<PushPayload>) {\n      const _payload = action.payload;\n      state.story = _payload;\n    },\n    pop(state, _action: PayloadAction<PopPayload>) {\n      state.story = null;\n    },\n  },\n});\n\nexport const selectIsOpen = (state: RootState) => !!state.ui.storyModal.story;\n\nexport const selectStoryModal = (state: RootState) => state.ui.storyModal.story;\n\nexport const selectStory = (state: RootState) => {\n  const _story = state.ui.storyModal.story;\n  if (!_story) return null;\n  const { calendarId, storyId } = _story;\n\n  // calendar\n  const calendarIdx = state.features.userCalendars.calendars.findIndex(\n    (calendar) => calendar.id === calendarId\n  );\n  const cannotFind = calendarIdx === -1;\n  if (cannotFind) {\n    console.warn(\"cannot find calendar on removeStory\", calendarId);\n    return;\n  }\n\n  // story\n  return state.features.userCalendars.calendars[calendarIdx].stories.find(\n    (story) => story.id === storyId\n  );\n};\n\nexport const { push: pushAction, pop: popAction } = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../rootReducer\";\n\ntype State = {\n  event: null | {\n    calendarId: string;\n    storyId: string;\n    eventId: string;\n  };\n};\n\ntype PushPayload = {\n  calendarId: string;\n  storyId: string;\n  eventId: string;\n};\n\ntype PopPayload = undefined;\n\nconst slice = createSlice({\n  name: \"eventModal\",\n  initialState: {\n    event: null,\n  } as State,\n  reducers: {\n    push(state, action: PayloadAction<PushPayload>) {\n      const _payload = action.payload;\n      state.event = _payload;\n    },\n    pop(state, _action: PayloadAction<PopPayload>) {\n      state.event = null;\n    },\n  },\n});\n\nexport const selectIsOpen = (state: RootState) => !!state.ui.eventModal.event;\n\nexport const selectEventModal = (state: RootState) => state.ui.eventModal.event;\n\nexport const selectEvent = (state: RootState) => {\n  const event = state.ui.eventModal.event;\n  if (!event) return null;\n  const { calendarId, storyId, eventId } = event;\n\n  // calendar\n  const calendarIdx = state.features.userCalendars.calendars.findIndex(\n    (calendar) => calendar.id === calendarId\n  );\n  const cannotFind = calendarIdx === -1;\n  if (cannotFind) {\n    console.warn(\"cannot find calendar on removeResource\", calendarId);\n    return;\n  }\n\n  // story\n  const storyIdx = state.features.userCalendars.calendars[\n    calendarIdx\n  ].stories.findIndex((story) => story.id === storyId);\n  const cannotFindStory = storyIdx === -1;\n  if (cannotFindStory) {\n    console.warn(\"cannot find story on removeResource\", calendarId);\n    return;\n  }\n\n  //\n  return state.features.userCalendars.calendars[calendarIdx].stories[\n    storyIdx\n  ].events.find((event) => event.id === eventId);\n};\n\nexport const { push: pushAction, pop: popAction } = slice.actions;\n\nexport default slice.reducer;\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  removeEventAction,\n  updateEventAction,\n  updateEventByIdAction,\n} from \"../redux/features/userCalendars\";\nimport { BaseEvent, updateEvent } from \"../core/event/BaseEvent\";\n\ntype IdSet = { calendarId: string; storyId: string; eventId: string };\n\nexport const useEvent = () => {\n  const dispatch = useDispatch();\n\n  const remove = React.useCallback(\n    ({ calendarId, storyId, eventId }: IdSet) => {\n      if (!window.confirm(\"Do you remove this story?\")) return;\n      dispatch(\n        removeEventAction({\n          calendarId,\n          storyId,\n          eventId,\n        })\n      );\n    },\n    [dispatch]\n  );\n\n  const update = React.useCallback(\n    (idSet: IdSet, event: BaseEvent, params: any) => {\n      const newEvent = updateEvent(event, params);\n      dispatch(updateEventAction({ ...idSet, newEvent }));\n    },\n    [dispatch]\n  );\n\n  const updateById = React.useCallback(\n    (idSet: IdSet, params: Partial<BaseEvent>) => {\n      dispatch(updateEventByIdAction({ ...idSet, params }));\n    },\n    [dispatch]\n  );\n\n  return {\n    remove,\n    update,\n    updateById\n  } as const;\n};\n","import { uuid } from \"../../lib/uuid\";\nimport {\n  NAME_OF_ORDER,\n  NAME_OF_STORY_ID,\n  FIELD,\n} from \"../../constants/fullcalendar/settings\";\n\nexport type BaseResource = {\n  id: string;\n  calendarId: string;\n  [FIELD]: string;\n  [NAME_OF_STORY_ID]: string;\n  [NAME_OF_ORDER]?: number;\n  eventBorderColor?: string;\n};\n\nexport const initResource = (props?: Partial<BaseResource>): BaseResource => {\n  const { id, calendarId, storyId, ...rest } = props ?? {};\n  return {\n    id: id ?? uuid(),\n    calendarId: calendarId ?? uuid(),\n    [NAME_OF_STORY_ID]: storyId ?? uuid(),\n    [NAME_OF_ORDER]: 1,\n    [FIELD]: \"Field\",\n    ...rest,\n  };\n};\n","import { convertIsoToYearAndMonth } from \"../../lib/date\";\nimport { BaseEvent, initEvent } from \"../event/BaseEvent\";\nimport { BaseResource, initResource } from \"../resource/BaseResource\";\nimport { uuid } from \"../../lib/uuid\";\n\nexport type BaseStory = {\n  id: string;\n  calendarId: string;\n  events: BaseEvent[];\n  resources: BaseResource[];\n  name: string;\n};\n\nexport const removeEvent = (story: BaseStory, eventId: string): BaseStory => {\n  const newEvents = story.events.filter((event) => event.id !== eventId);\n  return { ...story, events: newEvents };\n};\n\nexport const createStoryName = (birth: Date) => {\n  return \"from \" + convertIsoToYearAndMonth(birth.toISOString());\n};\n\nexport const initStory = (props?: Partial<BaseStory>): BaseStory => {\n  const { id, calendarId: _calendarId, events, resources, name } = props ?? {};\n\n  const storyId = id ?? uuid();\n  const calendarId = _calendarId ?? uuid();\n  const eventId = uuid();\n  const _events = events ?? [initEvent({ id: eventId, storyId })];\n  const _resources = resources ?? [initResource({ calendarId, storyId })];\n\n  return {\n    id: storyId,\n    calendarId,\n    events: _events,\n    resources: _resources,\n    name: name ?? \"No Name\",\n  };\n};\n\nexport const updateStory = (story: BaseStory, params: Partial<BaseStory>) => {\n  if (!!params.name) story = { ...story, name: params.name };\n  if (!!params.resources) {\n    const newResources = params.resources.reduce((prev, curr) => {\n      const idx = story.resources.findIndex(\n        (resource) => resource.id === curr.id\n      );\n\n      const shouldCreate = idx === -1;\n      if (shouldCreate) {\n        // NOTE: no create case\n        console.warn(\"not upsert feature on story yet\");\n        return prev;\n      }\n\n      // Update case\n      const resource = story.resources[idx];\n      const newResource = { ...resource, ...curr };\n      return [...prev, newResource];\n    }, [] as BaseResource[]);\n    story = { ...story, resources: newResources };\n  }\n  if (!!params.calendarId) {\n    story = {\n      ...story,\n      calendarId: params.calendarId,\n      events: story.events.map((event) => ({\n        ...event,\n        calendarId: params.calendarId,\n      })),\n      resources: story.resources.map((resource) => ({\n        ...resource,\n        calendarId: params.calendarId as string,\n      })),\n    };\n  }\n  return story;\n};\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  removeStoryAction,\n  updateStoryAction,\n  addStoryAction,\n} from \"../redux/features/userCalendars\";\nimport { BaseStory, updateStory } from \"../core/story/BaseStory\";\nimport { initStory } from \"../core/story/BaseStory\";\n\ntype IdSet = { calendarId: string; storyId: string };\n\nexport const useStory = () => {\n  const dispatch = useDispatch();\n\n  const remove = React.useCallback(({ calendarId, storyId }: IdSet) => {\n    // TODO: move this line outside\n    if (!window.confirm(\"Do you remove this story?\")) return;\n    dispatch(\n      removeStoryAction({\n        storyId,\n        calendarId,\n      })\n    );\n  }, [dispatch]);\n\n  const update = React.useCallback(\n    (idSet: IdSet, story: BaseStory, data: Partial<BaseStory>) => {\n      const newStory = updateStory(story, data);\n      dispatch(updateStoryAction({ ...idSet, newStory }));\n    },\n    [dispatch]\n  );\n\n  const create  = React.useCallback(({calendarId}: {calendarId: string}, params?: Partial<BaseStory>) => {\n    const story = initStory({ calendarId });\n    dispatch(addStoryAction({ calendarId, story }));\n  }, [dispatch]);\n\n  return { remove, update, create } as const;\n};\n","import React from \"react\";\nimport { useUserCalendar } from \"./useUserCalendar\";\nimport { useStory } from \"./useStory\";\n\nexport const ADD_STORY_BUTTON = \"ADD_STORY_BUTTON\";\nexport const REMOVE_CALENDAR_BUTTON = \"REMOVE_CALENDAR_BUTTON\";\n\nexport const useCustomButtons = () => {\n  const { calendar, remove: removeUserCalendar } = useUserCalendar();\n  const { create: createStory } = useStory();\n\n  const handleAddStory = React.useCallback(() => {\n    if (!calendar) return;\n    const calendarId = calendar.id;\n    createStory({ calendarId });\n  }, [calendar, createStory]);\n\n  const handleRemoveCalendar = React.useCallback(() => {\n    if (!calendar) return;\n    const calendarId = calendar.id;\n    \n    if(!window.confirm('Do you want to delete this calendar?'))return;\n    removeUserCalendar(calendarId);\n  }, [removeUserCalendar, calendar]);\n\n  const customButtons = React.useMemo(\n    () => ({\n      [ADD_STORY_BUTTON]: {\n        text: \"Add story\",\n        click: handleAddStory,\n      },\n      [REMOVE_CALENDAR_BUTTON]: {\n        text: \"Remove Calendar\",\n        click: handleRemoveCalendar,\n      },\n    }),\n    [handleAddStory, handleRemoveCalendar]\n  );\n\n  return { customButtons };\n};\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useForm } from \"react-hook-form\";\nimport styled from \"styled-components\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\n// \nimport { selectStoryModal, selectStory } from \"../../redux/ui/storyModal\";\nimport { useStory } from \"../../hooks/useStory\";\nimport { useResource } from \"../../hooks/useResource\";\nimport { FIELD } from \"../../constants/fullcalendar/settings\";\n\ntype Props = {\n  isOpen: boolean;\n  onClose: () => void;\n};\n\nexport function StoryModal({ isOpen, onClose }: Props) {\n  const storyModal = useSelector(selectStoryModal);\n  const calendarId = storyModal?.calendarId;\n  const story = useSelector(selectStory);\n  const { register, handleSubmit } = useForm();\n  const {\n    create: createStory,\n    remove: removeStory,\n    update: updateStory,\n  } = useStory();\n  const { push: pushResource, remove: removeResource } = useResource();\n\n  const handleRemoveStory = React.useCallback(() => {\n    if (!storyModal) {\n      return console.warn(\"Invalid data status when to update resource.\");\n    }\n    removeStory(storyModal);\n    onClose();\n  }, [storyModal, removeStory, onClose]);\n\n  const handleRemoveResource = React.useCallback(\n    (resourceId: string) => () => {\n      if (!storyModal) {\n        return console.warn(\"Invalid data status when to remove resource.\");\n      }\n      removeResource({ ...storyModal, resourceId });\n    },\n    [storyModal, removeResource]\n  );\n\n  const handleAddResource = React.useCallback(() => {\n    if (!storyModal) {\n      return console.warn(\"Invalid data status when to add resource.\");\n    }\n    pushResource(storyModal);\n  }, [storyModal, pushResource]);\n\n  const handleNewStory = React.useCallback(() => {\n    if (!calendarId) return;\n    createStory({ calendarId });\n  }, [createStory, calendarId]);\n\n  const onSubmit = React.useCallback(\n    (data: any) => {\n      if (!storyModal || !story) {\n        return console.warn(\"Invalid data status when to update story.\");\n      }\n      updateStory(storyModal, story, data);\n      onClose();\n    },\n    [updateStory, storyModal, story, onClose]\n  );\n\n  // // TODO: error handler\n  // // const { register, handleSubmit, errors } = useForm();\n  // const { register, handleSubmit } = useForm();\n\n  if (!story) return <></>;\n\n  return (\n    <Dialog onClose={onClose} open={isOpen}>\n      <DialogTitle>\n        <form onSubmit={handleSubmit(onSubmit)}>\n          <DialogTitleInner>\n            <TextField\n              inputRef={register}\n              name=\"name\"\n              defaultValue={story.name}\n              variant=\"outlined\"\n              label=\"Story Name\"\n            />\n          </DialogTitleInner>\n        </form>\n      </DialogTitle>\n\n      <DialogContent dividers={true}>\n        <div>\n          <form onSubmit={handleSubmit(onSubmit)}>\n            {story.resources.map((resource, idx) => {\n              const fieldName = `resources[${idx}]`;\n              return (\n                <Fieldset name={fieldName} key={fieldName}>\n                  <input\n                    type=\"hidden\"\n                    name={`${fieldName}.id`}\n                    ref={register}\n                    value={resource.id}\n                  />\n                  <TextField\n                    defaultValue={resource[FIELD]}\n                    inputRef={register}\n                    name={`${fieldName}.${FIELD}`}\n                    label=\"Field\"\n                  />\n                  <Button\n                    onClick={handleRemoveResource(resource.id)}\n                    color=\"secondary\"\n                    variant=\"contained\"\n                  >\n                    Delete\n                  </Button>\n                </Fieldset>\n              );\n            })}\n            <AddResourceButtonContainer>\n              <Button\n                onClick={handleAddResource}\n                variant=\"outlined\"\n                color=\"primary\"\n              >\n                + Add Resource\n              </Button>\n            </AddResourceButtonContainer>\n\n            <UpdateButtonContainer>\n              <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n                Update\n              </Button>\n            </UpdateButtonContainer>\n          </form>\n        </div>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          onClick={handleRemoveStory}\n          color=\"secondary\"\n          variant=\"contained\"\n        >\n          Delete this story\n        </Button>\n        <Button onClick={handleNewStory} color=\"primary\">\n          Add New Story\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nconst DialogTitleInner = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst Fieldset = styled.fieldset`\n  border: none;\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  gap: 1rem;\n  padding: 1rem;\n  margin: 1rem;\n  border: 1px solid lightgray;\n`;\n\nconst AddResourceButtonContainer = styled.div`\n  padding: 1rem;\n`;\n\nconst UpdateButtonContainer = styled.div`\n  padding: 1rem;\n  text-align: right;\n`;\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectUserCalendar } from \"../redux/features/userCalendars\";\nimport {\n  removeResourceAction,\n  pushResourceAction,\n} from \"../redux/features/userCalendars\";\nimport { initResource } from \"../core/resource/BaseResource\";\n\ntype IdSet = { calendarId: string; resourceId: string; storyId: string };\n\nexport const useResource = () => {\n  const dispatch = useDispatch();\n\n  // TODO: remoove this line and get params as arg in each function\n  const calendar = useSelector(selectUserCalendar);\n\n  const push = React.useCallback(\n    ({ calendarId, storyId }: { calendarId: string; storyId: string }) => {\n      // story\n      const storyIdx = calendar.stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateResource\", calendarId);\n        return;\n      }\n\n      // resource\n      const _resources = calendar.stories[storyIdx].resources;\n      let lastResource = { idx: -1, order: -1 };\n      for (let i = 0; i < _resources.length; i++) {\n        const resource = _resources[i];\n        const _order = resource.order ?? -1;\n        if (_order > lastResource.order) {\n          lastResource = { idx: i, order: _order };\n        }\n      }\n\n      const _resource = initResource({\n        calendarId,\n        storyId,\n        order: lastResource.order + 1,\n      });\n\n      dispatch(\n        pushResourceAction({ calendarId, storyId, resource: _resource })\n      );\n    },\n    [dispatch, calendar]\n  );\n\n  const remove = React.useCallback(\n    ({ calendarId, resourceId, storyId }: IdSet) => {\n      // TODO: Move outside\n      if (!window.confirm(\"Do you remove this resource?\")) return;\n\n      dispatch(\n        removeResourceAction({\n          resourceId: resourceId,\n          storyId: storyId,\n          calendarId,\n        })\n      );\n    },\n    [dispatch]\n  );\n\n  return { remove, push } as const;\n};\n","import React from \"react\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { useForm } from \"react-hook-form\";\nimport { useSelector } from \"react-redux\";\nimport { selectEventModal, selectEvent } from \"../../redux/ui/eventModal\";\nimport { useEvent } from \"../../hooks/useEvent\";\nimport { BaseEvent } from \"../../core/event/BaseEvent\";\n\ntype Props = {\n  isOpen: boolean;\n  onClose: () => void;\n};\n\nexport function EventModal({ isOpen, onClose }: Props) {\n  const eventModal = useSelector(selectEventModal);\n  const event = useSelector(selectEvent);\n\n  const { remove, update } = useEvent();\n\n  const onRemove = React.useCallback(() => {\n    if (!eventModal) {\n      return console.warn(\"Invalid data status when to update event.\");\n    }\n    remove(eventModal);\n    onClose();\n  }, [eventModal, remove, onClose]);\n\n  const onUpdate = React.useCallback(\n    (data: Partial<BaseEvent>) => {\n      if (!eventModal || !event) {\n        return console.warn(\"Invalid data status when to remove event.\");\n      }\n      update(eventModal, event, data);\n      onClose();\n    },\n    [eventModal, event, update, onClose]\n  );\n\n  // TODO: error handler\n  const { register, handleSubmit } = useForm();\n\n  return (\n    <Dialog onClose={onClose} open={isOpen}>\n      <DialogTitle>Event</DialogTitle>\n      <DialogContent dividers={true}>\n        <form onSubmit={handleSubmit(onUpdate)}>\n          <TextField\n            inputRef={register}\n            name={\"title\"}\n            defaultValue={event?.title}\n            label=\"Title\"\n            variant=\"outlined\"\n          />\n          <Button type=\"submit\">rename</Button>\n        </form>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onRemove} variant=\"contained\" color=\"secondary\">\n          Remove\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React from \"react\";\nimport { EventClickArg } from \"@fullcalendar/react\";\nimport { useUserCalendar } from \"../../hooks/useUserCalendar\";\nimport { BaseCalendarContainer } from \"../../components/atoms/BaseCalendarContainer\";\nimport { useResourceGroupLabelContentInUserCalendar } from \"../../hooks/useResourceGroupLabelContentInUserCalendar\";\nimport { useStoryModal } from \"../../hooks/useStoryModal\";\nimport { useEventModal } from \"../../hooks/useEventModal\";\nimport { useEvent } from \"../../hooks/useEvent\";\nimport { useCustomButtons, ADD_STORY_BUTTON, REMOVE_CALENDAR_BUTTON } from \"../../hooks/useCustomButtons\";\nimport { StoryModal } from \"../../components/molecules/StoryModal\";\nimport { EventModal } from \"../../components/molecules/EventModal\";\n\nconst headerToolbar = {\n  left: `${ADD_STORY_BUTTON},${REMOVE_CALENDAR_BUTTON}`,\n  center: \"title\",\n  right: \"prev,next\",\n} as const;\n\nexport function UserCalendarContainer() {\n  const {\n    push: pushStoryModal,\n    pop: popStoryModal,\n    isOpen: isOpenStoryModal,\n  } = useStoryModal();\n\n  const {\n    push: pushEventModal,\n    pop: popEventModal,\n    isOpen: isOpenEventModal,\n  } = useEventModal();\n\n  const createOpenStoryHandle = React.useCallback(\n    (idSet: { calendarId: string; storyId: string }) => () => {\n      pushStoryModal(idSet);\n    },\n    [pushStoryModal]\n  );\n\n  const {\n    resourceGroupLabelContent,\n  } = useResourceGroupLabelContentInUserCalendar({\n    createOpenHandle: createOpenStoryHandle,\n  });\n\n  const {\n    events,\n    resources,\n    select,\n  } = useUserCalendar();\n\n  const click = React.useCallback(\n    (info: EventClickArg) => {\n      const calendarId = info.event.extendedProps.calendarId as\n        | string\n        | undefined;\n      if (!calendarId) {\n        return console.warn(\"Invalid data. cannot find calendarId.\");\n      }\n\n      const eventId = info.event.id;\n      if (!eventId) {\n        return console.warn(\"Invalid data. cannot find eventId.\");\n      }\n\n      const storyId = info.event.extendedProps.storyId as string | undefined;\n      if (!storyId) {\n        return console.warn(\"Invalid data. cannot find storyId.\");\n      }\n\n      const idSet = {\n        calendarId,\n        eventId,\n        storyId,\n      } as const;\n\n      pushEventModal(idSet);\n    },\n    [pushEventModal]\n  );\n\n  const { updateById } = useEvent();\n\n  const updateEvent = React.useCallback(\n    (data: any) => {\n      if (!data.event || !data.event.extendedProps) {\n        return console.warn(\"Invalid data. cannot find event data.\");\n      }\n      const start = data.event.start;\n      const end = data.event.end;\n      const idSet = {...data.event.extendedProps, eventId: data.event.id};\n\n      const params = { start, end };\n      updateById(idSet, params);\n      console.log(\"data\", data);\n    },\n    [updateById]\n  );\n\n  const {customButtons} = useCustomButtons()\n\n  return (\n    <>\n      <BaseCalendarContainer\n        events={events}\n        resources={resources}\n        // click event\n        eventClick={click}\n        // select empty space\n        selectable={true}\n        select={select}\n        // drag or resize event\n        editable={true}\n        eventResize={updateEvent}\n        eventDrop={updateEvent}\n        // etc\n        initialDate={\"2020-06-01\"} // TODO: change dynamically\n        resourceGroupLabelContent={resourceGroupLabelContent}\n        customButtons={customButtons}\n        headerToolbar={headerToolbar}\n      />\n\n      {/* Modal */}\n      <StoryModal isOpen={isOpenStoryModal} onClose={popStoryModal} />\n      <EventModal isOpen={isOpenEventModal} onClose={popEventModal} />\n    </>\n  );\n}\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { pushAction, popAction, selectIsOpen } from \"../redux/ui/storyModal\";\n\nexport const useStoryModal = () => {\n  const dispatch = useDispatch();\n\n  const push = React.useCallback(\n    ({\n      storyId,\n      calendarId,\n    }: {\n      storyId: string;\n      calendarId: string;\n    }) => {\n      dispatch(pushAction({ calendarId, storyId }));\n    },\n    [dispatch]\n  );\n\n  const pop = React.useCallback(() => {\n    dispatch(popAction());\n  }, [dispatch]);\n\n  const isOpen = useSelector(selectIsOpen);\n\n  return { push, pop, isOpen } as const;\n};\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { pushAction, popAction, selectIsOpen } from \"../redux/ui/eventModal\";\n\nexport const useEventModal = () => {\n  const dispatch = useDispatch();\n\n  const push = React.useCallback(\n    ({\n      eventId,\n      storyId,\n      calendarId,\n    }: {\n      eventId: string;\n      storyId: string;\n      calendarId: string;\n    }) => {\n      dispatch(pushAction({ calendarId, eventId, storyId }));\n    },\n    [dispatch]\n  );\n\n  const pop = React.useCallback(() => {\n    dispatch(popAction());\n  }, [dispatch]);\n\n  const isOpen = useSelector(selectIsOpen);\n\n  return { push, pop, isOpen } as const;\n};\n","import React from \"react\";\nimport styled from 'styled-components'\nimport Button from \"@material-ui/core/Button\";\nimport { useUserCalendar } from \"../../hooks/useUserCalendar\";\nimport { useUser } from \"../../hooks/useUser\";\n\nexport function UserCalendarCreater() {\n  const { init: initUserCalendar } = useUserCalendar();\n  const { birth } = useUser();\n\n  // TODO: open modal and start setting birthday\n  const handleCreate = React.useCallback(() => {\n    if (!birth) return;\n    initUserCalendar(birth);\n  }, [initUserCalendar, birth]);\n\n  return (\n    <Container>\n      <Button onClick={handleCreate} variant=\"contained\" color=\"primary\">\n        Create Calendar\n      </Button>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  height: 30vh;\n  background: lightblue;\n  display: grid;\n  place-items: center;\n`","import React from \"react\";\nimport { UserCalendarContainer } from \"../molecules/UserCalendarContainer\";\nimport { UserCalendarCreater } from \"../molecules/UserCalendarCreater\";\nimport { useUserCalendar } from \"../../hooks/useUserCalendar\";\n\nexport function UserCalendarArea() {\n  const { calendar } = useUserCalendar();\n  const existsCalendar = !!calendar;\n  return (\n    <div>\n      {existsCalendar ? <UserCalendarContainer /> : <UserCalendarCreater />}\n    </div>\n  );\n}\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../rootReducer\";\n\ntype UpdatePayload = {\n  schoolPeriod: number;\n  coopPeriod: number;\n  pgwpPeriod: number;\n  workingholidayPeriod: number;\n  monthsOfStartSchool: number[];\n};\n\nconst slices = createSlice({\n  name: \"templateOption\",\n  initialState: {\n    option: {\n      schoolPeriod: 12 * 2,\n      coopPeriod: 12 * 2,\n      pgwpPeriod: 12 * 3,\n      workingholidayPeriod: 12,\n      monthsOfStartSchool: [1, 5, 9],\n    },\n  },\n  reducers: {\n    update(state, action: PayloadAction<UpdatePayload>) {\n      state.option = action.payload;\n    },\n  },\n});\n\nexport const selectTemplateOption = (state: RootState) =>\n  state.features.templateOption.option;\n\nexport const { update: updateAction } = slices.actions;\n\nexport default slices.reducer;\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  selectTemplateOption,\n  updateAction,\n} from \"../redux/features/templateOption\";\nimport { TemplateOption } from \"../core/calendar/BaseCalendar\";\n\nexport const useTemplateOptions = () => {\n  const dispatch = useDispatch();\n\n  const options = useSelector(selectTemplateOption);\n\n  const update = React.useCallback(\n    (params: Partial<TemplateOption>) => {\n      const newTemplateOption = { ...options, ...params };\n      dispatch(updateAction(newTemplateOption));\n    },\n    [dispatch, options]\n  );\n\n  return { options, update };\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport { useTemplateOptions } from \"../../hooks/useTemplateOptions\";\n\nexport function TemplateOptionCard() {\n  const { update: updateOption, options } = useTemplateOptions();\n  const { schoolPeriod, coopPeriod, monthsOfStartSchool, pgwpPeriod } = options;\n\n  const handleChangeSchoolPeriod = React.useCallback(\n    (_event) => {\n      const value = _event.target.value;\n      const maybeNum = value === \"\" ? 0 : parseInt(value);\n      if (!Number.isInteger(maybeNum)) return;\n      updateOption({ schoolPeriod: maybeNum });\n    },\n    [updateOption]\n  );\n\n  const handleChangeCoopPeriod = React.useCallback(\n    (_event) => {\n      const value = _event.target.value;\n      const maybeNum = value === \"\" ? 0 : parseInt(value);\n      if (!Number.isInteger(maybeNum)) return;\n      updateOption({ coopPeriod: maybeNum });\n    },\n    [updateOption]\n  );\n\n  const handleChangePgwpPeriod = React.useCallback(\n    (_event) => {\n      const value = _event.target.value;\n      const maybeNum = value === \"\" ? 0 : parseInt(value);\n      if (!Number.isInteger(maybeNum)) return;\n      updateOption({ pgwpPeriod: maybeNum });\n    },\n    [updateOption]\n  );\n\n  const handleCheck = React.useCallback(\n    (_event) => {\n      const month = parseInt(_event.target.value);\n      const newMonthsOfStartSchool = monthsOfStartSchool.includes(month)\n        ? monthsOfStartSchool.filter((_month) => _month !== month)\n        : [...monthsOfStartSchool, month].sort((a, b) => a - b);\n      updateOption({ monthsOfStartSchool: newMonthsOfStartSchool });\n    },\n    [updateOption, monthsOfStartSchool]\n  );\n\n  return (\n    <Card>\n      <CardContent>\n        <h2>Template Options</h2>\n        <InnerContainer>\n          <PeriodContainer>\n            <TextField\n              value={schoolPeriod}\n              onChange={handleChangeSchoolPeriod}\n              label=\"School Period\"\n              InputProps={{\n                endAdornment: (\n                  <InputAdornment position=\"end\">Month</InputAdornment>\n                ),\n              }}\n            />\n            <TextField\n              value={coopPeriod}\n              onChange={handleChangeCoopPeriod}\n              label=\"Co-op Period\"\n              InputProps={{\n                endAdornment: (\n                  <InputAdornment position=\"end\">Month</InputAdornment>\n                ),\n              }}\n            />\n            <TextField\n              value={pgwpPeriod}\n              onChange={handleChangePgwpPeriod}\n              label=\"PWGP Period\"\n              InputProps={{\n                endAdornment: (\n                  <InputAdornment position=\"end\">Month</InputAdornment>\n                ),\n              }}\n            />\n          </PeriodContainer>\n\n          <div>\n            <label>School start from (Month)</label>\n            <div>\n              {Array.from({ length: 12 }).map((_, idx) => {\n                const month = idx + 1;\n                const isChecked = monthsOfStartSchool.includes(month);\n                return (\n                  <CheckboxListItem key={month}>\n                    <label>{month}</label>\n                    <Checkbox\n                      value={month}\n                      checked={isChecked}\n                      onChange={handleCheck}\n                    />\n                  </CheckboxListItem>\n                );\n              })}\n            </div>\n          </div>\n        </InnerContainer>\n      </CardContent>\n    </Card>\n  );\n}\n\nconst CheckboxListItem = styled.div`\n  display: inline-block;\n  margin-right: 1rem;\n`;\n\nconst PeriodContainer = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  gap: 2rem;\n  margin-bottom: 1rem;\n`;\nconst InnerContainer = styled.div``;\n","import { addMonths, addYears, setMonth } from \"date-fns\";\nimport {\n  // resources\n  RESOURCE_TEMPLATE__VISA_STUDY,\n  RESOURCE_TEMPLATE__VISA_COOP,\n  RESOURCE_TEMPLATE__VISA_WORKING_HOLIDAY,\n  RESOURCE_TEMPLATE__STUDENT_STATUS,\n  RESOURCE_TEMPLATE__WORKER_STATUS,\n  // events\n  EVENT_TEMPLATE__VISA_COOP,\n  EVENT_TEMPLATE__VISA_STUDY,\n  EVENT_TEMPLATE__VISA_READY_WORKING_HOLIDAY,\n  EVENT_TEMPLATE__VISA_WORKING_HOLIDAY,\n  EVENT_TEMPLATE__STATUS_STATUS,\n  EVENT_TEMPLATE__STATUS_WORKER,\n} from \"../../../constants/fullcalendar/templates\";\nimport {\n  NAME_OF_STORY_ID,\n  NAME_OF_ORDER,\n} from \"../../../constants/fullcalendar/settings\";\nimport { MONTH_OF_WORKING_HOLIDAY_APPLICATION_LIMIT } from \"../../../constants/visa\";\nimport { uuid } from \"../../../lib/uuid\";\nimport { PrivateCollegeStory } from \"./model\";\nimport { createStoryName } from \"../BaseStory\";\nimport { TemplateOption } from \"../../calendar/BaseCalendar\";\nimport { BaseEvent, initEvent } from \"../../event/BaseEvent\";\nimport { BaseResource, initResource } from \"../../resource/BaseResource\";\nimport { convertIsoToYearAndMonth } from \"../../../lib/date\";\n\nexport const createPrivateCollegeStory = (\n  {\n    startDate,\n    calendarId,\n    canWorkingholiday,\n  }: {\n    startDate: Date;\n    calendarId: string;\n    canWorkingholiday: boolean;\n  },\n  options: TemplateOption\n): PrivateCollegeStory => {\n  const storyId = uuid();\n  const name = createStoryName(startDate);\n\n  const [resources, events] = doCreateStory(\n    {\n      calendarId,\n      storyId,\n      startDate,\n      canWorkingholiday,\n    },\n    options\n  );\n  return {\n    id: storyId,\n    calendarId,\n    name,\n    events,\n    resources,\n  };\n};\n\nconst doCreateStory = (\n  {\n    calendarId,\n    storyId,\n    startDate,\n    canWorkingholiday,\n  }: {\n    calendarId: string;\n    storyId: string;\n    startDate: Date;\n    canWorkingholiday: boolean;\n  },\n  options: TemplateOption\n) => {\n  let resources = [] as BaseResource[];\n  let events = [] as BaseEvent[];\n\n  const { schoolPeriod, coopPeriod, workingholidayPeriod } = options;\n  const withCoop = coopPeriod > 0;\n\n  if (withCoop) {\n    const coopVisaResourceId = uuid();\n    resources.push(\n      initResource({\n        ...RESOURCE_TEMPLATE__VISA_COOP,\n        id: coopVisaResourceId,\n        calendarId,\n        [NAME_OF_STORY_ID]: storyId,\n        [NAME_OF_ORDER]: 1,\n      })\n    );\n    events.push(\n      initEvent({\n        ...EVENT_TEMPLATE__VISA_COOP,\n        id: uuid(),\n        resourceId: coopVisaResourceId,\n        storyId,\n        start: convertIsoToYearAndMonth(startDate.toISOString()),\n        end: convertIsoToYearAndMonth(\n          addMonths(startDate, coopPeriod).toISOString()\n        ),\n        extendedProps: {\n          resourceId: coopVisaResourceId,\n          calendarId,\n          storyId,\n        },\n      })\n    );\n  }\n\n  // StudyVisa\n  const studyVisaResourceId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCE_TEMPLATE__VISA_STUDY,\n      id: studyVisaResourceId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 2,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENT_TEMPLATE__VISA_STUDY,\n      id: uuid(),\n      resourceId: studyVisaResourceId,\n      storyId,\n      start: convertIsoToYearAndMonth(startDate.toISOString()),\n      end: convertIsoToYearAndMonth(\n        addMonths(startDate, schoolPeriod).toISOString()\n      ),\n      extendedProps: {\n        resourceId: studyVisaResourceId,\n        calendarId,\n        storyId,\n      },\n    })\n  );\n\n  if (canWorkingholiday) {\n    const workingholidayResourceId = uuid();\n    resources.push(\n      initResource({\n        ...RESOURCE_TEMPLATE__VISA_WORKING_HOLIDAY,\n        id: workingholidayResourceId,\n        calendarId,\n        [NAME_OF_STORY_ID]: storyId,\n        [NAME_OF_ORDER]: 3,\n      })\n    );\n    const dateAsStartWorkingHoliday = addMonths(startDate, schoolPeriod);\n    events.push(\n      initEvent({\n        ...EVENT_TEMPLATE__VISA_WORKING_HOLIDAY,\n        id: uuid(),\n        resourceId: workingholidayResourceId,\n        storyId,\n        start: convertIsoToYearAndMonth(\n          dateAsStartWorkingHoliday.toISOString()\n        ),\n        end: convertIsoToYearAndMonth(\n          addMonths(\n            dateAsStartWorkingHoliday,\n            workingholidayPeriod\n          ).toISOString()\n        ),\n        extendedProps: {\n          resourceId: workingholidayResourceId,\n          calendarId,\n          storyId,\n        },\n      })\n    );\n    events.push(\n      initEvent({\n        ...EVENT_TEMPLATE__VISA_READY_WORKING_HOLIDAY,\n        id: uuid(),\n        resourceId: workingholidayResourceId,\n        storyId,\n        start: convertIsoToYearAndMonth(\n          setMonth(\n            addYears(dateAsStartWorkingHoliday, -1),\n            MONTH_OF_WORKING_HOLIDAY_APPLICATION_LIMIT\n          ).toISOString()\n        ),\n        end: convertIsoToYearAndMonth(dateAsStartWorkingHoliday.toISOString()),\n        extendedProps: {\n          resourceId: workingholidayResourceId,\n          calendarId,\n          storyId,\n        },\n      })\n    );\n\n    // worker status\n    const workerStatusResourceId = uuid();\n    resources.push(\n      initResource({\n        ...RESOURCE_TEMPLATE__WORKER_STATUS,\n        id: workerStatusResourceId,\n        calendarId,\n        [NAME_OF_STORY_ID]: storyId,\n        [NAME_OF_ORDER]: 5,\n      })\n    );\n    events.push(\n      initEvent({\n        ...EVENT_TEMPLATE__STATUS_WORKER,\n        id: uuid(),\n        resourceId: workerStatusResourceId,\n        storyId,\n        start: convertIsoToYearAndMonth(\n          addMonths(startDate, schoolPeriod).toISOString()\n        ),\n        end: convertIsoToYearAndMonth(\n          addMonths(\n            startDate,\n            schoolPeriod + workingholidayPeriod\n          ).toISOString()\n        ),\n        extendedProps: {\n          resourceId: workerStatusResourceId,\n          calendarId,\n          storyId,\n        },\n      })\n    );\n  }\n\n  // student status\n  const studentStatusResourceId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCE_TEMPLATE__STUDENT_STATUS,\n      id: studentStatusResourceId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 4,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENT_TEMPLATE__STATUS_STATUS,\n      id: uuid(),\n      resourceId: studentStatusResourceId,\n      storyId,\n      start: convertIsoToYearAndMonth(startDate.toISOString()),\n      end: convertIsoToYearAndMonth(\n        addMonths(startDate, schoolPeriod).toISOString()\n      ),\n      extendedProps: {\n        resourceId: studentStatusResourceId,\n        calendarId,\n        storyId,\n      },\n    })\n  );\n\n  return [[...resources], [...events]] as [BaseResource[], BaseEvent[]];\n};\n","import { addMonths, addYears, setMonth } from \"date-fns\";\nimport {\n  // resources\n  RESOURCE_TEMPLATE__VISA_STUDY,\n  RESOURCE_TEMPLATE__VISA_WORKING_HOLIDAY,\n  RESOURCE_TEMPLATE__VISA_PGWP,\n  RESOURCE_TEMPLATE__STUDENT_STATUS,\n  RESOURCE_TEMPLATE__WORKER_STATUS,\n  // events\n  EVENT_TEMPLATE__VISA_STUDY,\n  EVENT_TEMPLATE__VISA_PGWP,\n  EVENT_TEMPLATE__VISA_READY_WORKING_HOLIDAY,\n  EVENT_TEMPLATE__VISA_WORKING_HOLIDAY,\n  EVENT_TEMPLATE__STATUS_STATUS,\n  EVENT_TEMPLATE__STATUS_WORKER,\n} from \"../../../constants/fullcalendar/templates\";\nimport {\n  NAME_OF_STORY_ID,\n  NAME_OF_ORDER,\n} from \"../../../constants/fullcalendar/settings\";\nimport { MONTH_OF_WORKING_HOLIDAY_APPLICATION_LIMIT } from \"../../../constants/visa\";\nimport { uuid } from \"../../../lib/uuid\";\nimport { PrivateCollegeStory } from \"./model\";\nimport { createStoryName } from \"../BaseStory\";\nimport { TemplateOption } from \"../../calendar/BaseCalendar\";\nimport { BaseEvent, initEvent } from \"../../event/BaseEvent\";\nimport { BaseResource, initResource } from \"../../resource/BaseResource\";\nimport { convertIsoToYearAndMonth } from \"../../../lib/date\";\n\nexport const createPublicCollegeStory = (\n  {\n    startDate,\n    calendarId,\n    canWorkingholiday,\n  }: {\n    startDate: Date;\n    calendarId: string;\n    canWorkingholiday: boolean;\n  },\n  options: TemplateOption\n): PrivateCollegeStory => {\n  const storyId = uuid();\n  const name = createStoryName(startDate);\n\n  const [resources, events] = doCreateStory(\n    {\n      calendarId,\n      storyId,\n      startDate,\n      canWorkingholiday,\n    },\n    options\n  );\n  return {\n    id: storyId,\n    calendarId,\n    name,\n    events,\n    resources,\n  };\n};\n\nconst doCreateStory = (\n  {\n    calendarId,\n    storyId,\n    startDate,\n    canWorkingholiday,\n  }: {\n    calendarId: string;\n    storyId: string;\n    startDate: Date;\n    canWorkingholiday: boolean;\n  },\n  options: TemplateOption\n) => {\n  let resources = [] as BaseResource[];\n  let events = [] as BaseEvent[];\n\n  const { schoolPeriod, pgwpPeriod, workingholidayPeriod } = options;\n  const withPgwp = pgwpPeriod > 0;\n\n  if (withPgwp) {\n    const pgwpVisaResourceId = uuid();\n    resources.push(\n      initResource({\n        ...RESOURCE_TEMPLATE__VISA_PGWP,\n        id: pgwpVisaResourceId,\n        calendarId,\n        [NAME_OF_STORY_ID]: storyId,\n        [NAME_OF_ORDER]: 1,\n      })\n    );\n    events.push(\n      initEvent({\n        ...EVENT_TEMPLATE__VISA_PGWP,\n        id: uuid(),\n        resourceId: pgwpVisaResourceId,\n        storyId,\n        start: convertIsoToYearAndMonth(\n          addMonths(startDate, schoolPeriod).toISOString()\n        ),\n        end: convertIsoToYearAndMonth(\n          addMonths(startDate, schoolPeriod + pgwpPeriod).toISOString()\n        ),\n        extendedProps: {\n          resourceId: pgwpVisaResourceId,\n          calendarId,\n          storyId,\n        },\n      })\n    );\n  }\n\n  // StudyVisa\n  const studyVisaResourceId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCE_TEMPLATE__VISA_STUDY,\n      id: studyVisaResourceId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 2,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENT_TEMPLATE__VISA_STUDY,\n      id: uuid(),\n      resourceId: studyVisaResourceId,\n      storyId,\n      start: convertIsoToYearAndMonth(startDate.toISOString()),\n      end: convertIsoToYearAndMonth(\n        addMonths(startDate, schoolPeriod).toISOString()\n      ),\n      extendedProps: {\n        resourceId: studyVisaResourceId,\n        calendarId,\n        storyId,\n      },\n    })\n  );\n\n  if (canWorkingholiday) {\n    const workingholidayResourceId = uuid();\n    resources.push(\n      initResource({\n        ...RESOURCE_TEMPLATE__VISA_WORKING_HOLIDAY,\n        id: workingholidayResourceId,\n        calendarId,\n        [NAME_OF_STORY_ID]: storyId,\n        [NAME_OF_ORDER]: 3,\n      })\n    );\n    const dateAsStartWorkingHoliday = addMonths(\n      startDate,\n      schoolPeriod + pgwpPeriod\n    );\n    events.push(\n      initEvent({\n        ...EVENT_TEMPLATE__VISA_WORKING_HOLIDAY,\n        id: uuid(),\n        resourceId: workingholidayResourceId,\n        storyId,\n        start: convertIsoToYearAndMonth(\n          dateAsStartWorkingHoliday.toISOString()\n        ),\n        end: convertIsoToYearAndMonth(\n          addMonths(\n            dateAsStartWorkingHoliday,\n            workingholidayPeriod\n          ).toISOString()\n        ),\n        extendedProps: {\n          resourceId: workingholidayResourceId,\n          calendarId,\n          storyId,\n        },\n      })\n    );\n    events.push(\n      initEvent({\n        ...EVENT_TEMPLATE__VISA_READY_WORKING_HOLIDAY,\n        id: uuid(),\n        resourceId: workingholidayResourceId,\n        storyId,\n        start: convertIsoToYearAndMonth(\n          setMonth(\n            addYears(dateAsStartWorkingHoliday, -1),\n            MONTH_OF_WORKING_HOLIDAY_APPLICATION_LIMIT\n          ).toISOString()\n        ),\n        end: convertIsoToYearAndMonth(dateAsStartWorkingHoliday.toISOString()),\n        extendedProps: {\n          resourceId: workingholidayResourceId,\n          calendarId,\n          storyId,\n        },\n      })\n    );\n\n    // worker status\n    const workerStatusResourceId = uuid();\n    resources.push(\n      initResource({\n        ...RESOURCE_TEMPLATE__WORKER_STATUS,\n        id: workerStatusResourceId,\n        calendarId,\n        [NAME_OF_STORY_ID]: storyId,\n        [NAME_OF_ORDER]: 5,\n      })\n    );\n    events.push(\n      initEvent({\n        ...EVENT_TEMPLATE__STATUS_WORKER,\n        id: uuid(),\n        resourceId: workerStatusResourceId,\n        storyId,\n        start: convertIsoToYearAndMonth(\n          addMonths(startDate, schoolPeriod).toISOString()\n        ),\n        end: convertIsoToYearAndMonth(\n          addMonths(\n            startDate,\n            schoolPeriod + pgwpPeriod + workingholidayPeriod\n          ).toISOString()\n        ),\n        extendedProps: {\n          resourceId: workerStatusResourceId,\n          calendarId,\n          storyId,\n        },\n      })\n    );\n  }\n\n  // student status\n  const studentStatusResourceId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCE_TEMPLATE__STUDENT_STATUS,\n      id: studentStatusResourceId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 4,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENT_TEMPLATE__STATUS_STATUS,\n      id: uuid(),\n      resourceId: studentStatusResourceId,\n      storyId,\n      start: convertIsoToYearAndMonth(startDate.toISOString()),\n      end: convertIsoToYearAndMonth(\n        addMonths(startDate, schoolPeriod).toISOString()\n      ),\n      extendedProps: {\n        resourceId: studentStatusResourceId,\n        calendarId,\n        storyId,\n      },\n    })\n  );\n\n  return [[...resources], [...events]] as [BaseResource[], BaseEvent[]];\n};\n","import { addYears, setMonth, compareAsc } from \"date-fns\";\nimport {\n  PrivateCollegeCalendar,\n  PRIVATE_COLLEGE_CALENDAR_ID,\n  PUBLIC_COLLEGE_CALENDAR_ID,\n} from \"./model\";\nimport { AGE_OF_START_STORY } from \"../../../constants/fullcalendar/options\";\nimport { WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE } from \"../../../constants/visa\";\nimport { range } from \"../../../lib/util\";\nimport { createPrivateCollegeStory } from \"../../story/PrivateCollegeStory/createPrivateCollegeStory\";\nimport { createPublicCollegeStory } from \"../../story/PublicCollegeStory/createPublicCollegeStory\";\nimport { BaseStory } from \"../../story/BaseStory\";\nimport { TemplateOption } from \"../BaseCalendar\";\n\nconst scopeAges = range(\n  AGE_OF_START_STORY,\n  WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE\n);\n\nconst shouldViewPast = false;\nconst now = new Date();\n\nconst createStoryList = (\n  {\n    birth,\n    calendarId,\n    canWorkingholiday,\n    storyCreater,\n  }: {\n    birth: Date;\n    calendarId: string;\n    canWorkingholiday: boolean;\n    storyCreater: Function;\n  },\n  options: TemplateOption\n): BaseStory[] => {\n  const monthsOfStartSchool = options.monthsOfStartSchool;\n\n  return scopeAges\n    .map((num) => addYears(birth, num))\n    .filter((date) => {\n      if (shouldViewPast) return true;\n      const isPastPeriod = compareAsc(now, date) !== -1;\n      return !isPastPeriod;\n    })\n    .flatMap((startDate) => {\n      const startDateListInYear = monthsOfStartSchool.map((month) =>\n        setMonth(startDate, month - 1)\n      );\n      return startDateListInYear;\n    })\n    .map((startDate) => {\n      const params = { startDate, calendarId, canWorkingholiday };\n      return storyCreater(params, options);\n    });\n};\n\nexport const createPrivateCollegeCalendar = (\n  {\n    birth,\n    canWorkingholiday,\n  }: {\n    birth: Date;\n    canWorkingholiday: boolean;\n  },\n  options: TemplateOption\n): PrivateCollegeCalendar => {\n  const params = {\n    birth,\n    calendarId: PRIVATE_COLLEGE_CALENDAR_ID,\n    canWorkingholiday,\n    storyCreater: createPrivateCollegeStory,\n  };\n  const stories = createStoryList(params, options);\n  return {\n    id: PRIVATE_COLLEGE_CALENDAR_ID,\n    stories,\n  };\n};\n\nexport const createPublicCollegeCalendar = (\n  {\n    birth,\n    canWorkingholiday,\n  }: {\n    birth: Date;\n    canWorkingholiday: boolean;\n  },\n  options: TemplateOption\n): PrivateCollegeCalendar => {\n  const params = {\n    birth,\n    calendarId: PUBLIC_COLLEGE_CALENDAR_ID,\n    canWorkingholiday,\n    storyCreater: createPublicCollegeStory,\n  };\n  const stories = createStoryList(params, options);\n  return {\n    id: PUBLIC_COLLEGE_CALENDAR_ID,\n    stories,\n  };\n};\n","// REF: https://stackoverflow.com/a/15453499/8842333\nexport function range(start: number, stop: number, step?: number) {\n  var a = [start],\n    b = start;\n  while (b < stop) {\n    a.push((b += step || 1));\n  }\n  return a;\n}\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport {\n  createPrivateCollegeCalendar,\n  createPublicCollegeCalendar,\n} from \"../../core/calendar/TemplateCalendar/createCalendar\";\nimport {\n  PRIVATE_COLLEGE_CALENDAR_ID,\n  PUBLIC_COLLEGE_CALENDAR_ID,\n} from \"../../core/calendar/TemplateCalendar/model\";\nimport { TemplateOption } from \"../../core/calendar/BaseCalendar\";\nimport {\n  PrivateCollegeCalendar,\n  PublicCollegeCalendar,\n} from \"../../core/calendar/TemplateCalendar/model\";\nimport { RootState } from \"../rootReducer\";\n\ntype UpsertPrivateCollegeStoriesPayload = {\n  birth: string;\n  canWorkingholiday: boolean;\n  options: TemplateOption;\n};\n\ntype UpsertPublicCollegeStoriesPayload = {\n  birth: string;\n  canWorkingholiday: boolean;\n  options: TemplateOption;\n};\n\nconst templateCalendarTable = createSlice({\n  name: \"templateCalendarTable\",\n  initialState: {\n    [PRIVATE_COLLEGE_CALENDAR_ID]: undefined as\n      | PrivateCollegeCalendar\n      | undefined,\n    [PUBLIC_COLLEGE_CALENDAR_ID]: undefined as\n      | PublicCollegeCalendar\n      | undefined,\n  },\n  reducers: {\n    upsertPrivateCollegeStories(\n      state,\n      action: PayloadAction<UpsertPrivateCollegeStoriesPayload>\n    ) {\n      const { birth, canWorkingholiday, options } = action.payload;\n\n      const _calendar = createPrivateCollegeCalendar(\n        {\n          birth: new Date(birth), // TODO: don't new here\n          canWorkingholiday,\n        },\n        options\n      );\n      state[PRIVATE_COLLEGE_CALENDAR_ID] = _calendar;\n    },\n    upsertPublicCollegeStories(\n      state,\n      action: PayloadAction<UpsertPublicCollegeStoriesPayload>\n    ) {\n      const { birth, canWorkingholiday, options } = action.payload;\n\n      const _calendar = createPublicCollegeCalendar(\n        {\n          birth: new Date(birth), // TODO: don't new here\n          canWorkingholiday,\n        },\n        options\n      );\n      state[PUBLIC_COLLEGE_CALENDAR_ID] = _calendar;\n    },\n  },\n});\n\nexport default templateCalendarTable.reducer;\n\nexport const {\n  upsertPrivateCollegeStories: upsertPrivateCollegeStoriesAction,\n  upsertPublicCollegeStories: upsertPublicCollegeStoriesAction,\n} = templateCalendarTable.actions;\n\nexport const selectPrivateCollegeCalendar = (state: RootState) =>\n  state.features.templateCalendar[PRIVATE_COLLEGE_CALENDAR_ID];\n\nexport const selectPublicCollegeCalendar = (state: RootState) =>\n  state.features.templateCalendar[PUBLIC_COLLEGE_CALENDAR_ID];\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { BaseCalendarContainer } from \"../atoms/BaseCalendarContainer\";\nimport { useResourceGroupLabelContentInTemplateCalendar } from \"../../hooks/useResourceGroupLabelContentInTemplateCalendar\";\nimport { addStoryAction } from \"../../redux/features/userCalendars\";\nimport { BaseStory } from \"../../core/story/BaseStory\";\n\nconst ableConfis = {\n  selectable: false,\n  editable: false,\n} as const;\n\nconst headerToolbar = {\n  left: \"\",\n  center: \"title\",\n  right: \"prev,next\",\n} as const;\n\nexport function BaseTemplate(props: any) {\n\n  // TODO: move to custom hooks\n  const dispatch = useDispatch();\n  const createClickHandel = React.useCallback(\n    ({ story, calendarId }: { story: BaseStory; calendarId: string }) => () => {\n      if (!window.confirm(\"Do you copy this story to My Calendar?\")) return;\n      dispatch(addStoryAction({ calendarId, story }));\n    },\n    [dispatch]\n  );\n\n  const {\n    resourceGroupLabelContent,\n  } = useResourceGroupLabelContentInTemplateCalendar({ createClickHandel });\n\n  return (\n    <BaseCalendarContainer\n      {...props}\n      initialDate={\"2020-06-01\"}\n      resourceGroupLabelContent={resourceGroupLabelContent}\n      headerToolbar={headerToolbar}\n      {...ableConfis}\n    />\n  );\n}\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport {\n  selectPrivateCollegeCalendar,\n  selectPublicCollegeCalendar,\n} from \"../redux/features/templateCalendarTable\";\nimport { selectUserCalendar } from \"../redux/features/userCalendars\";\nimport { updateStory } from \"../core/story/BaseStory\";\n\ntype ResourceContentProps = {\n  // REF: https://fullcalendar.io/docs/resource-group-render-hooks\n  groupValue: string;\n};\n\ntype Props = {\n  createClickHandel: Function;\n};\n\nexport const useResourceGroupLabelContentInTemplateCalendar = ({\n  createClickHandel,\n}: Props) => {\n  const privateCollegeTemplate = useSelector(selectPrivateCollegeCalendar);\n  const publicCollegeTemplate = useSelector(selectPublicCollegeCalendar);\n  const myCalendar = useSelector(selectUserCalendar);\n\n  const resourceGroupLabelContent = React.useCallback(\n    ({ groupValue: storyId }: ResourceContentProps) => {\n      if (!myCalendar) {\n        console.warn(\"cannot find selected myCalendar\");\n        return;\n      }\n\n      const myCalendarId = myCalendar.id;\n\n      if (!privateCollegeTemplate && !publicCollegeTemplate) {\n        console.warn(\"cannot find selected template calendar\");\n        return;\n      }\n\n      // story validation\n      const story = [\n        ...(privateCollegeTemplate?.stories ?? []),\n        ...(publicCollegeTemplate?.stories ?? []),\n      ].find((story) => story.id === storyId);\n      if (!story) {\n        console.warn(\"cannot find story\", storyId);\n        return;\n      }\n\n      // name handler\n      let name: string;\n      if (story.name) {\n        name = story.name;\n      } else {\n        console.warn(\"cannot find this story name\", storyId);\n        name = \"No Name\";\n      }\n\n      const updatedStory = updateStory(story, { calendarId: myCalendarId });\n\n      const clickHandle = createClickHandel({\n        calendarId: myCalendarId,\n        story: updatedStory,\n      });\n\n      const nameElement = document.createElement(\"i\");\n      nameElement.innerHTML = name + \" \"; // NOTE: space is for design, so not good way\n      nameElement.style.marginLeft = \"1rem\";\n\n      const buttonElement = document.createElement(\"button\");\n      buttonElement.innerHTML = \"Copy to my calendar\";\n      buttonElement.style.marginLeft = \"1rem\";\n      buttonElement.onclick = clickHandle;\n\n      const arrayOfDomNodes = [nameElement, buttonElement];\n      return { domNodes: arrayOfDomNodes };\n    },\n    [myCalendar, privateCollegeTemplate, publicCollegeTemplate, createClickHandel]\n  );\n\n  return { resourceGroupLabelContent };\n};\n","import React from \"react\";\nimport { BaseTemplate } from \"../molecules/BaseTemplate\";\nimport { usePrivateCollegeCalendar } from \"../../hooks/usePrivateCollegeCalendar\";\nimport { useUser } from \"../../hooks/useUser\";\nimport { useTemplateOptions } from \"../../hooks/useTemplateOptions\";\n\nexport function PrivateCollegeTemplate() {\n  const { birth, canWorkingholiday } = useUser();\n  const { resources, events, generate } = usePrivateCollegeCalendar();\n  const { options } = useTemplateOptions();\n\n  // TODO: prevent re-rendering when to select tab again\n  React.useEffect(() => {\n    generate({ birth, canWorkingholiday, options });\n  }, [generate, birth, canWorkingholiday, options]);\n\n  return <BaseTemplate events={events} resources={resources} />;\n}\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { BaseEvent } from \"../core/event/BaseEvent\";\nimport { BaseResource } from \"../core/resource/BaseResource\";\nimport { TemplateOption } from \"../core/calendar/BaseCalendar\";\nimport {\n  upsertPrivateCollegeStoriesAction,\n  selectPrivateCollegeCalendar,\n} from \"../redux/features/templateCalendarTable\";\n\nexport const usePrivateCollegeCalendar = () => {\n  const dispatch = useDispatch();\n  const generate = React.useCallback(\n    ({\n      birth,\n      canWorkingholiday,\n      options,\n    }: {\n      birth: string;\n      canWorkingholiday: boolean;\n      options: TemplateOption;\n    }) => {\n      dispatch(\n        upsertPrivateCollegeStoriesAction({ birth, canWorkingholiday, options })\n      );\n    },\n    [dispatch]\n  );\n\n  const calendar = useSelector(selectPrivateCollegeCalendar);\n\n  const stories = React.useMemo(() => calendar?.stories ?? [], [calendar]);\n\n  const resources = React.useMemo(\n    () =>\n      stories.reduce<BaseResource[]>(\n        (prev, story) => [...prev, ...story.resources],\n        []\n      ),\n    [stories]\n  );\n\n  const events = React.useMemo(\n    () =>\n      stories.reduce<BaseEvent[]>(\n        (prev, story) => [...prev, ...story.events],\n        [] as any[]\n      ),\n    [stories]\n  );\n\n  return { stories, generate, resources, events } as const;\n};\n","import React from \"react\";\nimport { BaseTemplate } from \"../molecules/BaseTemplate\";\nimport { usePublicCollegeCalendar } from \"../../hooks/usePublicCollegeCalendar\";\nimport { useUser } from \"../../hooks/useUser\";\nimport { useTemplateOptions } from \"../../hooks/useTemplateOptions\";\n\nexport function PublicCollegeTemplate() {\n  const { birth, canWorkingholiday } = useUser();\n  const { resources, events, generate } = usePublicCollegeCalendar();\n  const { options } = useTemplateOptions();\n\n  // TODO: prevent re-rendering when to select tab again\n  React.useEffect(() => {\n    generate({ birth, canWorkingholiday, options });\n  }, [generate, birth, canWorkingholiday, options]);\n\n  return <BaseTemplate events={events} resources={resources} />;\n}\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { BaseEvent } from \"../core/event/BaseEvent\";\nimport { BaseResource } from \"../core/resource/BaseResource\";\nimport { TemplateOption } from \"../core/calendar/BaseCalendar\";\nimport {\n  upsertPublicCollegeStoriesAction,\n  selectPublicCollegeCalendar,\n} from \"../redux/features/templateCalendarTable\";\n\nexport const usePublicCollegeCalendar = () => {\n  const dispatch = useDispatch();\n  const generate = React.useCallback(\n    (args: {\n      birth: string;\n      canWorkingholiday: boolean;\n      options: TemplateOption;\n    }) => {\n      dispatch(upsertPublicCollegeStoriesAction(args));\n    },\n    [dispatch]\n  );\n\n  const calendar = useSelector(selectPublicCollegeCalendar);\n\n  const stories = React.useMemo(() => calendar?.stories ?? [], [calendar]);\n\n  const resources = React.useMemo(\n    () =>\n      stories.reduce<BaseResource[]>(\n        (prev, story) => [...prev, ...story.resources],\n        []\n      ),\n    [stories]\n  );\n\n  const events = React.useMemo(\n    () =>\n      stories.reduce<BaseEvent[]>(\n        (prev, story) => [...prev, ...story.events],\n        [] as any[]\n      ),\n    [stories]\n  );\n\n  return { stories, generate, resources, events } as const;\n};\n","import React, { PropsWithChildren } from \"react\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Box from \"@material-ui/core/Box\";\n\nimport { PrivateCollegeTemplate } from \"./PrivateCollegeTemplate\";\nimport { PublicCollegeTemplate } from \"./PublicCollegeTemplate\";\n\nfunction TabPanel({\n  shouldShow,\n  children,\n}: PropsWithChildren<{\n  shouldShow: boolean;\n}>) {\n  return (\n    <div role=\"tabpanel\" style={{ display: shouldShow ? \"block\" : \"none\" }}>\n      <Box p={3}>{children}</Box>\n    </div>\n  );\n}\n\nexport function TemplateList() {\n  const [selectedIdx, setSelectedIdx] = React.useState(0);\n\n  const handleChange = React.useCallback((_event, newValue) => {\n    setSelectedIdx(newValue);\n  }, []);\n\n  return (\n    <div>\n      <Tabs value={selectedIdx} onChange={handleChange}>\n        <Tab label=\"Private College\" />\n        <Tab label=\"Public College\" />\n      </Tabs>\n      <TabPanel shouldShow={selectedIdx === 0}>\n        <PrivateCollegeTemplate />\n      </TabPanel>\n      <TabPanel shouldShow={selectedIdx === 1}>\n        <PublicCollegeTemplate />\n      </TabPanel>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { TemplateList } from \"../templates/TemplateList\";\nimport { UserCalendarCreater } from \"../molecules/UserCalendarCreater\";\nimport { useUserCalendar } from \"../../hooks/useUserCalendar\";\n\nconst TemplateHeader = () => <h2>Temapltes</h2>;\n\nexport function TemplateCalendarArea() {\n  const { calendar } = useUserCalendar();\n  const existsCalendar = !!calendar;\n  return (\n    <div>\n      {existsCalendar ? (\n        <div>\n          <TemplateHeader />\n          <TemplateList />\n        </div>\n      ) : (\n        <UserCalendarCreater />\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport Dialog from \"@material-ui/core/Dialog\";\n// import DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport { useModal } from \"../../hooks/useModal\";\nimport { useUserCalendar } from \"../../hooks/useUserCalendar\";\nimport { useUser } from \"../../hooks/useUser\";\nimport { ProfileCard } from \"../organisms/ProfileCard\";\n\nexport function IntroFlow() {\n  const { isOpen, close } = useModal(true);\n  const { init: initUserCalendar } = useUserCalendar();\n  const { birth } = useUser();\n\n  const handleFinish = React.useCallback(() => {\n    initUserCalendar(birth);\n    close();\n  }, [close, initUserCalendar, birth]);\n\n  return (\n    <Dialog open={isOpen}>\n      <DialogContent>\n        <ProfileCard />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleFinish} variant=\"contained\" color=\"primary\">\n          Create Calendar\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { ProfileCard } from \"../organisms/ProfileCard\";\nimport { Footer } from \"../molecules/Footer\";\nimport { Header } from \"../molecules/Header\";\nimport { UserCalendarArea } from \"../organisms/UserCalendarArea\";\nimport { TemplateOptionCard } from \"../molecules/TemplateOptionCard\";\nimport { TemplateCalendarArea } from \"../organisms/TemplateCalendarArea\";\nimport { IntroFlow } from \"./IntroFlow\";\n\nexport function CalendarPage() {\n  return (\n    <>\n      <Container>\n        <Header />\n        <ContentContainer>\n          <UserCalendarArea />\n\n          <ControllerContainer>\n            <ProfileCard />\n            <TemplateOptionCard />\n          </ControllerContainer>\n\n          <TemplateContainer>\n            <TemplateCalendarArea />\n          </TemplateContainer>\n        </ContentContainer>\n        <Footer />\n      </Container>\n\n      <IntroFlow />\n    </>\n  );\n}\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n`;\n\nconst ContentContainer = styled.div`\n  padding: 0 3rem;\n  display: grid;\n  gap: 5rem;\n`;\n\nconst ControllerContainer = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 2rem;\n`;\n\nconst TemplateContainer = styled.div``;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Button from \"@material-ui/core/Button\";\nimport { LogoImage } from \"../atoms/LogoImage\";\n\nexport function ErrorPage() {\n  const handleReset = React.useCallback(() => {\n    if(!window.confirm('Do you reset all data?')) return;\n    // TODO: put reset function\n    console.log(\"reset\");\n  }, []);\n\n  return (\n    <Container>\n      <LogoContainer>\n        <LogoImage />\n      </LogoContainer>\n      <div>\n        Sorry<br />\n        Something error happen.\n        <br />\n      </div>\n      <div>\n        <Button onClick={handleReset} variant=\"contained\" color=\"secondary\">\n          Reset data\n        </Button>\n      </div>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  height: 100vh;\n  display: grid;\n  place-items: center;\n  align-content: center;\n  gap: 2rem;\n`;\n\nconst LogoContainer = styled.div`\n  width: 10rem;\n  height: 10rem;\n`;\n","import React from \"react\";\nimport { ErrorPage } from \"./components/pages/ErrorPage\";\n\nexport class ErrorBoundary extends React.Component<any, { hasError: boolean }> {\n  constructor(props: any) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error: any) {\n    console.error(error);\n    return { hasError: true };\n  }\n\n  componentDidCatch(error: any, errorInfo: any) {\n    console.error(error);\n    console.error(errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorPage />;\n    }\n\n    return this.props.children;\n  }\n}\n","import React from \"react\";\nimport { MuiPickersUtilsProvider } from \"./providers/MuiPickersUtilsProvider\";\nimport { CalendarPage } from \"./components/pages/CalendarPage\";\nimport { ErrorBoundary } from \"./ErrorBoundary\";\nimport \"./reset.css\";\nimport \"./core.css\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <ErrorBoundary>\n        <MuiPickersUtilsProvider>\n          <CalendarPage />\n        </MuiPickersUtilsProvider>\n      </ErrorBoundary>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { combineReducers } from \"@reduxjs/toolkit\";\n\nimport userReducer from \"./features/user\";\nimport templateCalendarTableReducer from \"./features/templateCalendarTable\";\nimport templateOptionReducer from \"./features/templateOption\";\nimport userCalendarsReducer from \"./features/userCalendars\";\nimport eventModalReducer from \"./ui/eventModal\";\nimport storyModalReducer from \"./ui/storyModal\";\n\nconst uiReducer = combineReducers({\n  storyModal: storyModalReducer,\n  eventModal: eventModalReducer,\n});\n\nconst featuresReducer = combineReducers({\n  templateCalendar: templateCalendarTableReducer,\n  templateOption: templateOptionReducer,\n  userCalendars: userCalendarsReducer,\n  user: userReducer,\n});\n\nconst rootReducer = combineReducers({\n  features: featuresReducer,\n  ui: uiReducer,\n});\n\nexport type RootState = ReturnType<typeof rootReducer>;\n\nexport default rootReducer;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport rootReducer from \"./rootReducer\";\n\nconst store = configureStore({\n  reducer: rootReducer,\n});\n\nif (process.env.NODE_ENV === \"development\" && module.hot) {\n  module.hot.accept(\"./rootReducer\", () => {\n    const newRootReducer = require(\"./rootReducer\").default;\n    store.replaceReducer(newRootReducer);\n  });\n}\n\nexport type AppDispatch = typeof store.dispatch;\n\nexport default store;\n","import React, { PropsWithChildren } from \"react\";\nimport { Provider } from \"react-redux\";\nimport store from \"../redux/store\";\n\nexport function ReactReduxProvider<T>({ children }: PropsWithChildren<T>) {\n  return <Provider store={store}>{children}</Provider>;\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { ReactReduxProvider } from './providers/ReactReduxProvider'\n\nconst render = () => {\n  ReactDOM.render(\n    <React.StrictMode>\n      <ReactReduxProvider>\n        <App />\n      </ReactReduxProvider>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n  );\n};\n\nrender();\n\n// for redux\nif (process.env.NODE_ENV === \"development\" && module.hot) {\n  module.hot.accept(\"./App\", render);\n}\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.warn))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}