{"version":3,"sources":["providers/MuiPickersUtilsProvider.tsx","redux/features/user.ts","lib/age.ts","hooks/useUser.tsx","components/organisms/ProfileCard.tsx","constants/fullcalendar/settings.ts","constants/fullcalendar/options.ts","components/atoms/BaseFullCalendar.tsx","components/atoms/BaseCalendarContainer.tsx","core/calendar/PrivateCollegeCalendar/model.ts","constants/fullcalendar/templates.ts","lib/uuid.ts","lib/date.ts","core/event/BaseEvent.ts","core/resource/BaseResource.ts","core/story/BaseStory.ts","core/story/PrivateCollegeStory/build.ts","core/calendar/PrivateCollegeCalendar/createCalendar.ts","constants/school.ts","lib/util.ts","constants/visa.ts","redux/features/templateCalendarTable.ts","redux/features/userCalendars.ts","components/molecules/BaseTemplate.tsx","hooks/useResourceGroupLabelContentInTemplateCalendar.tsx","components/templates/PrivateCollegeTemplate.tsx","hooks/usePrivateCollegeCalendar.tsx","components/templates/PublicCollegeTemplate.tsx","components/templates/EslTemplate.tsx","components/templates/TemplateList.tsx","components/atoms/LogoImage.tsx","constants/meta.ts","components/molecules/Footer.tsx","components/atoms/AboutModal.tsx","components/molecules/AboutContent.tsx","components/molecules/Header.tsx","hooks/useModal.tsx","core/resource/createProfileResources.ts","core/event/createProfileEvents.ts","hooks/useUserCalendar.ts","core/calendar/UserCalendar/createUserCalendar.ts","core/story/ProfileStory/createProfileStory.ts","redux/ui/storyModal.ts","redux/ui/eventModal.ts","hooks/useStory.tsx","components/molecules/StoryModal.tsx","hooks/useResource.tsx","hooks/useEvent.tsx","components/molecules/EventModal.tsx","components/molecules/UserCalendarContainer.tsx","hooks/useStoryModal.tsx","hooks/useEventModal.tsx","hooks/useResourceGroupLabelContentInUserCalendar.tsx","components/molecules/TemplateOptionCard.tsx","components/pages/CalendarPage.tsx","App.tsx","reportWebVitals.ts","redux/rootReducer.ts","redux/store.ts","providers/ReactReduxProvider.tsx","index.tsx"],"names":["MuiPickersUtilsProvider","children","utils","DateFnsUtils","personaBirth","addYears","Date","toISOString","userSlice","createSlice","name","initialState","birthday","age","canWorkingholiday","reducers","updateBirthday","state","action","payload","_birthday","today","birthDate","getFullYear","m","getMonth","getDate","calcAge","toggleWorkingholiday","_action","actions","updateBirthdayAction","toggleWorkingholidayAction","selectUser","features","user","useUser","dispatch","useDispatch","setBirth","React","useCallback","birth","useSelector","ProfileCard","handleDateChange","date","handleToggleWorkingholiday","Card","CardContent","InnerContainer","Avatar","alt","TextField","id","label","disabled","InputProps","readOnly","InputLabelProps","shrink","type","value","DatePicker","disableFuture","openTo","format","views","onChange","Checkbox","checked","styled","div","FIELD1","FIELD2","NAME_OF_STORY_ID","NAME_OF_ORDER","MY_CALENDAR_ID","RESOURCE_ID__SHARED__AGE","RESOURCE_ID__SHARED__LIMIT","MY_TIME_LINE_NAME","headerToolbar","left","center","right","initialView","resourceGroupField","duration","year","buttonText","resourceConfigs","resourceOrder","resourcesInitiallyExpanded","resourceAreaColumns","field","headerContent","FULL_CALENDAR_CONFIGS","slotLabelFormat","month","schedulerLicenseKey","nowIndicator","height","BaseFullCalendar","props","plugins","interactionPlugin","resourceTimelinePlugin","listPlugin","BaseCalendarContainer","calendarId","DARK_BLUE","FIELD__H1__VISA","FIELD__H1__STATUS","RESOURCE_TEMPLATE__VISA_STUDY","RESOURCE_TEMPLATE__VISA_COOP","RESOURCE_TEMPLATE__WORKING_HOLIDAY_COOP","RESOURCE_TEMPLATE__STUDENT_STATUS","RESOURCE_TEMPLATE__WORKER_STATUS","uuid","uuidV4","convertIsoToDateTime","isoStr","split","initEvent","_resourceId","resourceId","_storyId","storyId","_title","title","start","end","extendedProps","initResource","createStoryName","replace","VISA_BACKGROUND_COLOR","STATUS_BACKGROUND_COLOR","generateStory","startDate","resources","events","coopVisaResourceId","push","addMonths","studyVisaResourceId","workingholidayResourceId","dateAsStartWorkingHoliday","setMonth","workerStatusResourceId","studentStatusResourceId","startMonths","addingNumbers","stop","step","a","b","range","generateStoryList","map","num","flatMap","build","templateCalendarTable","PrivateCollegeCalendarId","undefined","upsertPrivateCollegeStories","_calendar","stories","createCalendar","upsertPrivateCollegeStoriesAction","selectPrivateCollegeCalendar","templateCalendar","userCalendarsSlice","calendars","updateCalendars","pushResource","resource","calendarIdx","findIndex","calendar","console","warn","storyIdx","story","updateResources","newResources","removeResource","filter","addStory","idx","removeStory","updateStory","newStory","addEvent","event","removeEvent","eventId","_event","updateEvent","newEvent","eventIdx","updateCalendarsAction","pushResourceAction","removeResourceAction","addStoryAction","removeStoryAction","updateStoryAction","addEventAction","removeEventAction","updateEventAction","selectUserCalendar","userCalendars","ableConfis","selectable","editable","BaseTemplate","resourceGroupLabelContent","createClickHandel","groupValue","find","clickHandle","nameElement","document","createElement","innerHTML","style","marginLeft","buttonElement","onclick","domNodes","useResourceGroupLabelContentInTemplateCalendar","window","confirm","initialDate","PrivateCollegeTemplate","generate","useMemo","reduce","prev","usePrivateCollegeCalendar","useEffect","PublicCollegeTemplate","EslTemplate","TabPanel","shouldShow","role","Box","p","TemplateList","useState","selectedIdx","setSelectedIdx","handleChange","newValue","Tabs","Tab","LogoImage","Img","src","img","THIS_GITHUB_URL","Footer","Container","LogoText","LogoImageContainer","href","target","rel","AboutModal","isOpen","onClose","Dialog","open","DialogTitle","DialogContent","dividers","AboutContent","AuthorInfo","Header","init","setIsOpen","close","toggle","useModal","Title","ButtonContainer","Button","variant","onClick","span","createProfileResources","createProfileEvents","years","list","i","getRangeNumbers","getLastYear","workingHolidayLimitEvents","createWorkingHolidayLimitEvents","ageEventList","index","setFullYear","lastYearDate","endDate","endOfLimit","endOfApplication","useUserCalendar","_birth","createProfileStory","select","info","startStr","endStr","slice","_payload","pop","selectIsOpen","ui","storyModal","selectStoryModal","selectStory","_story","pushAction","popAction","eventModal","selectEventModal","selectEvent","useStory","remove","update","idSet","data","params","curr","newResource","create","_calendarId","initStory","StoryModal","useForm","register","handleSubmit","createStory","_resources","lastResource","order","length","_order","_resource","useResource","handleRemoveStory","handleRemoveResource","handleAddResource","handleNewStory","onSubmit","DialogTitleInner","inputRef","defaultValue","fieldName","Fieldset","ref","color","AddResourceButtonContainer","UpdateButtonContainer","DialogActions","fieldset","useEvent","Object","assign","EventModal","onRemove","onUpdate","UserCalendarContainer","useStoryModal","pushStoryModal","popStoryModal","isOpenStoryModal","useEventModal","popEventModal","isOpenEventModal","createOpenHandle","openHandle","containerEl","display","justifyContent","appendChild","useResourceGroupLabelContentInUserCalendar","pushStoryModalAction","initUserCalendar","click","pushEventModalAction","eventClick","TemplateOptionCard","schoolPeriod","setSchoolPeriod","coopPeriod","setCoopPeriod","handleChangeSchoolPeriod","e","maybeNum","parseInt","Number","isInteger","handleChangeCoopPeriod","min","max","Array","from","_","CheckboxListItem","TemplateHeader","CalendarPage","ContentContainer","ControllerContainer","TemplateContainer","App","className","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","uiReducer","combineReducers","storyModalReducer","eventModalReducer","featuresReducer","templateCalendarTableReducer","userCalendarsReducer","userReducer","rootReducer","store","configureStore","reducer","ReactReduxProvider","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b2d1cd76.chunk.js","sourcesContent":["import React, { PropsWithChildren } from \"react\";\nimport { MuiPickersUtilsProvider as RawMuiPickersUtilsProvider } from \"@material-ui/pickers\";\nimport DateFnsUtils from \"@date-io/date-fns\";\n\nexport function MuiPickersUtilsProvider<T>({ children }: PropsWithChildren<T>) {\n  return (\n    <RawMuiPickersUtilsProvider utils={DateFnsUtils}>\n      {children}\n    </RawMuiPickersUtilsProvider>\n  );\n}\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { calcAge } from \"../../lib/age\";\nimport { addYears } from \"date-fns\";\nimport { RootState } from \"../rootReducer\";\n\nconst PERSONA_AGE = 25;\nconst personaBirth = addYears(new Date(), -PERSONA_AGE).toISOString();\n\ntype UpdatePayload = {\n  birthday: string;\n};\n\nconst userSlice = createSlice({\n  name: \"user\",\n  initialState: {\n    birthday: personaBirth,\n    age: PERSONA_AGE,\n    canWorkingholiday: true,\n  },\n  reducers: {\n    updateBirthday(state, action: PayloadAction<UpdatePayload>) {\n      const { birthday } = action.payload;\n      state.birthday = birthday;\n      state.age = calcAge(birthday);\n    },\n    toggleWorkingholiday(state, _action: PayloadAction<undefined>) {\n      state.canWorkingholiday = !state.canWorkingholiday;\n    },\n  },\n});\n\nexport const {\n  updateBirthday: updateBirthdayAction,\n  toggleWorkingholiday: toggleWorkingholidayAction,\n} = userSlice.actions;\n\nexport default userSlice.reducer;\n\nexport const selectUser = (state: RootState) => state.features.user;\n","export const getRangeNumbers = (start: number, end: number) => {\n  let list = [] as number[];\n  for (let i = start; i <= end; i++) {\n    list.push(i);\n  }\n  return list;\n};\n\n// REF: https://stackoverflow.com/a/7091965/8842333\nexport const calcAge = (_birthday: string | Date) => {\n  const today = new Date();\n  const birthDate = new Date(_birthday);\n  let age = today.getFullYear() - birthDate.getFullYear();\n\n  const m = today.getMonth() - birthDate.getMonth();\n  if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\n    age--;\n  }\n  return age;\n};\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  updateBirthdayAction,\n  selectUser,\n  toggleWorkingholidayAction,\n} from \"../redux/features/user\";\n\nexport const useUser = () => {\n  const dispatch = useDispatch();\n\n  const setBirth = React.useCallback(\n    (birth: string) => dispatch(updateBirthdayAction({ birthday: birth })),\n    [dispatch]\n  );\n\n  const toggleWorkingholiday = React.useCallback(() => {\n    dispatch(toggleWorkingholidayAction());\n  }, [dispatch]);\n\n  const { birthday, age, canWorkingholiday } = useSelector(selectUser);\n\n  return {\n    birth: birthday,\n    age,\n    setBirth,\n    toggleWorkingholiday,\n    canWorkingholiday\n  } as const;\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { DatePicker } from \"@material-ui/pickers\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\n\nimport { useUser } from \"../../hooks/useUser\";\n\nexport function ProfileCard() {\n  const {\n    birth,\n    age,\n    setBirth,\n    toggleWorkingholiday,\n    canWorkingholiday,\n  } = useUser();\n\n  const handleDateChange = React.useCallback(\n    (date: Date | null) => {\n      if (!date) return;\n      setBirth(date.toISOString());\n    },\n    [setBirth]\n  );\n\n  const handleToggleWorkingholiday = React.useCallback(() => {\n    toggleWorkingholiday();\n  }, [toggleWorkingholiday]);\n\n  return (\n    <Card>\n      <CardContent>\n        <h2>Profile</h2>\n        <InnerContainer>\n          <Avatar alt=\"you\" />\n          <TextField\n            id=\"age-text\"\n            label=\"Your Age\"\n            disabled\n            InputProps={{\n              readOnly: true,\n            }}\n            InputLabelProps={{\n              shrink: true,\n            }}\n            type=\"number\"\n            value={age}\n          />\n          <DatePicker\n            disableFuture\n            openTo=\"year\"\n            format=\"yyyy-MM-dd\"\n            label=\"Date of birth\"\n            views={[\"year\", \"month\", \"date\"]}\n            value={birth}\n            onChange={handleDateChange}\n          />\n          <div>\n            <span>with working holiday</span>\n            <Checkbox\n              checked={canWorkingholiday}\n              onChange={handleToggleWorkingholiday}\n            />\n          </div>\n        </InnerContainer>\n      </CardContent>\n    </Card>\n  );\n}\n\nconst InnerContainer = styled.div`\n  display: flex;\n  gap: 1rem;\n  padding: 2rem;\n`;\n","// field name\nexport const FIELD1 = \"FIELD1\";\nexport const FIELD2 = \"FIELD2\";\n\n// keys\nexport const NAME_OF_STORY_ID = \"storyId\";\nexport const NAME_OF_ORDER = \"order\";\nexport const RESOURCE_NAME_KEY = \"RESOURCE_NAME_KEY\";\n\n// calendar ID\nexport const MY_CALENDAR_ID = \"MY_CALENDAR_ID\";\nexport const COMMUNITY_COLLEGE_CALENDAR_ID = \"COMMUNITY_COLLEGE\";\n\n// story ID\nexport const PROFILE_ID = \"PROFILE_ID\";\n\n// resouce ID\nexport const RESOURCE_ID__SHARED__AGE = \"RESOURCE_ID__SHARED__AGE\";\nexport const RESOURCE_ID__SHARED__LIMIT = \"RESOURCE_ID__SHARED__LIMIT\";\nexport const RESOURCE_ID__VISA__STUDY = \"RESOURCE_ID__VISA__STUDY\";\nexport const RESOURCE_ID__VISA__COOP = \"RESOURCE_ID__VISA__COOP\";\nexport const RESOURCE_ID__VISA__WORKING_HOLIDAY =\n  \"RESOURCE_ID__VISA__WORKING_HOLIDAY\";\nexport const RESOURCE_ID__STATUS__WORKER = \"RESOURCE_ID__STATUS__WORKER\";\nexport const RESOURCE_ID__STATUS__STUDENT = \"RESOURCE_ID__STATUS__STUDENT\";\nexport const RESOURCE_ID__ETC__CUSTOM = \"RESOURCE_ID__ETC__CUSTOM\";\nexport type RESOURCE_ID =\n  | typeof RESOURCE_ID__SHARED__AGE\n  | typeof RESOURCE_ID__SHARED__LIMIT\n  | typeof RESOURCE_ID__VISA__STUDY\n  | typeof RESOURCE_ID__VISA__COOP\n  | typeof RESOURCE_ID__VISA__WORKING_HOLIDAY\n  | typeof RESOURCE_ID__STATUS__WORKER\n  | typeof RESOURCE_ID__STATUS__STUDENT\n  | typeof RESOURCE_ID__ETC__CUSTOM;\n","import { NAME_OF_STORY_ID, NAME_OF_ORDER, FIELD1, FIELD2 } from \"./settings\";\n\nexport const MY_TIME_LINE_NAME = \"MY_TIME_LINE_NAME\";\n\nexport const AGE_OF_START_STORY = 21;\n\nconst slotLabelFormat = [{ year: \"numeric\" }, { month: \"numeric\" }];\n\nconst headerToolbar = {\n  left: \"today prev,next\",\n  center: \"title\",\n  right: `${MY_TIME_LINE_NAME},listMonth`,\n} as const;\n\nconst initialView = { initialView: MY_TIME_LINE_NAME } as const;\n\nconst resourceGroupField = { resourceGroupField: NAME_OF_STORY_ID } as const;\n\nconst schedulerLicenseKey = {\n  schedulerLicenseKey: \"GPL-My-Project-Is-Open-Source\",\n} as const;\n\nconst views = {\n  [MY_TIME_LINE_NAME]: {\n    type: \"resourceTimelineYear\",\n    duration: { year: 15 },\n    buttonText: \"TIME_LINE\",\n  },\n} as const;\n\nconst nowIndicator = {\n  nowIndicator: true,\n} as const;\n\nconst resourceConfigs = {\n  resourceOrder: NAME_OF_ORDER,\n  resourcesInitiallyExpanded: false,\n} as const;\n\nconst styleConfigs = {\n  height: 700,\n};\n\nconst resourceAreaColumns = [\n  {\n    field: FIELD1,\n    headerContent: \"Field1\",\n  },\n  {\n    field: FIELD2,\n    headerContent: \"Field2\",\n  },\n];\n\nexport const FULL_CALENDAR_CONFIGS = {\n  views,\n  headerToolbar,\n  slotLabelFormat,\n  resourceAreaColumns,\n  ...initialView,\n  ...resourceGroupField,\n  ...schedulerLicenseKey,\n  ...nowIndicator,\n  ...resourceConfigs,\n  ...styleConfigs,\n} as const;\n","import React, { PropsWithChildren } from \"react\";\nimport FullCalendarLib from \"@fullcalendar/react\";\nimport resourceTimelinePlugin from \"@fullcalendar/resource-timeline\";\nimport listPlugin from \"@fullcalendar/list\";\nimport interactionPlugin from \"@fullcalendar/interaction\";\nimport { FULL_CALENDAR_CONFIGS } from \"../../constants/fullcalendar/options\";\n\nexport function BaseFullCalendar<T>(props: PropsWithChildren<T>) {\n  return (\n    <FullCalendarLib\n      {...FULL_CALENDAR_CONFIGS}\n      plugins={[interactionPlugin, resourceTimelinePlugin, listPlugin]}\n      {...props}\n    />\n  );\n}\n","import React from \"react\";\nimport { BaseFullCalendar } from \"./BaseFullCalendar\";\n\nexport function BaseCalendarContainer(props: any) {\n  const args = {\n    // \n  };\n\n  return <BaseFullCalendar {...props} {...args} />;\n}\n","import { BaseCalendar } from \"../BaseCalendar\";\nimport { COMMUNITY_COLLEGE_CALENDAR_ID } from \"../../../constants/fullcalendar/settings\";\n\nexport type PrivateCollegeCalendar = BaseCalendar;\n\nexport const calendarId = COMMUNITY_COLLEGE_CALENDAR_ID;\n","import { FIELD1, FIELD2 } from \"./settings\";\n\nexport const DARK_BLUE = \"#00008b\";\n\nconst FIELD__H1__VISA = \"VISA\";\nconst FIELD__H1__STATUS = \"STATUS\";\n\nexport const RESOURCE_TEMPLATE__VISA_STUDY = {\n  [FIELD1]: FIELD__H1__VISA,\n  [FIELD2]: \"Study VISA\",\n  eventBorderColor: DARK_BLUE,\n};\n\nexport const RESOURCE_TEMPLATE__VISA_COOP = {\n  [FIELD1]: FIELD__H1__VISA,\n  [FIELD2]: \"Co-op VISA\",\n  eventBorderColor: DARK_BLUE,\n};\n\nexport const RESOURCE_TEMPLATE__WORKING_HOLIDAY_COOP = {\n  [FIELD1]: FIELD__H1__VISA,\n  [FIELD2]: \"Working Holiday VISA\",\n  eventBorderColor: DARK_BLUE,\n};\n\nexport const RESOURCE_TEMPLATE__STUDENT_STATUS = {\n  [FIELD1]: FIELD__H1__STATUS,\n  [FIELD2]: \"Student\",\n  eventBorderColor: DARK_BLUE,\n};\n\nexport const RESOURCE_TEMPLATE__WORKER_STATUS = {\n  [FIELD1]: FIELD__H1__STATUS,\n  [FIELD2]: \"Worker\",\n  eventBorderColor: DARK_BLUE,\n};\n","import { v4 as uuidV4 } from \"uuid\";\n\nexport function uuid() {\n  return uuidV4();\n}\n","export const convertIsoToDateTime = (isoStr: string) => isoStr.split(\"T\")[0];\n\nexport const convertIsoToYearAndMonth = (isoStr: string) =>\n  convertIsoToDateTime(isoStr).replace(/-[0-9][0-9]$/, \"\");\n","import { EventInput } from \"@fullcalendar/react\";\nimport { uuid } from \"../../lib/uuid\";\n\nexport type BaseEvent = EventInput & {\n  extendedProps: {\n    calendarId: string;\n    storyId: string;\n  };\n};\n\nexport const initEvent = (props?: Partial<BaseEvent>): BaseEvent => {\n  const {\n    id,\n    calendarId,\n    resourceId: _resourceId,\n    storyId: _storyId,\n    title: _title,\n    start,\n    end,\n  } = props ?? {};\n\n  const storyId = _storyId ?? uuid();\n  const resourceId = _resourceId ?? uuid();\n  const title = _title ?? \"New Event\";\n\n  return {\n    id: id ?? uuid(),\n    resourceId,\n    storyId,\n    title,\n    start: start ?? new Date().toISOString(),\n    end: end ?? new Date().toISOString(),\n    extendedProps: {\n      calendarId,\n      storyId,\n      resourceId,\n    },\n  };\n};\n\nexport const updateEvent = (\n  event: BaseEvent,\n  params: Partial<Omit<BaseEvent, \"id\" | \"storyId\">>\n): BaseEvent => {\n  const title = params.title;\n  const newEvent = Object.assign(\n    { ...event },\n    title !== undefined && { title }\n  );\n\n  return newEvent;\n};\n","import { uuid } from \"../../lib/uuid\";\nimport {\n  NAME_OF_ORDER,\n  NAME_OF_STORY_ID,\n  FIELD1,\n  FIELD2,\n} from \"../../constants/fullcalendar/settings\";\n\nexport type BaseResource = {\n  id: string;\n  calendarId: string;\n  [FIELD1]: string;\n  [FIELD2]: string;\n  [NAME_OF_STORY_ID]: string;\n  [NAME_OF_ORDER]?: number;\n  eventBorderColor?: string;\n};\n\nexport const initResource = (props?: Partial<BaseResource>): BaseResource => {\n  const { id, calendarId, storyId } = props ?? {};\n  return {\n    id: id ?? uuid(),\n    calendarId: calendarId ?? uuid(),\n    [NAME_OF_STORY_ID]: storyId ?? uuid(),\n    [NAME_OF_ORDER]: 1,\n    [FIELD1]: \"Field1\",\n    [FIELD2]: \"Field2\",\n  };\n};\n","import { convertIsoToYearAndMonth } from \"../../lib/date\";\nimport { BaseEvent, initEvent } from \"../event/BaseEvent\";\nimport { BaseResource, initResource } from \"../resource/BaseResource\";\nimport { uuid } from \"../../lib/uuid\";\n\nexport type BaseStory = {\n  id: string;\n  calendarId: string;\n  events: BaseEvent[];\n  resources: BaseResource[];\n  name: string;\n};\n\nexport const removeEvent = (story: BaseStory, eventId: string): BaseStory => {\n  const newEvents = story.events.filter((event) => event.id !== eventId);\n  return { ...story, events: newEvents };\n};\n\nexport const createStoryName = (birth: Date) => {\n  return \"from \" + convertIsoToYearAndMonth(birth.toISOString());\n};\n\nexport const initStory = (props?: Partial<BaseStory>): BaseStory => {\n  const { id, calendarId: _calendarId, events, resources, name } = props ?? {};\n\n  const storyId = id ?? uuid();\n  const calendarId = _calendarId ?? uuid();\n  const eventId = uuid();\n  const _events = events ?? [initEvent({ id: eventId, storyId })];\n  const _resources = resources ?? [initResource({ calendarId, storyId })];\n\n  return {\n    id: storyId,\n    calendarId,\n    events: _events,\n    resources: _resources,\n    name: name ?? \"No Name\",\n  };\n};\n\nexport const updateStory = (story: BaseStory, params: Partial<BaseStory>) => {\n  if (!!params.name) story = { ...story, name: params.name };\n  if (!!params.resources) {\n    const newResources = params.resources.reduce((prev, curr) => {\n      const idx = story.resources.findIndex(\n        (resource) => resource.id === curr.id\n      );\n\n      const shouldCreate = idx === -1;\n      if (shouldCreate) {\n        // TODO: create case\n        console.warn(\"not upsert feature on story yet\");\n        return prev;\n      }\n\n      // Update case\n      const resource = story.resources[idx];\n      const newResource = { ...resource, ...curr };\n      return [...prev, newResource];\n    }, [] as BaseResource[]);\n    story = { ...story, resources: newResources };\n  }\n  return story;\n};\n","import { addMonths, addYears, setMonth } from \"date-fns\";\nimport {\n  RESOURCE_TEMPLATE__VISA_STUDY,\n  RESOURCE_TEMPLATE__VISA_COOP,\n  RESOURCE_TEMPLATE__WORKING_HOLIDAY_COOP,\n  RESOURCE_TEMPLATE__STUDENT_STATUS,\n  RESOURCE_TEMPLATE__WORKER_STATUS,\n} from \"../../../constants/fullcalendar/templates\";\nimport {\n  NAME_OF_STORY_ID,\n  NAME_OF_ORDER,\n} from \"../../../constants/fullcalendar/settings\";\nimport { uuid } from \"../../../lib/uuid\";\nimport { PrivateCollegeStory } from \"./model\";\nimport { createStoryName } from \"../BaseStory\";\nimport { BaseEvent } from \"../../event/BaseEvent\";\nimport { BaseResource } from \"../../resource/BaseResource\";\n\nconst VISA_BACKGROUND_COLOR = \"#8fbc8b\";\nconst STATUS_BACKGROUND_COLOR = \"#ffd700\";\nconst WH_WARN_BACKGROUND_COLOR = \"#e73758\";\n\nexport const build = ({\n  startDate,\n  calendarId,\n  canWorkingholiday,\n}: {\n  startDate: Date;\n  calendarId: string;\n  canWorkingholiday: boolean;\n}): PrivateCollegeStory => {\n  const storyId = uuid();\n  const name = createStoryName(startDate);\n  const [resources, events] = generateStory({\n    calendarId,\n    storyId,\n    startDate,\n    canWorkingholiday,\n  });\n  return {\n    id: storyId,\n    calendarId,\n    name,\n    events,\n    resources,\n  };\n};\n\nconst generateStory = ({\n  calendarId,\n  storyId,\n  startDate,\n  canWorkingholiday,\n}: {\n  calendarId: string;\n  storyId: string;\n  startDate: Date;\n  canWorkingholiday: boolean;\n}) => {\n  let resources = [] as BaseResource[];\n  let events = [] as BaseEvent[];\n  const withCoop = true; // TODO:\n\n  if (withCoop) {\n    // Coop Visa\n    const coopVisaResourceId = uuid();\n    resources.push({\n      ...RESOURCE_TEMPLATE__VISA_COOP,\n      id: coopVisaResourceId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 1,\n    });\n    events.push({\n      id: uuid(),\n      resourceId: coopVisaResourceId,\n      storyId,\n      start: startDate.toISOString(),\n      end: addMonths(startDate, 12 * 2).toISOString(),\n      [NAME_OF_ORDER]: 1,\n      backgroundColor: VISA_BACKGROUND_COLOR,\n      extendedProps: {\n        resourceId: coopVisaResourceId,\n        calendarId,\n        storyId,\n      },\n    });\n  }\n\n  // StudyVisa\n  const studyVisaResourceId = uuid();\n  resources.push({\n    ...RESOURCE_TEMPLATE__VISA_STUDY,\n    id: studyVisaResourceId,\n    calendarId,\n    [NAME_OF_STORY_ID]: storyId,\n    [NAME_OF_ORDER]: 2,\n  });\n  events.push({\n    id: uuid(),\n    resourceId: studyVisaResourceId,\n    storyId,\n    start: startDate.toISOString(),\n    end: addMonths(startDate, 12 * 2).toISOString(),\n    [NAME_OF_ORDER]: 2,\n    backgroundColor: VISA_BACKGROUND_COLOR,\n    extendedProps: {\n      resourceId: studyVisaResourceId,\n      calendarId,\n      storyId,\n    },\n  });\n\n  if (canWorkingholiday) {\n    const workingholidayResourceId = uuid();\n    resources.push({\n      ...RESOURCE_TEMPLATE__WORKING_HOLIDAY_COOP,\n      id: workingholidayResourceId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 3,\n    });\n    const dateAsStartWorkingHoliday = addMonths(startDate, 12 * 2);\n    events.push({\n      // workingHolidayVisaEvent\n      id: uuid(),\n      resourceId: workingholidayResourceId,\n      storyId,\n      start: dateAsStartWorkingHoliday.toISOString(),\n      end: addMonths(dateAsStartWorkingHoliday, 12 * 1).toISOString(),\n      [NAME_OF_ORDER]: 3,\n      backgroundColor: VISA_BACKGROUND_COLOR,\n      extendedProps: {\n        resourceId: workingholidayResourceId,\n        calendarId,\n        storyId,\n      },\n    });\n    events.push({\n      // preWorkingHolidayVisaEvent\n      id: uuid(),\n      resourceId: workingholidayResourceId,\n      storyId,\n      start: setMonth(addYears(dateAsStartWorkingHoliday, -1), 8).toISOString(),\n      end: dateAsStartWorkingHoliday.toISOString(),\n      [NAME_OF_ORDER]: 3,\n      backgroundColor: WH_WARN_BACKGROUND_COLOR,\n      extendedProps: {\n        resourceId: workingholidayResourceId,\n        calendarId,\n        storyId,\n      },\n    });\n\n    // worker status\n    const workerStatusResourceId = uuid();\n    resources.push({\n      ...RESOURCE_TEMPLATE__WORKER_STATUS,\n      id: workerStatusResourceId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 5,\n    });\n    events.push({\n      id: uuid(),\n      resourceId: workerStatusResourceId,\n      storyId,\n      start: addMonths(startDate, 12 * 1).toISOString(),\n      end: addMonths(startDate, 12 * 3).toISOString(),\n      [NAME_OF_ORDER]: 5,\n      eventBackgroundCoor: STATUS_BACKGROUND_COLOR,\n      extendedProps: {\n        resourceId: workerStatusResourceId,\n        calendarId,\n        storyId,\n      },\n    });\n  }\n\n  // student status\n  const studentStatusResourceId = uuid();\n  resources.push({\n    ...RESOURCE_TEMPLATE__STUDENT_STATUS,\n    id: studentStatusResourceId,\n    calendarId,\n    [NAME_OF_STORY_ID]: storyId,\n    [NAME_OF_ORDER]: 4,\n  });\n  events.push({\n    id: uuid(),\n    resourceId: studentStatusResourceId,\n    storyId,\n    start: startDate.toISOString(),\n    end: addMonths(startDate, 12 * 2).toISOString(),\n    [NAME_OF_ORDER]: 4,\n    eventBackgroundCoor: STATUS_BACKGROUND_COLOR,\n    extendedProps: {\n      resourceId: studentStatusResourceId,\n      calendarId,\n      storyId,\n    },\n  });\n\n  return [[...resources], [...events]] as [BaseResource[], BaseEvent[]];\n};\n","import { addYears, addMonths } from \"date-fns\";\nimport { PrivateCollegeCalendar, calendarId } from \"./model\";\nimport { AGE_OF_START_STORY } from \"../../../constants/fullcalendar/options\";\nimport { WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE } from \"../../../constants/visa\";\nimport { COMMUNITY_COLLEGE_EXAMPLE1 } from \"../../../constants/school\";\nimport { range } from \"../../../lib/util\";\nimport { build } from \"../../story/PrivateCollegeStory/build\";\nimport { BaseStory } from \"../../story/BaseStory\";\n\nconst startMonths = COMMUNITY_COLLEGE_EXAMPLE1.startMonths;\n\nconst addingNumbers = range(\n  AGE_OF_START_STORY,\n  WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE\n);\n\nconst generateStoryList = ({\n  birth,\n  calendarId,\n  canWorkingholiday,\n}: {\n  birth: Date;\n  calendarId: string;\n  canWorkingholiday: boolean;\n}): BaseStory[] => {\n  return addingNumbers\n    .map((num) => addYears(birth, num))\n    .flatMap((startDate) => {\n      const datesInYear = startMonths.map((month) =>\n        addMonths(startDate, month)\n      );\n      return datesInYear;\n    })\n    .map((startDate) => {\n      return build({ startDate, calendarId, canWorkingholiday });\n    });\n};\n\nexport const createCalendar = ({\n  birth,\n  canWorkingholiday,\n}: {\n  birth: Date;\n  canWorkingholiday: boolean;\n}): PrivateCollegeCalendar => {\n  const stories = generateStoryList({ birth, calendarId, canWorkingholiday });\n  return {\n    id: calendarId,\n    stories,\n  };\n};\n","export const COMMUNITY_COLLEGE_EXAMPLE1 = {\n  name: \"example college\",\n  startMonths: [1, 5, 9],\n} as const;\n","// REF: https://stackoverflow.com/a/15453499/8842333\nexport function range(start: number, stop: number, step?: number) {\n  var a = [start],\n    b = start;\n  while (b < stop) {\n    a.push((b += step || 1));\n  }\n  return a;\n}\n","// working holiday have to be applied by age of 31.\nexport const WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE = 31;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { createCalendar } from \"../../core/calendar/PrivateCollegeCalendar/createCalendar\";\nimport { calendarId as PrivateCollegeCalendarId } from \"../../core/calendar/PrivateCollegeCalendar/model\";\nimport { BaseCalendar } from \"../../core/calendar/BaseCalendar\";\nimport { RootState } from \"../rootReducer\";\n\ntype upsertPrivateCollegeStoriesPayload = {\n  birth: string;\n  canWorkingholiday: boolean;\n};\n\nconst templateCalendarTable = createSlice({\n  name: \"templateCalendarTable\",\n  initialState: {\n    [PrivateCollegeCalendarId]: undefined as BaseCalendar | undefined,\n  },\n  reducers: {\n    upsertPrivateCollegeStories(\n      state,\n      action: PayloadAction<upsertPrivateCollegeStoriesPayload>\n    ) {\n      const { birth, canWorkingholiday } = action.payload;\n      const _calendar = createCalendar({\n        birth: new Date(birth),\n        canWorkingholiday,\n      });\n      state[PrivateCollegeCalendarId] = _calendar;\n    },\n  },\n});\n\nexport default templateCalendarTable.reducer;\n\nexport const {\n  upsertPrivateCollegeStories: upsertPrivateCollegeStoriesAction,\n} = templateCalendarTable.actions;\n\nexport const selectPrivateCollegeCalendar = (state: RootState) =>\n  state.features.templateCalendar[PrivateCollegeCalendarId];\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../rootReducer\";\nimport { BaseCalendar } from \"../../core/calendar/BaseCalendar\";\nimport { BaseStory } from \"../../core/story/BaseStory\";\nimport { BaseEvent } from \"../../core/event/BaseEvent\";\nimport { BaseResource } from \"../../core/resource/BaseResource\";\n\ntype Calendar = BaseCalendar;\ntype UpdateCalendarsPayload = { calendars: Calendar[] };\ntype PushRsourceAction = {\n  calendarId: string;\n  storyId: string;\n  resource: BaseResource;\n};\ntype UpdateResourcesPayload = {\n  calendarId: string;\n  storyId: string;\n  newResources: BaseResource[];\n};\ntype RemoveResourcePayload = {\n  calendarId: string;\n  storyId: string;\n  resourceId: string;\n};\ntype AddStoryPayload = { calendarId: string; story: BaseStory };\ntype RemoveStoryPayload = { calendarId: string; storyId: string };\ntype UpdateStoryPayload = {\n  calendarId: string;\n  storyId: string;\n  newStory: BaseStory;\n};\ntype AddEventPayload = {\n  calendarId: string;\n  storyId: string;\n  event: BaseEvent;\n};\ntype RemoveEventPayload = {\n  calendarId: string;\n  storyId: string;\n  eventId: string;\n};\ntype UpdateEventPayload = {\n  calendarId: string;\n  storyId: string;\n  eventId: string;\n  newEvent: BaseEvent;\n};\n\nconst userCalendarsSlice = createSlice({\n  name: \"userCalendars\",\n  initialState: {\n    calendars: [] as Calendar[],\n  },\n  reducers: {\n    updateCalendars(state, action: PayloadAction<UpdateCalendarsPayload>) {\n      const { calendars } = action.payload;\n      state.calendars = calendars;\n    },\n    pushResource(state, action: PayloadAction<PushRsourceAction>) {\n      const { calendarId, storyId, resource } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFind = calendarIdx === -1;\n      if (cannotFind) {\n        console.warn(\"cannot find calendar on updateResource\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateResource\", calendarId);\n        return;\n      }\n\n      // process\n      state.calendars[calendarIdx].stories[storyIdx].resources.push(resource);\n    },\n    updateResources(state, action: PayloadAction<UpdateResourcesPayload>) {\n      const { calendarId, storyId, newResources } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFind = calendarIdx === -1;\n      if (cannotFind) {\n        console.warn(\"cannot find calendar on updateResource\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateResource\", calendarId);\n        return;\n      }\n\n      // query\n      state.calendars[calendarIdx].stories[storyIdx].resources = newResources;\n    },\n    removeResource(state, action: PayloadAction<RemoveResourcePayload>) {\n      const { calendarId, resourceId, storyId } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFind = calendarIdx === -1;\n      if (cannotFind) {\n        console.warn(\"cannot find calendar on removeResource\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on removeResource\", calendarId);\n        return;\n      }\n\n      // query\n      state.calendars[calendarIdx].stories[\n        storyIdx\n      ].resources = state.calendars[calendarIdx].stories[\n        storyIdx\n      ].resources.filter((resource) => resource.id !== resourceId);\n    },\n    addStory(state, action: PayloadAction<AddStoryPayload>) {\n      const { calendarId, story } = action.payload;\n      const idx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFind = idx === -1;\n      if (cannotFind) {\n        console.warn(\"cannot find calendar on addStory\", calendarId);\n        return;\n      }\n      state.calendars[idx].stories.push(story);\n    },\n    removeStory(state, action: PayloadAction<RemoveStoryPayload>) {\n      const { calendarId, storyId } = action.payload;\n      const idx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFind = idx === -1;\n      if (cannotFind) {\n        console.warn(\"cannot find calendar on removeStory\", calendarId);\n        return;\n      }\n      state.calendars[idx].stories = state.calendars[idx].stories.filter(\n        (story) => story.id !== storyId\n      );\n    },\n    updateStory(state, action: PayloadAction<UpdateStoryPayload>) {\n      const { calendarId, storyId, newStory } = action.payload;\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFindCalendar = calendarIdx === -1;\n      if (cannotFindCalendar) {\n        console.warn(\"cannot find calendar on updateStory\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateStory\", calendarId);\n        return;\n      }\n\n      // prcess\n      state.calendars[calendarIdx].stories[storyIdx] = newStory;\n    },\n    addEvent(state, action: PayloadAction<AddEventPayload>) {\n      const { calendarId, storyId, event } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFindCalendar = calendarIdx === -1;\n      if (cannotFindCalendar) {\n        console.warn(\"cannot find calendar on addEvent\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on addEvent\", calendarId);\n        return;\n      }\n\n      // addd\n      state.calendars[calendarIdx].stories[storyIdx].events.push(event);\n    },\n    removeEvent(state, action: PayloadAction<RemoveEventPayload>) {\n      const { calendarId, storyId, eventId } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFindCalendar = calendarIdx === -1;\n      if (cannotFindCalendar) {\n        console.warn(\"cannot find calendar on removeEvent\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on removeEvent\", storyIdx);\n        return;\n      }\n\n      // remove\n      state.calendars[calendarIdx].stories[storyIdx].events = state.calendars[\n        calendarIdx\n      ].stories[storyIdx].events.filter((_event) => _event.id !== eventId);\n    },\n    updateEvent(state, action: PayloadAction<UpdateEventPayload>) {\n      const { calendarId, storyId, eventId, newEvent } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFindCalendar = calendarIdx === -1;\n      if (cannotFindCalendar) {\n        console.warn(\"cannot find calendar on updateStory\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateStory\", calendarId);\n        return;\n      }\n\n      // event\n      const eventIdx = state.calendars[calendarIdx].stories[\n        storyIdx\n      ].events.findIndex((event) => event.id === eventId);\n      const cannotFindEvent = eventIdx === -1;\n      if (cannotFindEvent) {\n        console.warn(\"cannot find event on updateEvent\");\n        return;\n      }\n\n      // prcess\n      state.calendars[calendarIdx].stories[storyIdx].events[\n        eventIdx\n      ] = newEvent;\n    },\n  },\n});\n\nexport const {\n  updateCalendars: updateCalendarsAction,\n\n  // resources\n  pushResource: pushResourceAction,\n  updateResources: updateResourcesAction,\n  removeResource: removeResourceAction,\n\n  // story\n  addStory: addStoryAction,\n  removeStory: removeStoryAction,\n  updateStory: updateStoryAction,\n\n  // event\n  addEvent: addEventAction,\n  removeEvent: removeEventAction,\n  updateEvent: updateEventAction,\n} = userCalendarsSlice.actions;\n\nexport default userCalendarsSlice.reducer;\n\n// export const selectUserCalendars = (state: RootState) =>\n//   state.userCalendars.calendars;\n\nexport const selectUserCalendar = (state: RootState) =>\n  state.features.userCalendars.calendars[0]; // NOTE: now calendars have only 1 calendar.\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { BaseCalendarContainer } from \"../atoms/BaseCalendarContainer\";\nimport { useResourceGroupLabelContentInTemplateCalendar } from \"../../hooks/useResourceGroupLabelContentInTemplateCalendar\";\nimport { FIELD1, FIELD2 } from \"../../constants/fullcalendar/settings\";\nimport { addStoryAction } from \"../../redux/features/userCalendars\";\nimport { BaseStory } from \"../../core/story/BaseStory\";\n\nconst ableConfis = {\n  selectable: false,\n  editable: false,\n} as const;\n\nconst resourceAreaColumns = [\n  {\n    field: FIELD1,\n    headerContent: \"Field1\",\n  },\n  {\n    field: FIELD2,\n    headerContent: \"Field2\",\n  },\n];\n\nexport function BaseTemplate(props: any) {\n  const dispatch = useDispatch();\n\n  const createClickHandel = React.useCallback(\n    ({ story, calendarId }: { story: BaseStory; calendarId: string }) => () => {\n      if (!window.confirm(\"Do you copy this story to My Calendar?\")) return;\n      dispatch(addStoryAction({ calendarId, story }));\n    },\n    [dispatch]\n  );\n\n  const {\n    resourceGroupLabelContent,\n  } = useResourceGroupLabelContentInTemplateCalendar({ createClickHandel });\n\n  return (\n    <BaseCalendarContainer\n      {...props}\n      initialDate={\"2020-06-01\"}\n      resourceGroupLabelContent={resourceGroupLabelContent}\n      resourceAreaColumns={resourceAreaColumns}\n      {...ableConfis}\n    />\n  );\n}\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { selectPrivateCollegeCalendar } from \"../redux/features/templateCalendarTable\";\nimport { MY_CALENDAR_ID } from \"../constants/fullcalendar/settings\";\n\ntype ResourceContentProps = {\n  // REF: https://fullcalendar.io/docs/resource-group-render-hooks\n  groupValue: string;\n};\n\ntype Props = {\n  createClickHandel: Function;\n};\n\nexport const useResourceGroupLabelContentInTemplateCalendar = ({\n  createClickHandel,\n}: Props) => {\n  const calendar = useSelector(selectPrivateCollegeCalendar);\n\n  const resourceGroupLabelContent = React.useCallback(\n    ({ groupValue: storyId }: ResourceContentProps) => {\n      if (!calendar) return;\n\n      // story validation\n      const story = calendar.stories.find((story) => story.id === storyId);\n      if (!story) {\n        console.warn(\"cannot find story\", storyId);\n        return;\n      }\n\n      // name handler\n      let name: string;\n      if (story.name) {\n        name = story.name;\n      } else {\n        console.warn(\"cannot find this story name\", storyId);\n        name = \"No Name\";\n      }\n\n      const clickHandle = createClickHandel({\n        calendarId: MY_CALENDAR_ID,\n        story,\n      });\n\n      const nameElement = document.createElement(\"i\");\n      nameElement.innerHTML = name + \" \"; // NOTE: space is for design, so not good way\n      nameElement.style.marginLeft = '1rem'\n\n      const buttonElement = document.createElement(\"button\");\n      buttonElement.innerHTML = \"Copy to my calendar\";\n      buttonElement.style.marginLeft = '1rem'\n      buttonElement.onclick = clickHandle;\n\n      const arrayOfDomNodes = [nameElement, buttonElement];\n      return { domNodes: arrayOfDomNodes };\n    },\n    [calendar, createClickHandel]\n  );\n\n  return { resourceGroupLabelContent };\n};\n","import React from \"react\";\nimport { BaseTemplate } from \"../molecules/BaseTemplate\";\nimport { usePrivateCollegeCalendar } from \"../../hooks/usePrivateCollegeCalendar\";\nimport { useUser } from \"../../hooks/useUser\";\n\nexport function PrivateCollegeTemplate() {\n  const { birth, canWorkingholiday } = useUser();\n  const { resources, events, generate } = usePrivateCollegeCalendar();\n\n  React.useEffect(() => {\n    generate({ birth, canWorkingholiday });\n  }, [generate, birth, canWorkingholiday]);\n\n  return <BaseTemplate events={events} resources={resources} />;\n}\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { BaseEvent } from \"../core/event/BaseEvent\";\nimport { BaseResource } from \"../core/resource/BaseResource\";\nimport {\n  upsertPrivateCollegeStoriesAction,\n  selectPrivateCollegeCalendar,\n} from \"../redux/features/templateCalendarTable\";\n\nexport const usePrivateCollegeCalendar = () => {\n  const dispatch = useDispatch();\n  const generate = React.useCallback(\n    ({\n      birth,\n      canWorkingholiday,\n    }: {\n      birth: string;\n      canWorkingholiday: boolean;\n    }) => {\n      dispatch(\n        upsertPrivateCollegeStoriesAction({ birth, canWorkingholiday })\n      );\n    },\n    [dispatch]\n  );\n\n  const calendar = useSelector(selectPrivateCollegeCalendar);\n\n  const stories = React.useMemo(() => calendar?.stories ?? [], [calendar]);\n\n  const resources = React.useMemo(\n    () =>\n      stories.reduce<BaseResource[]>(\n        (prev, story) => [...prev, ...story.resources],\n        []\n      ),\n    [stories]\n  );\n\n  const events = React.useMemo(\n    () =>\n      stories.reduce<BaseEvent[]>(\n        (prev, story) => [...prev, ...story.events],\n        [] as any[]\n      ),\n    [stories]\n  );\n\n  return { stories, generate, resources, events } as const;\n};\n","import React from \"react\";\n\nexport function PublicCollegeTemplate() {\n  return <div>TODO: PublicCollegeTemplate</div>;\n}\n","import React from \"react\";\n\nexport function EslTemplate() {\n  return <div>TODO: EslTemplate</div>;\n}\n","import React from \"react\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Box from \"@material-ui/core/Box\";\n\nimport { PrivateCollegeTemplate } from \"./PrivateCollegeTemplate\";\nimport { PublicCollegeTemplate } from \"./PublicCollegeTemplate\";\nimport { EslTemplate } from \"./EslTemplate\";\n\nconst TabPanel = ({\n  shouldShow,\n  children,\n}: {\n  shouldShow: boolean;\n  children: any;\n}) => {\n  if (!shouldShow) return <></>;\n\n  return (\n    <div role=\"tabpanel\">\n      <Box p={3}>{children}</Box>\n    </div>\n  );\n};\n\nexport function TemplateList() {\n  const [selectedIdx, setSelectedIdx] = React.useState(0);\n\n  const handleChange = React.useCallback((_event, newValue) => {\n    setSelectedIdx(newValue);\n  }, []);\n\n  return (\n    <div>\n      <Tabs value={selectedIdx} onChange={handleChange}>\n        <Tab label=\"Private College\" />\n        <Tab label=\"Public College\" />\n        <Tab label=\"ESL\" />\n      </Tabs>\n      <TabPanel shouldShow={selectedIdx === 0}>\n        <PrivateCollegeTemplate />\n      </TabPanel>\n      <TabPanel shouldShow={selectedIdx === 1}>\n        <PublicCollegeTemplate />\n      </TabPanel>\n      <TabPanel shouldShow={selectedIdx === 2}>\n        <EslTemplate />\n      </TabPanel>\n    </div>\n  );\n}\n","import React from 'react'\nimport styled from 'styled-components';\n\nexport function LogoImage(){\n  return(\n    <Img src={process.env.PUBLIC_URL + '/logo457_transparent.png'} alt=\"img\" />\n  )\n}\n\nconst Img = styled.img`\n  display: inline-block;\n  height: 100%;\n  object-fit: contain;\n  background: white;\n  padding: .3rem;\n`","export const THIS_GITHUB_URL = \"https://github.com/snamiki1212/plangoab\";\nexport const MY_GITHUB_URL = \"https://github.com/snamiki1212\";\nexport const MY_TWITTER_URL = \"https://twitter.com/snamiki1212\";\nexport const MY_PORTFOLIO = \"https://snamiki1212.github.io\";\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { LogoImage } from \"../atoms/LogoImage\";\nimport {THIS_GITHUB_URL} from '../../constants/meta'\n\nexport function Footer() {\n  return (\n    <Container>\n      <LogoText>\n        <LogoImageContainer>\n        <LogoImage />\n        </LogoImageContainer>\n        <span>Plangoab</span>\n      </LogoText>\n      <a href={THIS_GITHUB_URL} target=\"_blank\" rel=\"noreferrer\">\n        Github\n      </a>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  padding: 5rem;\n  min-height: 30vh;\n  background: var(--main-color);\n  color: white;\n`;\n\nconst LogoImageContainer = styled.div`\n  height: 4rem;\n  width: 4rem;\n`\n\nconst LogoText = styled.div`\n  display: flex;\n  color: white;\n  font-size: 4rem;\n`;\n","import React, {PropsWithChildren} from \"react\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\n\ntype Props = {\n  isOpen: boolean;\n  onClose: () => void;\n};\n\nexport function AboutModal({ isOpen, onClose, children }: PropsWithChildren<Props>) {\n  return (\n    <Dialog onClose={onClose} open={isOpen}>\n      <DialogTitle>About Plangoab</DialogTitle>\n      <DialogContent dividers={true}>\n        {children}\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n","import React from \"react\";\nimport * as AuthorInfo from \"../../constants/meta\";\n\nexport function AboutContent() {\n  return (\n    <div>\n      <div>\n        <h2>About</h2>\n        <p>\n          A web calendar for a person going abroad, generating a suitable\n          schedule and customizable. Using React, Redux(Redux Toolkit), and\n          Fullcalendar.\n        </p>\n      </div>\n\n      <div>\n        <h2>License</h2>\n        <li>GPL-3.0</li>\n      </div>\n\n      <div>\n        <h2>Author</h2>\n        <li>\n          <a href={AuthorInfo.MY_GITHUB_URL}>GitHub:snamiki1212</a>\n        </li>\n        <li>\n          <a href={AuthorInfo.MY_TWITTER_URL}>Twitter:snamiki1212</a>\n        </li>\n        <li>\n          <a href={AuthorInfo.MY_PORTFOLIO}>Portfolio</a>\n        </li>\n      </div>\n\n      <div>\n        <h2>Source</h2>\n        <span>\n          This page is managed at{\" \"}\n          <a href={AuthorInfo.THIS_GITHUB_URL}>GitHub</a>.\n        </span>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport styled from \"styled-components\";\nimport { AboutModal } from \"../atoms/AboutModal\";\nimport { LogoImage } from \"../atoms/LogoImage\";\nimport { AboutContent } from \"./AboutContent\";\nimport { useModal } from \"../../hooks/useModal\";\n\nexport function Header() {\n  const { isOpen, open, close } = useModal();\n\n  return (\n    <>\n      <Container>\n        <LogoImage />\n        <Title>Plangoab</Title>\n        <ButtonContainer>\n          <Button variant=\"contained\" onClick={open}>About Plangoab</Button>\n        </ButtonContainer>\n      </Container>\n\n      {/* Modal */}\n      <AboutModal isOpen={isOpen} onClose={close}>\n        <AboutContent />\n      </AboutModal>\n    </>\n  );\n}\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  height: 6rem;\n  background: var(--main-color);\n  padding: 1rem;\n`;\n\nconst Title = styled.span`\n  color: white;\n  font-size: 3rem;\n  padding: 1rem;\n`;\n\nconst ButtonContainer = styled.div`\n  margin-left: auto;\n`;\n","import React from'react';\n\nexport const useModal = (init?: boolean) => {\n  const [isOpen, setIsOpen] = React.useState(!!init)\n\n  const open = React.useCallback(() => {\n    setIsOpen(true);\n  }, []);\n\n  const close = React.useCallback(() => {\n    setIsOpen(false);\n  }, []);\n\n  const toggle = React.useCallback(() => {\n    setIsOpen(prev => !prev)\n  }, []);\n\n  return {isOpen, open, close, toggle}\n}","import { DARK_BLUE } from \"../../constants/fullcalendar/templates\";\nimport {\n  FIELD1,\n  FIELD2,\n  NAME_OF_STORY_ID,\n  NAME_OF_ORDER,\n} from \"../../constants/fullcalendar/settings\";\nimport {\n  // PROFILE_ID,\n  RESOURCE_ID__SHARED__AGE,\n  RESOURCE_ID__SHARED__LIMIT,\n} from \"../../constants/fullcalendar/settings\";\nimport { BaseResource } from \"./BaseResource\";\n\nexport const createProfileResources = ({\n  calendarId,\n  storyId,\n}: {\n  calendarId: string;\n  storyId: string;\n}): BaseResource[] => [\n  {\n    id: RESOURCE_ID__SHARED__AGE,\n    [FIELD1]: \"\",\n    [FIELD2]: \"Age\",\n    [NAME_OF_STORY_ID]: storyId,\n    [NAME_OF_ORDER]: 0,\n    calendarId,\n    eventBorderColor: DARK_BLUE,\n  },\n  {\n    id: RESOURCE_ID__SHARED__LIMIT,\n    [FIELD1]: \"\",\n    [FIELD2]: \"Working Holiday\",\n    [NAME_OF_STORY_ID]: storyId,\n    [NAME_OF_ORDER]: 1,\n    calendarId,\n    eventBorderColor: DARK_BLUE,\n  },\n];\n","import { addMonths, addYears, setMonth } from \"date-fns\";\n\nimport {\n  RESOURCE_ID__SHARED__AGE,\n  RESOURCE_ID__SHARED__LIMIT,\n} from \"../../constants/fullcalendar/settings\";\nimport { getRangeNumbers } from \"../../lib/age\";\nimport { uuid } from \"../../lib/uuid\";\nimport { convertIsoToDateTime } from \"../../lib/date\";\nimport { WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE } from \"../../constants/visa\";\nimport { BaseEvent } from \"../event/BaseEvent\";\n\nexport const createProfileEvents = ({\n  startDate,\n  storyId,\n  calendarId,\n}: {\n  startDate: Date;\n  storyId: string;\n  calendarId: string;\n}): BaseEvent[] => {\n  // get year num\n  const startYear = new Date(startDate).getFullYear();\n  const endYear = getLastYear();\n\n  // create years list\n  const years = getRangeNumbers(startYear, endYear);\n\n  const workingHolidayLimitEvents = createWorkingHolidayLimitEvents(\n    startDate,\n    storyId,\n    calendarId\n  );\n\n  // create EventInput obj\n  const ageEventList = years.map((year, index) => {\n    const start = (() => {\n      startDate.setFullYear(year);\n      const isoStr = startDate.toISOString();\n      const str = convertIsoToDateTime(isoStr);\n      return str;\n    })();\n\n    const isoStr = addMonths(new Date(start), +11).toISOString();\n    const end = convertIsoToDateTime(isoStr);\n\n    return {\n      id: uuid(),\n      title: `Aage:${index}`,\n      start,\n      end,\n      storyId,\n      resourceId: RESOURCE_ID__SHARED__AGE,\n      extendedProps: {\n        resourceId: RESOURCE_ID__SHARED__AGE,\n        calendarId,\n        storyId,\n      },\n    };\n  });\n\n  return [...workingHolidayLimitEvents, ...ageEventList];\n};\n\nconst getLastYear = () => {\n  const BUFFER_YEAR = 10;\n  const date = new Date();\n  return addYears(date, BUFFER_YEAR).getFullYear();\n};\n\nconst createWorkingHolidayLimitEvents = (\n  birthday: Date,\n  storyId: string,\n  calendarId: string\n): BaseEvent[] => {\n  const lastYearDate = addYears(\n    birthday,\n    WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE\n  );\n  const start = convertIsoToDateTime(birthday.toISOString());\n  const endDate = addMonths(lastYearDate, +11);\n  const endOfLimit = convertIsoToDateTime(endDate.toISOString());\n  const endOfApplication = convertIsoToDateTime(\n    addYears(setMonth(endDate, +6), -1).toISOString()\n  );\n\n  const limitation = {\n    id: uuid(),\n    title: \"Limitation till WorkingHoliday\",\n    start,\n    end: endOfLimit,\n    resourceId: RESOURCE_ID__SHARED__LIMIT,\n    storyId,\n    extendedProps: {\n      resourceId: RESOURCE_ID__SHARED__LIMIT,\n      storyId,\n      calendarId,\n    },\n  };\n\n  const application = {\n    id: uuid(),\n    title: \"Application Limit\",\n    start,\n    end: endOfApplication,\n    storyId,\n    resourceId: RESOURCE_ID__SHARED__LIMIT,\n    extendedProps: {\n      storyId,\n      resourceId: RESOURCE_ID__SHARED__LIMIT,\n      calendarId,\n    },\n  };\n  return [limitation, application];\n};\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { DateSelectArg } from \"@fullcalendar/react\";\nimport { uuid } from \"../lib/uuid\";\nimport { createProfileStory } from \"../core/story/ProfileStory/createProfileStory\";\nimport { initEvent } from \"../core/event/BaseEvent\";\nimport { createUserCalendar } from \"../core/calendar/UserCalendar/createUserCalendar\";\nimport {\n  updateCalendarsAction,\n  addEventAction,\n  selectUserCalendar,\n} from \"../redux/features/userCalendars\";\nimport { MY_CALENDAR_ID } from \"../constants/fullcalendar/settings\";\n\nexport const useUserCalendar = () => {\n  const dispatch = useDispatch();\n  const calendar = useSelector(selectUserCalendar);\n\n  const init = React.useCallback(\n    (birthday: string | Date) => {\n      const calendarId = MY_CALENDAR_ID;\n      const story = createProfileStory({ birth: birthday, calendarId });\n      const _calendar = createUserCalendar({\n        id: calendarId,\n        stories: [story],\n      });\n      const _calendars = [_calendar];\n      dispatch(updateCalendarsAction({ calendars: _calendars }));\n    },\n    [dispatch]\n  );\n\n  const select = React.useCallback(\n    (info: DateSelectArg) => {\n      if (!info.resource) {\n        console.warn(\"Unexpected data that info does not have resource.\");\n        return;\n      }\n\n      // storyId\n      const storyId = info.resource.extendedProps.storyId;\n      if (!storyId) {\n        console.warn(\"Unexpected data not including storyId.\");\n        return;\n      }\n\n      // calendarId\n      const calendarId = info.resource.extendedProps.calendarId;\n      if (!calendarId) {\n        console.warn(\"Unexpected data not including calendarId.\");\n        return;\n      }\n\n      const newEvent = initEvent({\n        id: uuid(),\n        resourceId: info.resource.id,\n        calendarId,\n        storyId,\n        start: info.startStr,\n        end: info.endStr,\n      });\n\n      dispatch(addEventAction({ event: newEvent, calendarId, storyId }));\n    },\n    [dispatch]\n  );\n\n  const stories = React.useMemo(() => calendar?.stories ?? [], [calendar]);\n\n  const events = React.useMemo(\n    () => calendar?.stories.flatMap((story) => story.events) ?? [],\n    [calendar]\n  );\n\n  const resources = React.useMemo(\n    () => calendar?.stories.flatMap((story) => story.resources) ?? [],\n    [calendar]\n  );\n\n  return {\n    calendar,\n    stories,\n    events,\n    resources,\n    init,\n    select,\n  } as const;\n};\n","import { UserCalendar } from \"./model\";\nimport { ProfileStory } from \"../../story/ProfileStory/model\";\n\ntype Story = ProfileStory;\n\nexport const createUserCalendar = ({\n  id,\n  stories,\n}: {\n  id: string;\n  stories: Story[];\n}): UserCalendar => {\n  return {\n    id,\n    stories,\n  };\n};\n","import { ProfileStory } from \"./model\";\nimport { PROFILE_ID } from \"../../../constants/fullcalendar/settings\";\nimport { createStoryName } from \"../BaseStory\";\nimport { createProfileResources } from \"../../resource/createProfileResources\";\nimport { createProfileEvents } from \"../../event/createProfileEvents\";\n\nexport const createProfileStory = ({\n  birth,\n  calendarId,\n}: {\n  birth: string | Date;\n  calendarId: string;\n}): ProfileStory => {\n  const _birth = new Date(birth);\n  const storyId = PROFILE_ID;\n  return {\n    id: storyId,\n    calendarId,\n    name: createStoryName(_birth),\n    resources: createProfileResources({ calendarId, storyId }),\n    events: createProfileEvents({ calendarId, storyId, startDate: _birth }),\n  };\n};\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../rootReducer\";\n\ntype State = {\n  story: null | {\n    calendarId: string;\n    storyId: string;\n  };\n};\n\ntype PushPayload = {\n  calendarId: string;\n  storyId: string;\n};\n\ntype PopPayload = undefined;\n\nconst slice = createSlice({\n  name: \"storyModal\",\n  initialState: {\n    story: null,\n  } as State,\n  reducers: {\n    push(state, action: PayloadAction<PushPayload>) {\n      const _payload = action.payload;\n      state.story = _payload;\n    },\n    pop(state, _action: PayloadAction<PopPayload>) {\n      state.story = null;\n    },\n  },\n});\n\nexport const selectIsOpen = (state: RootState) => !!state.ui.storyModal.story;\n\nexport const selectStoryModal = (state: RootState) => state.ui.storyModal.story;\n\nexport const selectStory = (state: RootState) => {\n  const _story = state.ui.storyModal.story;\n  if (!_story) return null;\n  const { calendarId, storyId } = _story;\n\n  // calendar\n  const calendarIdx = state.features.userCalendars.calendars.findIndex(\n    (calendar) => calendar.id === calendarId\n  );\n  const cannotFind = calendarIdx === -1;\n  if (cannotFind) {\n    console.warn(\"cannot find calendar on removeStory\", calendarId);\n    return;\n  }\n\n  // story\n  return state.features.userCalendars.calendars[calendarIdx].stories.find(\n    (story) => story.id === storyId\n  );\n};\n\nexport const { push: pushAction, pop: popAction } = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../rootReducer\";\n\ntype State = {\n  event: null | {\n    calendarId: string;\n    storyId: string;\n    eventId: string;\n  };\n};\n\ntype PushPayload = {\n  calendarId: string;\n  storyId: string;\n  eventId: string;\n};\n\ntype PopPayload = undefined;\n\nconst slice = createSlice({\n  name: \"eventModal\",\n  initialState: {\n    event: null,\n  } as State,\n  reducers: {\n    push(state, action: PayloadAction<PushPayload>) {\n      const _payload = action.payload;\n      state.event = _payload;\n    },\n    pop(state, _action: PayloadAction<PopPayload>) {\n      state.event = null;\n    },\n  },\n});\n\nexport const selectIsOpen = (state: RootState) => !!state.ui.eventModal.event;\n\nexport const selectEventModal = (state: RootState) => state.ui.eventModal.event;\n\nexport const selectEvent = (state: RootState) => {\n  const event = state.ui.eventModal.event;\n  if (!event) return null;\n  const { calendarId, storyId, eventId } = event;\n\n  // calendar\n  const calendarIdx = state.features.userCalendars.calendars.findIndex(\n    (calendar) => calendar.id === calendarId\n  );\n  const cannotFind = calendarIdx === -1;\n  if (cannotFind) {\n    console.warn(\"cannot find calendar on removeResource\", calendarId);\n    return;\n  }\n\n  // story\n  const storyIdx = state.features.userCalendars.calendars[\n    calendarIdx\n  ].stories.findIndex((story) => story.id === storyId);\n  const cannotFindStory = storyIdx === -1;\n  if (cannotFindStory) {\n    console.warn(\"cannot find story on removeResource\", calendarId);\n    return;\n  }\n\n  //\n  return state.features.userCalendars.calendars[calendarIdx].stories[\n    storyIdx\n  ].events.find((event) => event.id === eventId);\n};\n\nexport const { push: pushAction, pop: popAction } = slice.actions;\n\nexport default slice.reducer;\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  removeStoryAction,\n  updateStoryAction,\n  addStoryAction,\n} from \"../redux/features/userCalendars\";\nimport { BaseStory, updateStory } from \"../core/story/BaseStory\";\nimport { initStory } from \"../core/story/BaseStory\";\n\ntype IdSet = { calendarId: string; storyId: string };\n\nexport const useStory = () => {\n  const dispatch = useDispatch();\n\n  const remove = React.useCallback(({ calendarId, storyId }: IdSet) => {\n    // TODO: move this line outside\n    if (!window.confirm(\"Do you remove this story?\")) return;\n    dispatch(\n      removeStoryAction({\n        storyId,\n        calendarId,\n      })\n    );\n  }, [dispatch]);\n\n  const update = React.useCallback(\n    (idSet: IdSet, story: BaseStory, data: Partial<BaseStory>) => {\n      const newStory = updateStory(story, data);\n      dispatch(updateStoryAction({ ...idSet, newStory }));\n    },\n    [dispatch]\n  );\n\n  const create  = React.useCallback(({calendarId}: {calendarId: string}, params?: Partial<BaseStory>) => {\n    const story = initStory({ calendarId });\n    dispatch(addStoryAction({ calendarId, story }));\n  }, [dispatch]);\n\n  return { remove, update, create } as const;\n};\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useForm } from \"react-hook-form\";\nimport styled from \"styled-components\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\n// \nimport { selectStoryModal, selectStory } from \"../../redux/ui/storyModal\";\nimport { useStory } from \"../../hooks/useStory\";\nimport { useResource } from \"../../hooks/useResource\";\nimport { FIELD1, FIELD2 } from \"../../constants/fullcalendar/settings\";\n\ntype Props = {\n  isOpen: boolean;\n  onClose: () => void;\n};\n\nexport function StoryModal({ isOpen, onClose }: Props) {\n  const storyModal = useSelector(selectStoryModal);\n  const calendarId = storyModal?.calendarId;\n  const story = useSelector(selectStory);\n  const { register, handleSubmit } = useForm();\n  const {\n    create: createStory,\n    remove: removeStory,\n    update: updateStory,\n  } = useStory();\n  const { push: pushResource, remove: removeResource } = useResource();\n\n  const handleRemoveStory = React.useCallback(() => {\n    if (!storyModal) {\n      return console.warn(\"Invalid data status when to update resource.\");\n    }\n    removeStory(storyModal);\n    onClose();\n  }, [storyModal, removeStory, onClose]);\n\n  const handleRemoveResource = React.useCallback(\n    (resourceId: string) => () => {\n      if (!storyModal) {\n        return console.warn(\"Invalid data status when to remove resource.\");\n      }\n      removeResource({ ...storyModal, resourceId });\n    },\n    [storyModal, removeResource]\n  );\n\n  const handleAddResource = React.useCallback(() => {\n    if (!storyModal) {\n      return console.warn(\"Invalid data status when to add resource.\");\n    }\n    pushResource(storyModal);\n  }, [storyModal, pushResource]);\n\n  const handleNewStory = React.useCallback(() => {\n    if (!calendarId) return;\n    createStory({ calendarId });\n  }, [createStory, calendarId]);\n\n  const onSubmit = React.useCallback(\n    (data: any) => {\n      if (!storyModal || !story) {\n        return console.warn(\"Invalid data status when to update story.\");\n      }\n      updateStory(storyModal, story, data);\n      onClose();\n    },\n    [updateStory, storyModal, story, onClose]\n  );\n\n  // // TODO: error handler\n  // // const { register, handleSubmit, errors } = useForm();\n  // const { register, handleSubmit } = useForm();\n\n  if (!story) return <></>;\n\n  return (\n    <Dialog onClose={onClose} open={isOpen}>\n      <DialogTitle>\n        <form onSubmit={handleSubmit(onSubmit)}>\n          <DialogTitleInner>\n            <TextField\n              inputRef={register}\n              name=\"name\"\n              defaultValue={story.name}\n              variant=\"outlined\"\n              label=\"Story Name\"\n            />\n          </DialogTitleInner>\n        </form>\n      </DialogTitle>\n\n      <DialogContent dividers={true}>\n        <div>\n          <form onSubmit={handleSubmit(onSubmit)}>\n            {story.resources.map((resource, idx) => {\n              const fieldName = `resources[${idx}]`;\n              return (\n                <Fieldset name={fieldName} key={fieldName}>\n                  <input\n                    type=\"hidden\"\n                    name={`${fieldName}.id`}\n                    ref={register}\n                    value={resource.id}\n                  />\n                  <TextField\n                    defaultValue={resource[FIELD1]}\n                    inputRef={register}\n                    name={`${fieldName}.${FIELD1}`}\n                    label=\"Field1\"\n                  />\n                  <TextField\n                    defaultValue={resource[FIELD2]}\n                    inputRef={register}\n                    name={`${fieldName}.${FIELD2}`}\n                    label=\"Field2\"\n                  />\n                  <Button\n                    onClick={handleRemoveResource(resource.id)}\n                    color=\"secondary\"\n                    variant=\"contained\"\n                  >\n                    Delete\n                  </Button>\n                </Fieldset>\n              );\n            })}\n            <AddResourceButtonContainer>\n              <Button\n                onClick={handleAddResource}\n                variant=\"outlined\"\n                color=\"primary\"\n              >\n                + Add Resource\n              </Button>\n            </AddResourceButtonContainer>\n\n            <UpdateButtonContainer>\n              <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n                Update\n              </Button>\n            </UpdateButtonContainer>\n          </form>\n        </div>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          onClick={handleRemoveStory}\n          color=\"secondary\"\n          variant=\"contained\"\n        >\n          Delete this story\n        </Button>\n        <Button onClick={handleNewStory} color=\"primary\">\n          Add New Story\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nconst DialogTitleInner = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst Fieldset = styled.fieldset`\n  border: none;\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  gap: 1rem;\n  padding: 1rem;\n  margin: 1rem;\n  border: 1px solid lightgray;\n`;\n\nconst AddResourceButtonContainer = styled.div`\n  padding: 1rem;\n`;\n\nconst UpdateButtonContainer = styled.div`\n  padding: 1rem;\n  text-align: right;\n`;\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectUserCalendar } from \"../redux/features/userCalendars\";\nimport {\n  removeResourceAction,\n  pushResourceAction,\n} from \"../redux/features/userCalendars\";\nimport { initResource } from \"../core/resource/BaseResource\";\n\ntype IdSet = { calendarId: string; resourceId: string; storyId: string };\n\nexport const useResource = () => {\n  const dispatch = useDispatch();\n\n  // TODO: remoove this line and get params as arg in each function\n  const calendar = useSelector(selectUserCalendar);\n\n  const push = React.useCallback(\n    ({ calendarId, storyId }: { calendarId: string; storyId: string }) => {\n      // story\n      const storyIdx = calendar.stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateResource\", calendarId);\n        return;\n      }\n\n      // resource\n      const _resources = calendar.stories[storyIdx].resources;\n      let lastResource = { idx: -1, order: -1 };\n      for (let i = 0; i < _resources.length; i++) {\n        const resource = _resources[i];\n        const _order = resource.order ?? -1;\n        if (_order > lastResource.order) {\n          lastResource = { idx: i, order: _order };\n        }\n      }\n\n      const _resource = initResource({\n        calendarId,\n        storyId,\n        order: lastResource.order + 1,\n      });\n\n      dispatch(\n        pushResourceAction({ calendarId, storyId, resource: _resource })\n      );\n    },\n    [dispatch, calendar]\n  );\n\n  const remove = React.useCallback(\n    ({ calendarId, resourceId, storyId }: IdSet) => {\n      // TODO: Move outside\n      if (!window.confirm(\"Do you remove this resource?\")) return;\n\n      dispatch(\n        removeResourceAction({\n          resourceId: resourceId,\n          storyId: storyId,\n          calendarId,\n        })\n      );\n    },\n    [dispatch]\n  );\n\n  return { remove, push } as const;\n};\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  removeEventAction,\n  updateEventAction,\n} from \"../redux/features/userCalendars\";\nimport { BaseEvent, updateEvent } from \"../core/event/BaseEvent\";\n\ntype IdSet = { calendarId: string; storyId: string; eventId: string };\n\nexport const useEvent = () => {\n  const dispatch = useDispatch();\n\n  const remove = React.useCallback(\n    ({ calendarId, storyId, eventId }: IdSet) => {\n      if (!window.confirm(\"Do you remove this story?\")) return;\n      dispatch(\n        removeEventAction({\n          calendarId,\n          storyId,\n          eventId,\n        })\n      );\n    },\n    [dispatch]\n  );\n\n  const update = React.useCallback(\n    (idSet: IdSet, event: BaseEvent, data: any) => {\n      const newEvent = updateEvent(event, data);\n      dispatch(updateEventAction({ ...idSet, newEvent }));\n    },\n    [dispatch]\n  );\n\n  return {\n    remove,\n    update\n  } as const;\n};\n","import React from \"react\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { useForm } from \"react-hook-form\";\nimport { useSelector } from \"react-redux\";\nimport { selectEventModal, selectEvent } from \"../../redux/ui/eventModal\";\nimport { useEvent } from \"../../hooks/useEvent\";\nimport { BaseEvent } from \"../../core/event/BaseEvent\";\n\ntype Props = {\n  isOpen: boolean;\n  onClose: () => void;\n};\n\nexport function EventModal({ isOpen, onClose }: Props) {\n  const eventModal = useSelector(selectEventModal);\n  const event = useSelector(selectEvent);\n\n  const { remove, update } = useEvent();\n\n  const onRemove = React.useCallback(() => {\n    if (!eventModal) {\n      return console.warn(\"Invalid data status when to update event.\");\n    }\n    remove(eventModal);\n    onClose();\n  }, [eventModal, remove, onClose]);\n\n  const onUpdate = React.useCallback(\n    (data: Partial<BaseEvent>) => {\n      if (!eventModal || !event) {\n        return console.warn(\"Invalid data status when to remove event.\");\n      }\n      update(eventModal, event, data);\n      onClose();\n    },\n    [eventModal, event, update, onClose]\n  );\n\n  // TODO: error handler\n  const { register, handleSubmit } = useForm();\n\n  return (\n    <Dialog onClose={onClose} open={isOpen}>\n      <DialogTitle>Event</DialogTitle>\n      <DialogContent dividers={true}>\n        <form onSubmit={handleSubmit(onUpdate)}>\n          <TextField\n            inputRef={register}\n            name={\"title\"}\n            defaultValue={event?.title}\n            label=\"Title\"\n            variant=\"outlined\"\n          />\n          <Button type=\"submit\">rename</Button>\n        </form>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onRemove} variant=\"contained\" color=\"secondary\">\n          Remove\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useUserCalendar } from \"../../hooks/useUserCalendar\";\nimport { useUser } from \"../../hooks/useUser\";\nimport { BaseCalendarContainer } from \"../../components/atoms/BaseCalendarContainer\";\nimport { useResourceGroupLabelContentInUserCalendar } from \"../../hooks/useResourceGroupLabelContentInUserCalendar\";\nimport { useStoryModal } from \"../../hooks/useStoryModal\";\nimport { useEventModal } from \"../../hooks/useEventModal\";\nimport { pushAction as pushStoryModalAction } from \"../../redux/ui/storyModal\";\nimport { StoryModal } from \"../../components/molecules/StoryModal\";\nimport { EventModal } from \"../../components/molecules/EventModal\";\nimport { EventClickArg } from \"@fullcalendar/react\";\nimport { pushAction as pushEventModalAction } from \"../../redux/ui/eventModal\";\n\nconst ableConfis = {\n  selectable: true,\n  editable: true,\n} as const;\n\nexport function UserCalendarContainer() {\n  const {\n    push: pushStoryModal,\n    pop: popStoryModal,\n    isOpen: isOpenStoryModal,\n  } = useStoryModal();\n\n  const { pop: popEventModal, isOpen: isOpenEventModal } = useEventModal();\n\n  const { birth } = useUser();\n  const dispatch = useDispatch();\n\n  const createOpenStoryHandle = React.useCallback(\n    ({\n      calendarId,\n      storyId,\n    }: {\n      calendarId: string;\n      storyId: string;\n    }) => () => {\n      dispatch(pushStoryModalAction({ calendarId, storyId }));\n      pushStoryModal({ calendarId, storyId });\n    },\n    [pushStoryModal, dispatch]\n  );\n\n  const {\n    resourceGroupLabelContent,\n  } = useResourceGroupLabelContentInUserCalendar({\n    createOpenHandle: createOpenStoryHandle,\n  });\n\n  const {\n    events,\n    resources,\n    init: initUserCalendar,\n    select,\n  } = useUserCalendar();\n\n  const click = React.useCallback(\n    (info: EventClickArg) => {\n      const calendarId = info.event.extendedProps.calendarId as\n        | string\n        | undefined;\n      if (!calendarId) {\n        return console.warn(\"Invalid data. cannot find calendarId.\");\n      }\n\n      const eventId = info.event.id;\n      if (!eventId) {\n        return console.warn(\"Invalid data. cannot find eventId.\");\n      }\n\n      const storyId = info.event.extendedProps.storyId as string | undefined;\n      if (!storyId) {\n        return console.warn(\"Invalid data. cannot find storyId.\");\n      }\n\n      const idSet = {\n        calendarId,\n        eventId,\n        storyId,\n      };\n\n      dispatch(pushEventModalAction(idSet));\n    },\n    [dispatch]\n  );\n\n  React.useEffect(() => {\n    initUserCalendar(birth);\n  }, [birth, initUserCalendar]);\n\n  return (\n    <>\n      <BaseCalendarContainer\n        events={events}\n        resources={resources}\n        select={select}\n        eventClick={click}\n        initialDate={\"2020-06-01\"}\n        resourceGroupLabelContent={resourceGroupLabelContent}\n        {...ableConfis}\n      />\n\n      {/* Modal */}\n      <StoryModal isOpen={isOpenStoryModal} onClose={popStoryModal} />\n      <EventModal isOpen={isOpenEventModal} onClose={popEventModal} />\n    </>\n  );\n}\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { pushAction, popAction, selectIsOpen } from \"../redux/ui/storyModal\";\n\nexport const useStoryModal = () => {\n  const dispatch = useDispatch();\n\n  const push = React.useCallback(\n    ({\n      storyId,\n      calendarId,\n    }: {\n      storyId: string;\n      calendarId: string;\n    }) => {\n      dispatch(pushAction({ calendarId, storyId }));\n    },\n    [dispatch]\n  );\n\n  const pop = React.useCallback(() => {\n    dispatch(popAction());\n  }, [dispatch]);\n\n  const isOpen = useSelector(selectIsOpen);\n\n  return { push, pop, isOpen } as const;\n};\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { pushAction, popAction, selectIsOpen } from \"../redux/ui/eventModal\";\n\nexport const useEventModal = () => {\n  const dispatch = useDispatch();\n\n  const push = React.useCallback(\n    ({\n      eventId,\n      storyId,\n      calendarId,\n    }: {\n      eventId: string;\n      storyId: string;\n      calendarId: string;\n    }) => {\n      dispatch(pushAction({ calendarId, eventId, storyId }));\n    },\n    [dispatch]\n  );\n\n  const pop = React.useCallback(() => {\n    dispatch(popAction());\n  }, [dispatch]);\n\n  const isOpen = useSelector(selectIsOpen);\n\n  return { push, pop, isOpen } as const;\n};\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { selectUserCalendar } from \"../redux/features/userCalendars\";\nimport { MY_CALENDAR_ID } from \"../constants/fullcalendar/settings\";\n\n\ntype Props = {\n  createOpenHandle: Function;\n}\n\ntype ContentProps = {\n  // REF: https://fullcalendar.io/docs/resource-group-render-hooks\n  groupValue: string;\n};\n\nexport const useResourceGroupLabelContentInUserCalendar = ({createOpenHandle}: Props) => {\n  const calendar = useSelector(\n    selectUserCalendar\n  );\n\n  const resourceGroupLabelContent = React.useCallback(\n    ({ groupValue: storyId }: ContentProps) => {\n      if (!calendar) return;\n\n      // story validation\n      const story = calendar.stories.find((story) => story.id === storyId);\n      if (!story) {\n        console.warn(\"cannot find story\", storyId);\n        return;\n      }\n\n      // name handler\n      let name: string;\n      if (story.name) {\n        name = story.name;\n      } else {\n        console.warn(\"cannot find this story name\", storyId);\n        name = \"No Name\";\n      }\n\n      const calendarId = MY_CALENDAR_ID;\n      const openHandle = createOpenHandle({calendarId, storyId})\n\n      const containerEl = document.createElement('span')\n      containerEl.style.display = 'flex'\n      containerEl.style.justifyContent = 'space-between'\n\n      const nameElement = document.createElement('i')\n      nameElement.innerHTML = name + ' ' // NOTE: space is for design, so not good way\n      containerEl.appendChild(nameElement)\n\n      const buttonElement = document.createElement('button')\n      buttonElement.innerHTML = ''\n      buttonElement.onclick = openHandle\n      containerEl.appendChild(buttonElement)\n\n      const arrayOfDomNodes = [containerEl];\n      return { domNodes: arrayOfDomNodes };\n    },\n    [calendar, createOpenHandle]\n  );\n\n  return {resourceGroupLabelContent};\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport TextField from \"@material-ui/core/TextField\";\n\nconst MAX_PERIOD_MONTH = 12 * 5;\n\nexport function TemplateOptionCard() {\n  const [schoolPeriod, setSchoolPeriod] = React.useState(12 * 2);\n  const [coopPeriod, setCoopPeriod] = React.useState(12);\n\n  const handleChangeSchoolPeriod = React.useCallback((e) => {\n    const value = (e.target.value);\n    const maybeNum = value === \"\" ? 0 : parseInt(value)\n    if (!Number.isInteger(maybeNum)) return;\n    setSchoolPeriod(maybeNum);\n  }, []);\n\n  const handleChangeCoopPeriod = React.useCallback((e) => {\n    const value = (e.target.value);\n    const maybeNum = value === \"\" ? 0 : parseInt(value)\n    if (!Number.isInteger(maybeNum)) return;\n    setCoopPeriod(maybeNum);\n  }, []);\n\n  return (\n    <Card>\n      <CardContent>\n        <h2>Template Options(TODO: not working yet)</h2>\n        <InnerContainer>\n          {/* School Period */}\n          <label>School Period(Month)</label>\n          <TextField value={schoolPeriod} onChange={handleChangeSchoolPeriod} />\n          <input\n            type=\"range\"\n            min=\"0\"\n            max={MAX_PERIOD_MONTH}\n            id=\"schoolPeriod\"\n            onChange={handleChangeSchoolPeriod}\n            value={schoolPeriod}\n          />\n\n          {/* Coop Period */}\n          <label>Co-op Period(Month)</label>\n          <TextField value={coopPeriod} onChange={handleChangeCoopPeriod} />\n          <input\n            type=\"range\"\n            min=\"0\"\n            max={MAX_PERIOD_MONTH}\n            id=\"schoolPeriod\"\n            onChange={handleChangeCoopPeriod}\n            value={coopPeriod}\n          />\n\n          {/* School start from */}\n          <label>School start from (Month)</label>\n          <span>{/* EMPTY */}</span>\n          <div>\n            {Array.from({ length: 12 }).map((_, idx) => {\n              const month = idx + 1;\n              return (\n                <CheckboxListItem key={month}>\n                  <label>{month}</label>\n                  <input type=\"checkbox\" value={month} />\n                </CheckboxListItem>\n              );\n            })}\n          </div>\n        </InnerContainer>\n      </CardContent>\n    </Card>\n  );\n}\n\nconst CheckboxListItem = styled.div`\n  display: inline-block;\n  margin-right: 1rem;\n`;\n\nconst InnerContainer = styled.div`\n  display: grid;\n  gap: 1rem;\n  padding: 0.3rem;\n  grid-template-columns: auto 2rem 1fr;\n  grid-template-rows: auto;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { ProfileCard } from \"../organisms/ProfileCard\";\nimport { TemplateList } from \"../templates/TemplateList\";\nimport { Footer } from \"../molecules/Footer\";\nimport { Header } from \"../molecules/Header\";\nimport { UserCalendarContainer } from \"../molecules/UserCalendarContainer\";\nimport { TemplateOptionCard } from \"../molecules/TemplateOptionCard\";\n\nconst TemplateHeader = () => <h2>Temapltes</h2>\n\nexport function CalendarPage() {\n  return (\n    <Container>\n      <Header />\n      <ContentContainer>\n        <UserCalendarContainer />\n\n        <ControllerContainer>\n          <ProfileCard />\n          <TemplateOptionCard />\n        </ControllerContainer>\n        \n        <TemplateContainer>\n          <TemplateHeader />\n          <TemplateList />\n        </TemplateContainer>\n      </ContentContainer>\n      <Footer />\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n`;\n\nconst ContentContainer = styled.div`\n  padding: 0 3rem;\n  display: grid;\n  gap: 5rem;\n`;\n\nconst ControllerContainer = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 2rem;\n`;\n\nconst TemplateContainer = styled.div``\n","import React from \"react\";\nimport { MuiPickersUtilsProvider } from \"./providers/MuiPickersUtilsProvider\";\nimport { CalendarPage } from \"./components/pages/CalendarPage\";\nimport './reset.css';\nimport './core.css';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <MuiPickersUtilsProvider>\n        <CalendarPage />\n      </MuiPickersUtilsProvider>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { combineReducers } from \"@reduxjs/toolkit\";\n\nimport userReducer from \"./features/user\";\nimport templateCalendarTableReducer from \"./features/templateCalendarTable\";\nimport userCalendarsReducer from \"./features/userCalendars\";\nimport eventModalReducer from \"./ui/eventModal\";\nimport storyModalReducer from \"./ui/storyModal\";\n\nconst uiReducer = combineReducers({\n  storyModal: storyModalReducer,\n  eventModal: eventModalReducer,\n});\n\nconst featuresReducer = combineReducers({\n  templateCalendar: templateCalendarTableReducer,\n  userCalendars: userCalendarsReducer,\n  user: userReducer,\n});\n\nconst rootReducer = combineReducers({\n  features: featuresReducer,\n  ui: uiReducer,\n});\n\nexport type RootState = ReturnType<typeof rootReducer>;\n\nexport default rootReducer;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport rootReducer from \"./rootReducer\";\n\nconst store = configureStore({\n  reducer: rootReducer,\n});\n\nif (process.env.NODE_ENV === \"development\" && module.hot) {\n  module.hot.accept(\"./rootReducer\", () => {\n    const newRootReducer = require(\"./rootReducer\").default;\n    store.replaceReducer(newRootReducer);\n  });\n}\n\nexport type AppDispatch = typeof store.dispatch;\n\nexport default store;\n","import React, { PropsWithChildren } from \"react\";\nimport { Provider } from \"react-redux\";\nimport store from \"../redux/store\";\n\nexport function ReactReduxProvider<T>({ children }: PropsWithChildren<T>) {\n  return <Provider store={store}>{children}</Provider>;\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { ReactReduxProvider } from './providers/ReactReduxProvider'\n\nconst render = () => {\n  ReactDOM.render(\n    <React.StrictMode>\n      <ReactReduxProvider>\n        <App />\n      </ReactReduxProvider>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n  );\n};\n\nrender();\n\n// for redux\nif (process.env.NODE_ENV === \"development\" && module.hot) {\n  module.hot.accept(\"./App\", render);\n}\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.warn))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}