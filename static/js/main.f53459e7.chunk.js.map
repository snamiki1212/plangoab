{"version":3,"sources":["providers/MuiPickersUtilsProvider.tsx","components/atoms/LogoImage.tsx","components/molecules/Footer.tsx","components/atoms/AboutModal.tsx","lib/date.ts","lib/uuid.ts","core/event/BaseEvent.ts","constants/fullcalendar/settings.ts","core/resource/BaseResource.ts","core/story/BaseStory.ts","redux/features/userCalendars.ts","redux/features/user.ts","lib/age.ts","redux/features/templateOption.ts","constants/fullcalendar/options.ts","constants/fullcalendar/templates.ts","core/story/PrivateCollegeStory/createPrivateCollegeStory.ts","constants/visa.ts","core/story/PublicCollegeStory/createPublicCollegeStory.ts","core/calendar/TemplateCalendar/createCalendar.ts","lib/util.ts","redux/features/templateCalendarTable.ts","hooks/useResetAllData.tsx","components/molecules/AboutContent.tsx","constants/meta.ts","hooks/useModal.tsx","assets/choose_school.gif","assets/copy_story.gif","assets/edit_calendar.gif","components/templates/StepperModal.tsx","components/molecules/Header.tsx","core/resource/createProfileResources.ts","core/event/createProfileEvents.ts","hooks/useUserCalendar.ts","core/calendar/UserCalendar/createUserCalendar.ts","core/story/ProfileStory/createProfileStory.ts","components/atoms/BaseFullCalendar.tsx","components/atoms/BaseCalendarContainer.tsx","redux/ui/storyModal.ts","redux/ui/eventModal.ts","hooks/useEvent.tsx","hooks/useStory.tsx","hooks/useUserCalendarCustomButtons.tsx","components/molecules/StoryModal.tsx","hooks/useResource.tsx","components/molecules/EventModal.tsx","components/molecules/UserCalendarContainer.tsx","hooks/useStoryModal.tsx","hooks/useEventModal.tsx","hooks/useResourceGroupLabelContentInUserCalendar.tsx","hooks/useUser.tsx","hooks/useTemplateOptions.tsx","components/molecules/UserCalendarCreater.tsx","components/organisms/UserCalendarArea.tsx","hooks/useTemplateCustomButtons.tsx","components/molecules/BaseTemplate.tsx","hooks/useResourceGroupLabelContentInTemplateCalendar.tsx","hooks/usePrivateCollegeCalendar.tsx","components/molecules/TemplateOption.tsx","components/molecules/TemplateOptionModal.tsx","components/templates/PrivateCollegeTemplate.tsx","components/templates/PublicCollegeTemplate.tsx","hooks/usePublicCollegeCalendar.tsx","components/templates/TemplateList.tsx","components/organisms/TemplateCalendarArea.tsx","components/templates/CalendarPageContent.tsx","components/atoms/PolicyExplanation.tsx","components/organisms/AdvancedOptions.tsx","components/pages/IntroFlow.tsx","components/pages/CalendarPage.tsx","components/pages/ErrorPage.tsx","ErrorBoundary.tsx","App.tsx","reportWebVitals.ts","redux/rootReducer.ts","redux/store/persistedReducer.ts","redux/store.ts","components/pages/LoadingPage.tsx","providers/ReactReduxProvider.tsx","index.tsx"],"names":["MuiPickersUtilsProvider","children","utils","DateFnsUtils","LogoImage","Img","src","alt","styled","img","Footer","Container","Box","div","AppName","AboutModal","isOpen","onClose","Dialog","open","DialogTitle","DialogContent","dividers","paddingZero","num","String","padStart","convertIsoToDateTime","isoStr","date","Date","YYYY","getYear","MM","getMonth","dd","getDate","convertIsoToYearAndMonth","_date","parseISO","uuid","uuidV4","initEvent","props","id","calendarId","_resourceId","resourceId","_storyId","storyId","_title","title","_start","start","_end","end","rest","undefined","extendedProps","updateEvent","event","params","Object","assign","FIELD","NAME_OF_STORY_ID","NAME_OF_ORDER","PRIVATE_COLLEGE_CALENDAR_ID","PUBLIC_COLLEGE_CALENDAR_ID","PROFILE_ID","RESOURCE_ID__SHARED__AGE","RESOURCE_ID__SHARED__LIMIT","initResource","createStoryName","birth","toISOString","updateStory","story","name","resources","newResources","reduce","prev","curr","idx","findIndex","resource","console","warn","newResource","events","map","initialState","calendars","userCalendarsSlice","createSlice","reducers","reset","removeCalendar","state","action","payload","filter","calendar","updateCalendars","pushResource","calendarIdx","storyIdx","stories","push","updateResources","removeResource","addStory","removeStory","newStory","updateStoryById","_story","addEvent","removeEvent","eventId","_event","newEvent","eventIdx","updateEventById","oldEvent","actions","resetAction","removeCalendarAction","updateCalendarsAction","pushResourceAction","removeResourceAction","addStoryAction","removeStoryAction","updateStoryAction","updateStoryByIdAction","addEventAction","removeEventAction","updateEventAction","updateEventByIdAction","selectUserCalendar","features","userCalendars","birthday","addYears","age","userSlice","updateBirthday","_birthday","today","birthDate","getFullYear","m","calcAge","updateBirthdayAction","selectUser","user","option","schoolPeriod","coopPeriod","pgwpPeriod","workingholidayPeriod","monthsOfStartSchool","slices","update","selectTemplateOption","templateOption","selectWithWorkingholiday","updateAction","MY_TIME_LINE_NAME","initialView","resourceGroupField","views","type","duration","year","buttonText","resourceConfigs","resourceOrder","resourceAreaColumns","field","FULL_CALENDAR_CONFIGS","slotLabelFormat","month","schedulerLicenseKey","nowIndicator","height","DARK_BLUE","GREEN","YELLOW","RESOURCE_TEMPLATE__VISA_STUDY","RESOURCE_TEMPLATE__VISA_COOP","RESOURCE_TEMPLATE__VISA_WORKING_HOLIDAY","RESOURCE_TEMPLATE__VISA_PGWP","RESOURCE_TEMPLATE__STATUS","EVENT_TEMPLATE__VISA_COOP","backgroundColor","EVENT_TEMPLATE__VISA_STUDY","EVENT_TEMPLATE__VISA_PGWP","EVENT_TEMPLATE__VISA_WORKING_HOLIDAY","EVENT_TEMPLATE__VISA_READY_WORKING_HOLIDAY","EVENT_TEMPLATE__STATUS_WORKER","eventBackgroundCoor","EVENT_TEMPLATE__STATUS_STATUS","createPrivateCollegeStory","options","startDate","canWorkingholiday","doCreateStory","coopVisaResourceId","addMonths","studyVisaResourceId","workingholidayResourceId","dateAsStartWorkingHoliday","setMonth","statusResourceId","createPublicCollegeStory","pgwpVisaResourceId","scopeAges","stop","step","a","b","range","now","createStoryList","storyCreater","compareAsc","flatMap","templateCalendarTable","upsertPrivateCollegeStories","_calendar","createPrivateCollegeCalendar","upsertPublicCollegeStories","createPublicCollegeCalendar","upsertPrivateCollegeStoriesAction","upsertPublicCollegeStoriesAction","selectPrivateCollegeCalendar","templateCalendar","selectPublicCollegeCalendar","useResetAllData","dispatch","useDispatch","React","useCallback","resetUserCalendarsAction","resetUserAction","resetTemplateOptionAction","resetTemplateCalendarAction","AboutContent","handleResetAllData","window","confirm","Button","onClick","variant","color","href","useModal","init","useState","setIsOpen","close","toggle","steps","label","content","GIF_ChooseScool","GIF_CopyStory","GIF_EditCalendar","StepperModal","activeStepIdx","setActiveStepIdx","handleNext","handleBack","isFirstStep","useMemo","isLastStep","length","Stepper","activeStep","alternativeLabel","Step","StepLabel","disabled","Header","isOpenAbout","openAbout","closeAbout","isOpenHowTo","openHowTo","closeHowTo","AppBar","position","style","background","Toolbar","width","Title","ButtonContainer","span","createProfileResources","withWorkingholiday","list","createProfileEvents","workingHolidayLimitEvents","createWorkingHolidayLimitEvents","ageEventList","i","getRangeNumbers","getLastYear","index","setFullYear","lastYearDate","endDate","endOfLimit","endOfApplication","useUserCalendar","useSelector","createUserCalendar","_birth","createProfileStory","select","info","startStr","endStr","remove","BaseFullCalendar","plugins","interactionPlugin","resourceTimelinePlugin","listPlugin","BaseCalendarContainer","StyledContainer","slice","_payload","pop","_action","selectIsOpen","ui","storyModal","selectStoryModal","selectStory","find","pushAction","popAction","eventModal","selectEventModal","selectEvent","useEvent","idSet","updateById","useStory","data","create","_calendarId","initStory","profileStoryId","ADD_STORY_BUTTON","REMOVE_CALENDAR_BUTTON","StoryModal","useForm","register","handleSubmit","_resources","lastResource","order","_order","_resource","useResource","handleRemoveStory","handleRemoveResource","handleAddResource","onSubmit","DialogTitleInner","TextField","inputRef","defaultValue","fieldName","Fieldset","ref","value","AddResourceButtonContainer","UpdateButtonContainer","DialogActions","fieldset","EventModal","onRemove","onUpdate","configs","resourcesInitiallyExpanded","headerToolbar","left","center","right","UserCalendarContainer","useStoryModal","pushStoryModal","popStoryModal","isOpenStoryModal","useEventModal","pushEventModal","popEventModal","isOpenEventModal","resourceGroupLabelContent","createOpenHandle","groupValue","openHandle","containerEl","document","createElement","display","justifyContent","nameElement","innerHTML","appendChild","buttonElement","onclick","domNodes","useResourceGroupLabelContentInUserCalendar","click","customButtons","removeUserCalendar","createStory","handleAddStory","handleRemoveCalendar","text","useUserCalendarCustomButtons","Paper","elevation","PaperHeader","Divider","CalendarContainer","eventClick","selectable","editable","eventResize","eventDrop","initialDate","useUser","setBirth","useTemplateOptions","newTemplateOption","UserCalendarCreater","initUserCalendar","handleCreate","UserCalendarArea","existsCalendar","OPEN_OPTION_BUTTON","useTemplateCustomButtons","handleOpenOption","BaseTemplate","createClickHandel","privateCollegeTemplate","publicCollegeTemplate","myCalendar","myCalendarId","updatedStory","clickHandle","marginLeft","borderRadius","cursor","useResourceGroupLabelContentInTemplateCalendar","MONTHS","TemplateOption","updateOption","handleChangeSchoolPeriod","target","maybeNum","parseInt","Number","isInteger","handleChangeCoopPeriod","handleChangePgwpPeriod","handleChangeWorkingholidayPeriod","handleCheck","newMonthsOfStartSchool","includes","_month","sort","PeriodContainer","onChange","InputProps","endAdornment","InputAdornment","monthNum","isChecked","CheckboxListItem","Checkbox","checked","TemplateOptionModal","PrivateCollegeTemplate","generate","usePrivateCollegeCalendar","useEffect","PublicCollegeTemplate","args","usePublicCollegeCalendar","TabPanel","shouldShow","role","p","TemplateList","selectedIdx","setSelectedIdx","handleChange","newValue","Description","Tabs","textColor","indicatorColor","Tab","icon","Icon","textTransform","TemplateCalendarArea","CalendarPageContent","InnerContainer","PolicyExplanation","Text","AdvancedOptions","useReducer","opens","size","IntroFlow","handleFinish","handleDateChange","InputContainer","Avatar","DatePicker","disableFuture","openTo","format","ButtonsContainer","CalendarPage","ContentContainer","ErrorPage","LogoContainer","ErrorBoundary","hasError","error","errorInfo","this","Component","App","className","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","uiReducer","combineReducers","storyModalReducer","eventModalReducer","featuresReducer","templateCalendarTableReducer","templateOptionReducer","userCalendarsReducer","userReducer","rootReducer","persistConfig","key","storage","whitelist","persistedReducer","persistReducer","store","configureStore","reducer","middleware","getDefaultMiddleware","serializableCheck","LoadingPage","CircularProgress","ReactReduxProvider","PersistProvider","persistor","persistStore","loading","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f53459e7.chunk.js","sourcesContent":["import React, { PropsWithChildren } from \"react\";\nimport { MuiPickersUtilsProvider as RawMuiPickersUtilsProvider } from \"@material-ui/pickers\";\nimport DateFnsUtils from \"@date-io/date-fns\";\n\nexport function MuiPickersUtilsProvider<T>({ children }: PropsWithChildren<T>) {\n  return (\n    <RawMuiPickersUtilsProvider utils={DateFnsUtils}>\n      {children}\n    </RawMuiPickersUtilsProvider>\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nexport function LogoImage() {\n  return (\n    <Img src={process.env.PUBLIC_URL + \"/logo457_transparent.png\"} alt=\"img\" />\n  );\n}\n\nconst Img = styled.img`\n  display: inline-block;\n  height: 100%;\n  object-fit: contain;\n  background: rgba(255, 255, 255, 0.9);\n  padding: 0.3rem;\n  border-radius: 50%;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { LogoImage } from \"../atoms/LogoImage\";\n\nexport function Footer() {\n  return (\n    <Container>\n      <Box>\n        <LogoImage />\n        <AppName>Plangoab</AppName>\n      </Box>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  padding: 5rem;\n  border: 1px solid lightgray;\n  box-shadow: 0 -4px 4px lightgray;\n`;\n\nconst Box = styled.div`\n  display: flex;\n  align-items: center;\n  height: 5rem;\n`;\n\nconst AppName = styled.div`\n  font-size: 3rem;\n  padding: 1rem;\n`;\n","import React, { PropsWithChildren } from \"react\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\n\ntype Props = {\n  isOpen: boolean;\n  onClose: () => void;\n};\n\nexport function AboutModal({\n  isOpen,\n  onClose,\n  children,\n}: PropsWithChildren<Props>) {\n  return (\n    <Dialog onClose={onClose} open={isOpen}>\n      <DialogTitle>About Plangoab</DialogTitle>\n      <DialogContent dividers={true}>{children}</DialogContent>\n    </Dialog>\n  );\n}\n","import { getYear, getMonth, getDate, parseISO } from \"date-fns\";\n\nconst paddingZero = (num: number) => String(num).padStart(2, \"0\");\n\nexport const convertIsoToDateTime = (isoStr: string | Date) => {\n  const date = typeof isoStr === \"string\" ? new Date(isoStr) : isoStr;\n  const YYYY = getYear(date);\n  const MM = paddingZero(getMonth(date) + 1);\n  const dd = paddingZero(getDate(date));\n  return `${YYYY}-${MM}-${dd}`;\n};\n\nexport const convertIsoToYearAndMonth = (_date: Date | string) => {\n  const date = typeof _date === \"string\" ? parseISO(_date) : _date;\n  const YYYY = getYear(date);\n  const MM = paddingZero(getMonth(date) + 1);\n  return `${YYYY}-${MM}`;\n};\n","import { v4 as uuidV4 } from \"uuid\";\n\nexport function uuid() {\n  return uuidV4();\n}\n","import { EventInput } from \"@fullcalendar/react\";\nimport { uuid } from \"../../lib/uuid\";\nimport { convertIsoToYearAndMonth } from \"../../lib/date\";\n\nexport type BaseEvent = EventInput & {\n  extendedProps: {\n    calendarId: string;\n    storyId: string;\n  };\n};\n\nexport const initEvent = (props?: Partial<BaseEvent>): BaseEvent => {\n  const {\n    id,\n    calendarId,\n    resourceId: _resourceId,\n    storyId: _storyId,\n    title: _title,\n    start: _start,\n    end: _end,\n    ...rest\n  } = props ?? {};\n\n  const storyId = _storyId ?? uuid();\n  const resourceId = _resourceId ?? uuid();\n  const title = _title ?? \"New Event\";\n  const start = _start ? convertIsoToYearAndMonth(_start as Date) : undefined;\n  const end = _end ? convertIsoToYearAndMonth(_end as Date) : undefined;\n\n  return {\n    id: id ?? uuid(),\n    resourceId,\n    storyId,\n    title,\n    start,\n    end,\n    extendedProps: {\n      calendarId,\n      storyId,\n      resourceId,\n    },\n    ...rest,\n  };\n};\n\nexport const updateEvent = (\n  event: BaseEvent,\n  params: Partial<Omit<BaseEvent, \"id\" | \"storyId\">>\n): BaseEvent => {\n  const title = params.title;\n  const start = params.start\n    ? convertIsoToYearAndMonth(params.start as Date)\n    : undefined;\n  const end = params.end\n    ? convertIsoToYearAndMonth(params.end as Date)\n    : undefined;\n\n  const newEvent = Object.assign(\n    { ...event },\n    title !== undefined && { title },\n    start !== undefined && { start },\n    end !== undefined && { end }\n  );\n\n  return newEvent;\n};\n","// field name\nexport const FIELD = \"FIELD\";\n\n// keys\nexport const NAME_OF_STORY_ID = \"storyId\";\nexport const NAME_OF_ORDER = \"order\";\nexport const RESOURCE_NAME_KEY = \"RESOURCE_NAME_KEY\";\n\n// calendar ID\nexport const PRIVATE_COLLEGE_CALENDAR_ID = \"PRIVATE_COLLEGE_CALENDAR_ID\";\nexport const PUBLIC_COLLEGE_CALENDAR_ID = \"PUBLIC_COLLEGE_CALENDAR_ID\";\n\n// story ID\nexport const PROFILE_ID = \"PROFILE_ID\";\n\n// resouce ID\nexport const RESOURCE_ID__SHARED__AGE = \"RESOURCE_ID__SHARED__AGE\";\nexport const RESOURCE_ID__SHARED__LIMIT = \"RESOURCE_ID__SHARED__LIMIT\";\nexport const RESOURCE_ID__VISA__STUDY = \"RESOURCE_ID__VISA__STUDY\";\nexport const RESOURCE_ID__VISA__COOP = \"RESOURCE_ID__VISA__COOP\";\nexport const RESOURCE_ID__VISA__WORKING_HOLIDAY =\n  \"RESOURCE_ID__VISA__WORKING_HOLIDAY\";\nexport const RESOURCE_ID__STATUS__WORKER = \"RESOURCE_ID__STATUS__WORKER\";\nexport const RESOURCE_ID__STATUS__STUDENT = \"RESOURCE_ID__STATUS__STUDENT\";\nexport const RESOURCE_ID__ETC__CUSTOM = \"RESOURCE_ID__ETC__CUSTOM\";\nexport type RESOURCE_ID =\n  | typeof RESOURCE_ID__SHARED__AGE\n  | typeof RESOURCE_ID__SHARED__LIMIT\n  | typeof RESOURCE_ID__VISA__STUDY\n  | typeof RESOURCE_ID__VISA__COOP\n  | typeof RESOURCE_ID__VISA__WORKING_HOLIDAY\n  | typeof RESOURCE_ID__STATUS__WORKER\n  | typeof RESOURCE_ID__STATUS__STUDENT\n  | typeof RESOURCE_ID__ETC__CUSTOM;\n","import { uuid } from \"../../lib/uuid\";\nimport {\n  NAME_OF_ORDER,\n  NAME_OF_STORY_ID,\n  FIELD,\n} from \"../../constants/fullcalendar/settings\";\n\nexport type BaseResource = {\n  id: string;\n  calendarId: string;\n  [FIELD]: string;\n  [NAME_OF_STORY_ID]: string;\n  [NAME_OF_ORDER]?: number;\n  eventBorderColor?: string;\n};\n\nexport const initResource = (props?: Partial<BaseResource>): BaseResource => {\n  const { id, calendarId, storyId, ...rest } = props ?? {};\n  return {\n    id: id ?? uuid(),\n    calendarId: calendarId ?? uuid(),\n    [NAME_OF_STORY_ID]: storyId ?? uuid(),\n    [NAME_OF_ORDER]: 1,\n    [FIELD]: \"Field\",\n    ...rest,\n  };\n};\n","import { convertIsoToYearAndMonth } from \"../../lib/date\";\nimport { BaseEvent, initEvent } from \"../event/BaseEvent\";\nimport { BaseResource, initResource } from \"../resource/BaseResource\";\nimport { uuid } from \"../../lib/uuid\";\n\nexport type BaseStory = {\n  id: string;\n  calendarId: string;\n  events: BaseEvent[];\n  resources: BaseResource[];\n  name: string;\n};\n\nexport const removeEvent = (story: BaseStory, eventId: string): BaseStory => {\n  const newEvents = story.events.filter((event) => event.id !== eventId);\n  return { ...story, events: newEvents };\n};\n\nexport const createStoryName = (birth: Date) => {\n  return \"from \" + convertIsoToYearAndMonth(birth.toISOString());\n};\n\nexport const initStory = (props?: Partial<BaseStory>): BaseStory => {\n  const { id, calendarId: _calendarId, events, resources, name } = props ?? {};\n\n  const storyId = id ?? uuid();\n  const calendarId = _calendarId ?? uuid();\n  const eventId = uuid();\n  const _events = events ?? [initEvent({ id: eventId, storyId })];\n  const _resources = resources ?? [initResource({ calendarId, storyId })];\n\n  return {\n    id: storyId,\n    calendarId,\n    events: _events,\n    resources: _resources,\n    name: name ?? \"No Name\",\n  };\n};\n\nexport const updateStory = (story: BaseStory, params: Partial<BaseStory>) => {\n  if (!!params.name) story = { ...story, name: params.name };\n  if (!!params.resources) {\n    const newResources = params.resources.reduce((prev, curr) => {\n      const idx = story.resources.findIndex(\n        (resource) => resource.id === curr.id\n      );\n\n      const shouldCreate = idx === -1;\n      if (shouldCreate) {\n        // NOTE: no create case\n        console.warn(\"not upsert feature on story yet\");\n        return prev;\n      }\n\n      // Update case\n      const resource = story.resources[idx];\n      const newResource = { ...resource, ...curr };\n      return [...prev, newResource];\n    }, [] as BaseResource[]);\n    story = { ...story, resources: newResources };\n  }\n  if (!!params.calendarId) {\n    story = {\n      ...story,\n      calendarId: params.calendarId,\n      events: story.events.map((event) => ({\n        ...event,\n        calendarId: params.calendarId,\n      })),\n      resources: story.resources.map((resource) => ({\n        ...resource,\n        calendarId: params.calendarId as string,\n      })),\n    };\n  }\n  return story;\n};\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../rootReducer\";\nimport { BaseCalendar } from \"../../core/calendar/BaseCalendar\";\nimport { BaseStory, updateStory } from \"../../core/story/BaseStory\";\nimport { BaseEvent, updateEvent } from \"../../core/event/BaseEvent\";\nimport { BaseResource } from \"../../core/resource/BaseResource\";\n\ntype Calendar = BaseCalendar;\ntype RemoveCalendarPayload = { calendarId: string };\ntype UpdateCalendarsPayload = { calendars: Calendar[] };\ntype PushRsourceAction = {\n  calendarId: string;\n  storyId: string;\n  resource: BaseResource;\n};\ntype UpdateResourcesPayload = {\n  calendarId: string;\n  storyId: string;\n  newResources: BaseResource[];\n};\ntype RemoveResourcePayload = {\n  calendarId: string;\n  storyId: string;\n  resourceId: string;\n};\ntype AddStoryPayload = { calendarId: string; story: BaseStory };\ntype RemoveStoryPayload = { calendarId: string; storyId: string };\ntype UpdateStoryPayload = {\n  calendarId: string;\n  storyId: string;\n  newStory: BaseStory;\n};\ntype UpdateStoryByIdPayload = {\n  calendarId: string;\n  storyId: string;\n  params: Partial<BaseStory>;\n};\ntype AddEventPayload = {\n  calendarId: string;\n  storyId: string;\n  event: BaseEvent;\n};\ntype RemoveEventPayload = {\n  calendarId: string;\n  storyId: string;\n  eventId: string;\n};\ntype UpdateEventPayload = {\n  calendarId: string;\n  storyId: string;\n  eventId: string;\n  newEvent: BaseEvent;\n};\ntype UpdateEventByIdPayload = {\n  calendarId: string;\n  storyId: string;\n  eventId: string;\n  params: Partial<BaseEvent>;\n};\n\nconst initialState = {\n  calendars: [] as Calendar[],\n};\n\nconst userCalendarsSlice = createSlice({\n  name: \"userCalendars\",\n  initialState,\n  reducers: {\n    reset: () => initialState,\n    removeCalendar(state, action: PayloadAction<RemoveCalendarPayload>) {\n      const { calendarId } = action.payload;\n      state.calendars = state.calendars.filter(\n        (calendar) => calendar.id !== calendarId\n      );\n    },\n    updateCalendars(state, action: PayloadAction<UpdateCalendarsPayload>) {\n      const { calendars } = action.payload;\n      state.calendars = calendars;\n    },\n    pushResource(state, action: PayloadAction<PushRsourceAction>) {\n      const { calendarId, storyId, resource } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFind = calendarIdx === -1;\n      if (cannotFind) {\n        console.warn(\"cannot find calendar on updateResource\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateResource\", calendarId);\n        return;\n      }\n\n      // process\n      state.calendars[calendarIdx].stories[storyIdx].resources.push(resource);\n    },\n    updateResources(state, action: PayloadAction<UpdateResourcesPayload>) {\n      const { calendarId, storyId, newResources } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFind = calendarIdx === -1;\n      if (cannotFind) {\n        console.warn(\"cannot find calendar on updateResource\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateResource\", calendarId);\n        return;\n      }\n\n      // query\n      state.calendars[calendarIdx].stories[storyIdx].resources = newResources;\n    },\n    removeResource(state, action: PayloadAction<RemoveResourcePayload>) {\n      const { calendarId, resourceId, storyId } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFind = calendarIdx === -1;\n      if (cannotFind) {\n        console.warn(\"cannot find calendar on removeResource\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on removeResource\", calendarId);\n        return;\n      }\n\n      // query\n      state.calendars[calendarIdx].stories[\n        storyIdx\n      ].resources = state.calendars[calendarIdx].stories[\n        storyIdx\n      ].resources.filter((resource) => resource.id !== resourceId);\n    },\n    addStory(state, action: PayloadAction<AddStoryPayload>) {\n      const { calendarId, story } = action.payload;\n      const idx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFind = idx === -1;\n      if (cannotFind) {\n        console.warn(\"cannot find calendar on addStory\", calendarId);\n        return;\n      }\n      state.calendars[idx].stories.push(story);\n    },\n    removeStory(state, action: PayloadAction<RemoveStoryPayload>) {\n      const { calendarId, storyId } = action.payload;\n      const idx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFind = idx === -1;\n      if (cannotFind) {\n        console.warn(\"cannot find calendar on removeStory\", calendarId);\n        return;\n      }\n      state.calendars[idx].stories = state.calendars[idx].stories.filter(\n        (story) => story.id !== storyId\n      );\n    },\n    updateStory(state, action: PayloadAction<UpdateStoryPayload>) {\n      const { calendarId, storyId, newStory } = action.payload;\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFindCalendar = calendarIdx === -1;\n      if (cannotFindCalendar) {\n        console.warn(\"cannot find calendar on updateStory\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateStory\", calendarId);\n        return;\n      }\n\n      // prcess\n      state.calendars[calendarIdx].stories[storyIdx] = newStory;\n    },\n    updateStoryById(state, action: PayloadAction<UpdateStoryByIdPayload>) {\n      const { calendarId, storyId, params } = action.payload;\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFindCalendar = calendarIdx === -1;\n      if (cannotFindCalendar) {\n        console.warn(\"cannot find calendar on updateStory\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateStory\", calendarId);\n        return;\n      }\n\n      // update\n      const _story = state.calendars[calendarIdx].stories[storyIdx];\n      const newStory = updateStory({ ..._story }, params);\n      state.calendars[calendarIdx].stories[storyIdx] = newStory;\n    },\n    addEvent(state, action: PayloadAction<AddEventPayload>) {\n      const { calendarId, storyId, event } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFindCalendar = calendarIdx === -1;\n      if (cannotFindCalendar) {\n        console.warn(\"cannot find calendar on addEvent\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on addEvent\", calendarId);\n        return;\n      }\n\n      // addd\n      state.calendars[calendarIdx].stories[storyIdx].events.push(event);\n    },\n    removeEvent(state, action: PayloadAction<RemoveEventPayload>) {\n      const { calendarId, storyId, eventId } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFindCalendar = calendarIdx === -1;\n      if (cannotFindCalendar) {\n        console.warn(\"cannot find calendar on removeEvent\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on removeEvent\", storyIdx);\n        return;\n      }\n\n      // remove\n      state.calendars[calendarIdx].stories[storyIdx].events = state.calendars[\n        calendarIdx\n      ].stories[storyIdx].events.filter((_event) => _event.id !== eventId);\n    },\n    updateEvent(state, action: PayloadAction<UpdateEventPayload>) {\n      const { calendarId, storyId, eventId, newEvent } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFindCalendar = calendarIdx === -1;\n      if (cannotFindCalendar) {\n        console.warn(\"cannot find calendar on updateStory\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateStory\", calendarId);\n        return;\n      }\n\n      // event\n      const eventIdx = state.calendars[calendarIdx].stories[\n        storyIdx\n      ].events.findIndex((event) => event.id === eventId);\n      const cannotFindEvent = eventIdx === -1;\n      if (cannotFindEvent) {\n        console.warn(\"cannot find event on updateEvent\");\n        return;\n      }\n\n      // prcess\n      state.calendars[calendarIdx].stories[storyIdx].events[\n        eventIdx\n      ] = newEvent;\n    },\n    updateEventById(state, action: PayloadAction<UpdateEventByIdPayload>) {\n      const { calendarId, storyId, eventId, params } = action.payload;\n\n      // calendar\n      const calendarIdx = state.calendars.findIndex(\n        (calendar) => calendar.id === calendarId\n      );\n      const cannotFindCalendar = calendarIdx === -1;\n      if (cannotFindCalendar) {\n        console.warn(\"cannot find calendar on updateStory\", calendarId);\n        return;\n      }\n\n      // story\n      const storyIdx = state.calendars[calendarIdx].stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateStory\", calendarId);\n        return;\n      }\n\n      // event\n      const eventIdx = state.calendars[calendarIdx].stories[\n        storyIdx\n      ].events.findIndex((event) => event.id === eventId);\n      const cannotFindEvent = eventIdx === -1;\n      if (cannotFindEvent) {\n        console.warn(\"cannot find event on updateEvent\");\n        return;\n      }\n\n      // prcess\n      const oldEvent =\n        state.calendars[calendarIdx].stories[storyIdx].events[eventIdx];\n      const newEvent = updateEvent(oldEvent, params);\n      state.calendars[calendarIdx].stories[storyIdx].events[\n        eventIdx\n      ] = newEvent;\n    },\n  },\n});\n\nexport const {\n  reset: resetAction,\n\n  // calendars\n  removeCalendar: removeCalendarAction,\n  updateCalendars: updateCalendarsAction,\n\n  // resources\n  pushResource: pushResourceAction,\n  updateResources: updateResourcesAction,\n  removeResource: removeResourceAction,\n\n  // story\n  addStory: addStoryAction,\n  removeStory: removeStoryAction,\n  updateStory: updateStoryAction,\n  updateStoryById: updateStoryByIdAction,\n\n  // event\n  addEvent: addEventAction,\n  removeEvent: removeEventAction,\n  updateEvent: updateEventAction,\n  updateEventById: updateEventByIdAction,\n} = userCalendarsSlice.actions;\n\nexport default userCalendarsSlice.reducer;\n\n// export const selectUserCalendars = (state: RootState) =>\n//   state.userCalendars.calendars;\n\nexport const selectUserCalendar = (state: RootState) =>\n  state.features.userCalendars.calendars[0]; // NOTE: now calendars have only 1 calendar.\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { calcAge } from \"../../lib/age\";\nimport { addYears } from \"date-fns\";\nimport { RootState } from \"../rootReducer\";\n\nconst PERSONA_AGE = 25;\nconst personaBirth = addYears(new Date(), -PERSONA_AGE).toISOString();\n\ntype UpdatePayload = {\n  birthday: string;\n};\nconst initialState = {\n  birthday: personaBirth,\n  age: PERSONA_AGE, // TODO: should not save here. only select.\n};\nconst userSlice = createSlice({\n  name: \"user\",\n  initialState,\n  reducers: {\n    reset: () => initialState,\n    updateBirthday(state, action: PayloadAction<UpdatePayload>) {\n      const { birthday } = action.payload;\n      state.birthday = birthday;\n      state.age = calcAge(birthday);\n    },\n  },\n});\n\nexport const {\n  updateBirthday: updateBirthdayAction,\n  reset: resetAction,\n} = userSlice.actions;\n\nexport default userSlice.reducer;\n\nexport const selectUser = (state: RootState) => state.features.user;\n","export const getRangeNumbers = (start: number, end: number) => {\n  let list = [] as number[];\n  for (let i = start; i <= end; i++) {\n    list.push(i);\n  }\n  return list;\n};\n\n// REF: https://stackoverflow.com/a/7091965/8842333\nexport const calcAge = (_birthday: string | Date) => {\n  const today = new Date();\n  const birthDate = new Date(_birthday);\n  let age = today.getFullYear() - birthDate.getFullYear();\n\n  const m = today.getMonth() - birthDate.getMonth();\n  if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\n    age--;\n  }\n  return age;\n};\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../rootReducer\";\n\ntype UpdatePayload = {\n  schoolPeriod: number;\n  coopPeriod: number;\n  pgwpPeriod: number;\n  workingholidayPeriod: number;\n  monthsOfStartSchool: number[];\n};\n\nconst initialState = {\n  option: {\n    schoolPeriod: 12 * 2,\n    coopPeriod: 12 * 2,\n    pgwpPeriod: 12 * 3,\n    workingholidayPeriod: 12,\n    monthsOfStartSchool: [1, 5, 9],\n  },\n};\n\nconst slices = createSlice({\n  name: \"templateOption\",\n  initialState,\n  reducers: {\n    reset: () => initialState,\n    update(state, action: PayloadAction<UpdatePayload>) {\n      state.option = action.payload;\n    },\n  },\n});\n\nexport const selectTemplateOption = (state: RootState) =>\n  state.features.templateOption.option;\n\nexport const selectWithWorkingholiday = (state: RootState) =>\n  state.features.templateOption.option.workingholidayPeriod > 0;\n\nexport const { reset: resetAction, update: updateAction } = slices.actions;\n\nexport default slices.reducer;\n","import { NAME_OF_STORY_ID, NAME_OF_ORDER, FIELD } from \"./settings\";\n\nexport const MY_TIME_LINE_NAME = \"MY_TIME_LINE_NAME\";\n\nexport const AGE_OF_START_STORY = 21;\n\nconst slotLabelFormat = [{ year: \"numeric\" }, { month: \"numeric\" }];\n\nconst initialView = { initialView: MY_TIME_LINE_NAME } as const;\n\nconst resourceGroupField = { resourceGroupField: NAME_OF_STORY_ID } as const;\n\nconst schedulerLicenseKey = {\n  schedulerLicenseKey: \"GPL-My-Project-Is-Open-Source\",\n} as const;\n\nconst views = {\n  [MY_TIME_LINE_NAME]: {\n    type: \"resourceTimelineYear\",\n    duration: { year: 15 },\n    buttonText: \"TIME_LINE\",\n  },\n} as const;\n\nconst nowIndicator = {\n  nowIndicator: true,\n} as const;\n\nconst resourceConfigs = {\n  resourceOrder: NAME_OF_ORDER,\n} as const;\n\nconst styleConfigs = {\n  height: 600,\n};\n\nconst resourceAreaColumns = [\n  {\n    field: FIELD,\n  },\n];\n\nexport const FULL_CALENDAR_CONFIGS = {\n  views,\n  slotLabelFormat,\n  resourceAreaColumns,\n  ...initialView,\n  ...resourceGroupField,\n  ...schedulerLicenseKey,\n  ...nowIndicator,\n  ...resourceConfigs,\n  ...styleConfigs,\n} as const;\n","import { FIELD } from \"./settings\";\n\nexport const DARK_BLUE = \"#00008b\";\nconst GREEN = \"#8fbc8b\";\nconst YELLOW = \"#ffd700\";\nconst RED = \"#e73758\";\n\nexport const RESOURCE_TEMPLATE__VISA_STUDY = {\n  [FIELD]: \"Study VISA\",\n  eventBorderColor: DARK_BLUE,\n};\n\nexport const RESOURCE_TEMPLATE__VISA_COOP = {\n  [FIELD]: \"Co-op VISA\",\n  eventBorderColor: DARK_BLUE,\n};\n\nexport const RESOURCE_TEMPLATE__VISA_WORKING_HOLIDAY = {\n  [FIELD]: \"Working Holiday VISA\",\n  eventBorderColor: DARK_BLUE,\n};\n\nexport const RESOURCE_TEMPLATE__VISA_PGWP = {\n  [FIELD]: \"PGWP VISA\",\n  eventBorderColor: DARK_BLUE,\n};\n\nexport const RESOURCE_TEMPLATE__STATUS = {\n  [FIELD]: \"Status\",\n  eventBorderColor: DARK_BLUE,\n};\n\nexport const EVENT_TEMPLATE__VISA_COOP = {\n  title: \"Co-op VISA\",\n  backgroundColor: GREEN,\n};\n\nexport const EVENT_TEMPLATE__VISA_STUDY = {\n  title: \"Study VISA\",\n  backgroundColor: GREEN,\n};\n\nexport const EVENT_TEMPLATE__VISA_PGWP = {\n  title: \"PGWP VISA\",\n  backgroundColor: GREEN,\n};\n\nexport const EVENT_TEMPLATE__VISA_WORKING_HOLIDAY = {\n  title: \"Working Holiday VISA\",\n  backgroundColor: GREEN,\n};\n\nexport const EVENT_TEMPLATE__VISA_READY_WORKING_HOLIDAY = {\n  title: \"Ready for Working Holiday VISA\",\n  backgroundColor: RED,\n};\n\nexport const EVENT_TEMPLATE__STATUS_WORKER = {\n  title: \"Worker\",\n  eventBackgroundCoor: YELLOW,\n};\n\nexport const EVENT_TEMPLATE__STATUS_STATUS = {\n  title: \"Student\",\n  eventBackgroundCoor: YELLOW,\n};\n","import { addMonths, addYears, setMonth } from \"date-fns\";\nimport {\n  // resources\n  RESOURCE_TEMPLATE__VISA_STUDY,\n  RESOURCE_TEMPLATE__VISA_COOP,\n  RESOURCE_TEMPLATE__VISA_WORKING_HOLIDAY,\n  RESOURCE_TEMPLATE__STATUS,\n  // events\n  EVENT_TEMPLATE__VISA_COOP,\n  EVENT_TEMPLATE__VISA_STUDY,\n  EVENT_TEMPLATE__VISA_READY_WORKING_HOLIDAY,\n  EVENT_TEMPLATE__VISA_WORKING_HOLIDAY,\n  EVENT_TEMPLATE__STATUS_STATUS,\n  EVENT_TEMPLATE__STATUS_WORKER,\n} from \"../../../constants/fullcalendar/templates\";\nimport {\n  NAME_OF_STORY_ID,\n  NAME_OF_ORDER,\n} from \"../../../constants/fullcalendar/settings\";\nimport { MONTH_OF_WORKING_HOLIDAY_APPLICATION_LIMIT } from \"../../../constants/visa\";\nimport { uuid } from \"../../../lib/uuid\";\nimport { PrivateCollegeStory } from \"./model\";\nimport { createStoryName } from \"../BaseStory\";\nimport { TemplateOption } from \"../../calendar/BaseCalendar\";\nimport { BaseEvent, initEvent } from \"../../event/BaseEvent\";\nimport { BaseResource, initResource } from \"../../resource/BaseResource\";\nimport { convertIsoToYearAndMonth } from \"../../../lib/date\";\n\nexport const createPrivateCollegeStory = (\n  {\n    startDate,\n    calendarId,\n    canWorkingholiday,\n  }: {\n    startDate: Date;\n    calendarId: string;\n    canWorkingholiday: boolean;\n  },\n  options: TemplateOption\n): PrivateCollegeStory => {\n  const storyId = uuid();\n  const name = createStoryName(startDate);\n\n  const [resources, events] = doCreateStory(\n    {\n      calendarId,\n      storyId,\n      startDate,\n      canWorkingholiday,\n    },\n    options\n  );\n  return {\n    id: storyId,\n    calendarId,\n    name,\n    events,\n    resources,\n  };\n};\n\nconst doCreateStory = (\n  {\n    calendarId,\n    storyId,\n    startDate,\n    canWorkingholiday,\n  }: {\n    calendarId: string;\n    storyId: string;\n    startDate: Date;\n    canWorkingholiday: boolean;\n  },\n  options: TemplateOption\n) => {\n  let resources = [] as BaseResource[];\n  let events = [] as BaseEvent[];\n\n  const { schoolPeriod, coopPeriod, workingholidayPeriod } = options;\n  const withCoop = coopPeriod > 0;\n\n  if (withCoop) {\n    const coopVisaResourceId = uuid();\n    resources.push(\n      initResource({\n        ...RESOURCE_TEMPLATE__VISA_COOP,\n        id: coopVisaResourceId,\n        calendarId,\n        [NAME_OF_STORY_ID]: storyId,\n        [NAME_OF_ORDER]: 1,\n      })\n    );\n    events.push(\n      initEvent({\n        ...EVENT_TEMPLATE__VISA_COOP,\n        id: uuid(),\n        resourceId: coopVisaResourceId,\n        storyId,\n        start: convertIsoToYearAndMonth(startDate),\n        end: convertIsoToYearAndMonth(addMonths(startDate, coopPeriod)),\n        extendedProps: {\n          resourceId: coopVisaResourceId,\n          calendarId,\n          storyId,\n        },\n      })\n    );\n  }\n\n  // StudyVisa\n  const studyVisaResourceId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCE_TEMPLATE__VISA_STUDY,\n      id: studyVisaResourceId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 2,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENT_TEMPLATE__VISA_STUDY,\n      id: uuid(),\n      resourceId: studyVisaResourceId,\n      storyId,\n      start: convertIsoToYearAndMonth(startDate),\n      end: convertIsoToYearAndMonth(addMonths(startDate, schoolPeriod)),\n      extendedProps: {\n        resourceId: studyVisaResourceId,\n        calendarId,\n        storyId,\n      },\n    })\n  );\n\n  if (canWorkingholiday) {\n    const workingholidayResourceId = uuid();\n    resources.push(\n      initResource({\n        ...RESOURCE_TEMPLATE__VISA_WORKING_HOLIDAY,\n        id: workingholidayResourceId,\n        calendarId,\n        [NAME_OF_STORY_ID]: storyId,\n        [NAME_OF_ORDER]: 3,\n      })\n    );\n    const dateAsStartWorkingHoliday = addMonths(startDate, schoolPeriod);\n    events.push(\n      initEvent({\n        ...EVENT_TEMPLATE__VISA_WORKING_HOLIDAY,\n        id: uuid(),\n        resourceId: workingholidayResourceId,\n        storyId,\n        start: convertIsoToYearAndMonth(dateAsStartWorkingHoliday),\n        end: convertIsoToYearAndMonth(\n          addMonths(dateAsStartWorkingHoliday, workingholidayPeriod)\n        ),\n        extendedProps: {\n          resourceId: workingholidayResourceId,\n          calendarId,\n          storyId,\n        },\n      })\n    );\n    events.push(\n      initEvent({\n        ...EVENT_TEMPLATE__VISA_READY_WORKING_HOLIDAY,\n        id: uuid(),\n        resourceId: workingholidayResourceId,\n        storyId,\n        start: convertIsoToYearAndMonth(\n          setMonth(\n            addYears(dateAsStartWorkingHoliday, -1),\n            MONTH_OF_WORKING_HOLIDAY_APPLICATION_LIMIT\n          )\n        ),\n        end: convertIsoToYearAndMonth(dateAsStartWorkingHoliday),\n        extendedProps: {\n          resourceId: workingholidayResourceId,\n          calendarId,\n          storyId,\n        },\n      })\n    );\n  }\n\n  // worker status\n  const statusResourceId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCE_TEMPLATE__STATUS,\n      id: statusResourceId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 5,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENT_TEMPLATE__STATUS_WORKER,\n      id: uuid(),\n      resourceId: statusResourceId,\n      storyId,\n      start: convertIsoToYearAndMonth(addMonths(startDate, schoolPeriod)),\n      end: convertIsoToYearAndMonth(\n        addMonths(startDate, schoolPeriod + workingholidayPeriod)\n      ),\n      extendedProps: {\n        resourceId: statusResourceId,\n        calendarId,\n        storyId,\n      },\n    }),\n    initEvent({\n      ...EVENT_TEMPLATE__STATUS_STATUS,\n      id: uuid(),\n      resourceId: statusResourceId,\n      storyId,\n      start: convertIsoToYearAndMonth(startDate),\n      end: convertIsoToYearAndMonth(addMonths(startDate, schoolPeriod)),\n      extendedProps: {\n        resourceId: statusResourceId,\n        calendarId,\n        storyId,\n      },\n    })\n  );\n\n  return [[...resources], [...events]] as [BaseResource[], BaseEvent[]];\n};\n","export const WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE = 31;\nexport const MONTH_OF_WORKING_HOLIDAY_APPLICATION_LIMIT = 8;\n","import { addMonths, addYears, setMonth } from \"date-fns\";\nimport {\n  // resources\n  RESOURCE_TEMPLATE__VISA_STUDY,\n  RESOURCE_TEMPLATE__VISA_WORKING_HOLIDAY,\n  RESOURCE_TEMPLATE__VISA_PGWP,\n  RESOURCE_TEMPLATE__STATUS,\n  // events\n  EVENT_TEMPLATE__VISA_STUDY,\n  EVENT_TEMPLATE__VISA_PGWP,\n  EVENT_TEMPLATE__VISA_READY_WORKING_HOLIDAY,\n  EVENT_TEMPLATE__VISA_WORKING_HOLIDAY,\n  EVENT_TEMPLATE__STATUS_STATUS,\n  EVENT_TEMPLATE__STATUS_WORKER,\n} from \"../../../constants/fullcalendar/templates\";\nimport {\n  NAME_OF_STORY_ID,\n  NAME_OF_ORDER,\n} from \"../../../constants/fullcalendar/settings\";\nimport { MONTH_OF_WORKING_HOLIDAY_APPLICATION_LIMIT } from \"../../../constants/visa\";\nimport { uuid } from \"../../../lib/uuid\";\nimport { PrivateCollegeStory } from \"./model\";\nimport { createStoryName } from \"../BaseStory\";\nimport { TemplateOption } from \"../../calendar/BaseCalendar\";\nimport { BaseEvent, initEvent } from \"../../event/BaseEvent\";\nimport { BaseResource, initResource } from \"../../resource/BaseResource\";\nimport { convertIsoToYearAndMonth } from \"../../../lib/date\";\n\nexport const createPublicCollegeStory = (\n  {\n    startDate,\n    calendarId,\n    canWorkingholiday,\n  }: {\n    startDate: Date;\n    calendarId: string;\n    canWorkingholiday: boolean;\n  },\n  options: TemplateOption\n): PrivateCollegeStory => {\n  const storyId = uuid();\n  const name = createStoryName(startDate);\n\n  const [resources, events] = doCreateStory(\n    {\n      calendarId,\n      storyId,\n      startDate,\n      canWorkingholiday,\n    },\n    options\n  );\n  return {\n    id: storyId,\n    calendarId,\n    name,\n    events,\n    resources,\n  };\n};\n\nconst doCreateStory = (\n  {\n    calendarId,\n    storyId,\n    startDate,\n    canWorkingholiday,\n  }: {\n    calendarId: string;\n    storyId: string;\n    startDate: Date;\n    canWorkingholiday: boolean;\n  },\n  options: TemplateOption\n) => {\n  let resources = [] as BaseResource[];\n  let events = [] as BaseEvent[];\n\n  const { schoolPeriod, pgwpPeriod, workingholidayPeriod } = options;\n  const withPgwp = pgwpPeriod > 0;\n\n  if (withPgwp) {\n    const pgwpVisaResourceId = uuid();\n    resources.push(\n      initResource({\n        ...RESOURCE_TEMPLATE__VISA_PGWP,\n        id: pgwpVisaResourceId,\n        calendarId,\n        [NAME_OF_STORY_ID]: storyId,\n        [NAME_OF_ORDER]: 1,\n      })\n    );\n    events.push(\n      initEvent({\n        ...EVENT_TEMPLATE__VISA_PGWP,\n        id: uuid(),\n        resourceId: pgwpVisaResourceId,\n        storyId,\n        start: convertIsoToYearAndMonth(addMonths(startDate, schoolPeriod)),\n        end: convertIsoToYearAndMonth(\n          addMonths(startDate, schoolPeriod + pgwpPeriod)\n        ),\n        extendedProps: {\n          resourceId: pgwpVisaResourceId,\n          calendarId,\n          storyId,\n        },\n      })\n    );\n  }\n\n  // StudyVisa\n  const studyVisaResourceId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCE_TEMPLATE__VISA_STUDY,\n      id: studyVisaResourceId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 2,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENT_TEMPLATE__VISA_STUDY,\n      id: uuid(),\n      resourceId: studyVisaResourceId,\n      storyId,\n      start: convertIsoToYearAndMonth(startDate),\n      end: convertIsoToYearAndMonth(addMonths(startDate, schoolPeriod)),\n      extendedProps: {\n        resourceId: studyVisaResourceId,\n        calendarId,\n        storyId,\n      },\n    })\n  );\n\n  if (canWorkingholiday) {\n    const workingholidayResourceId = uuid();\n    resources.push(\n      initResource({\n        ...RESOURCE_TEMPLATE__VISA_WORKING_HOLIDAY,\n        id: workingholidayResourceId,\n        calendarId,\n        [NAME_OF_STORY_ID]: storyId,\n        [NAME_OF_ORDER]: 3,\n      })\n    );\n    const dateAsStartWorkingHoliday = addMonths(\n      startDate,\n      schoolPeriod + pgwpPeriod\n    );\n    events.push(\n      initEvent({\n        ...EVENT_TEMPLATE__VISA_WORKING_HOLIDAY,\n        id: uuid(),\n        resourceId: workingholidayResourceId,\n        storyId,\n        start: convertIsoToYearAndMonth(dateAsStartWorkingHoliday),\n        end: convertIsoToYearAndMonth(\n          addMonths(dateAsStartWorkingHoliday, workingholidayPeriod)\n        ),\n        extendedProps: {\n          resourceId: workingholidayResourceId,\n          calendarId,\n          storyId,\n        },\n      })\n    );\n    events.push(\n      initEvent({\n        ...EVENT_TEMPLATE__VISA_READY_WORKING_HOLIDAY,\n        id: uuid(),\n        resourceId: workingholidayResourceId,\n        storyId,\n        start: convertIsoToYearAndMonth(\n          setMonth(\n            addYears(dateAsStartWorkingHoliday, -1),\n            MONTH_OF_WORKING_HOLIDAY_APPLICATION_LIMIT\n          )\n        ),\n        end: convertIsoToYearAndMonth(dateAsStartWorkingHoliday),\n        extendedProps: {\n          resourceId: workingholidayResourceId,\n          calendarId,\n          storyId,\n        },\n      })\n    );\n  }\n\n  // worker status\n  const statusResourceId = uuid();\n  resources.push(\n    initResource({\n      ...RESOURCE_TEMPLATE__STATUS,\n      id: statusResourceId,\n      calendarId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 5,\n    })\n  );\n  events.push(\n    initEvent({\n      ...EVENT_TEMPLATE__STATUS_WORKER,\n      id: uuid(),\n      resourceId: statusResourceId,\n      storyId,\n      start: convertIsoToYearAndMonth(addMonths(startDate, schoolPeriod)),\n      end: convertIsoToYearAndMonth(\n        addMonths(startDate, schoolPeriod + pgwpPeriod + workingholidayPeriod)\n      ),\n      extendedProps: {\n        resourceId: statusResourceId,\n        calendarId,\n        storyId,\n      },\n    }),\n    initEvent({\n      ...EVENT_TEMPLATE__STATUS_STATUS,\n      id: uuid(),\n      resourceId: statusResourceId,\n      storyId,\n      start: convertIsoToYearAndMonth(startDate),\n      end: convertIsoToYearAndMonth(addMonths(startDate, schoolPeriod)),\n      extendedProps: {\n        resourceId: statusResourceId,\n        calendarId,\n        storyId,\n      },\n    })\n  );\n\n  return [[...resources], [...events]] as [BaseResource[], BaseEvent[]];\n};\n","import { addYears, setMonth, compareAsc } from \"date-fns\";\nimport {\n  PrivateCollegeCalendar,\n  PRIVATE_COLLEGE_CALENDAR_ID,\n  PUBLIC_COLLEGE_CALENDAR_ID,\n} from \"./model\";\nimport { AGE_OF_START_STORY } from \"../../../constants/fullcalendar/options\";\nimport { WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE } from \"../../../constants/visa\";\nimport { range } from \"../../../lib/util\";\nimport { createPrivateCollegeStory } from \"../../story/PrivateCollegeStory/createPrivateCollegeStory\";\nimport { createPublicCollegeStory } from \"../../story/PublicCollegeStory/createPublicCollegeStory\";\nimport { BaseStory } from \"../../story/BaseStory\";\nimport { TemplateOption } from \"../BaseCalendar\";\n\nconst scopeAges = range(\n  AGE_OF_START_STORY,\n  WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE\n);\n\nconst shouldViewPast = false;\nconst now = new Date();\n\nconst createStoryList = (\n  {\n    birth,\n    calendarId,\n    canWorkingholiday,\n    storyCreater,\n  }: {\n    birth: Date;\n    calendarId: string;\n    canWorkingholiday: boolean;\n    storyCreater: Function;\n  },\n  options: TemplateOption\n): BaseStory[] => {\n  const monthsOfStartSchool = options.monthsOfStartSchool;\n\n  return scopeAges\n    .map((num) => addYears(birth, num))\n    .filter((date) => {\n      if (shouldViewPast) return true;\n      const isPastPeriod = compareAsc(now, date) !== -1;\n      return !isPastPeriod;\n    })\n    .flatMap((startDate) => {\n      const startDateListInYear = monthsOfStartSchool.map((month) =>\n        setMonth(startDate, month - 1)\n      );\n      return startDateListInYear;\n    })\n    .map((startDate) => {\n      const params = { startDate, calendarId, canWorkingholiday };\n      return storyCreater(params, options);\n    });\n};\n\nexport const createPrivateCollegeCalendar = (\n  {\n    birth,\n    canWorkingholiday,\n  }: {\n    birth: Date;\n    canWorkingholiday: boolean;\n  },\n  options: TemplateOption\n): PrivateCollegeCalendar => {\n  const params = {\n    birth,\n    calendarId: PRIVATE_COLLEGE_CALENDAR_ID,\n    canWorkingholiday,\n    storyCreater: createPrivateCollegeStory,\n  };\n  const stories = createStoryList(params, options);\n  return {\n    id: PRIVATE_COLLEGE_CALENDAR_ID,\n    stories,\n  };\n};\n\nexport const createPublicCollegeCalendar = (\n  {\n    birth,\n    canWorkingholiday,\n  }: {\n    birth: Date;\n    canWorkingholiday: boolean;\n  },\n  options: TemplateOption\n): PrivateCollegeCalendar => {\n  const params = {\n    birth,\n    calendarId: PUBLIC_COLLEGE_CALENDAR_ID,\n    canWorkingholiday,\n    storyCreater: createPublicCollegeStory,\n  };\n  const stories = createStoryList(params, options);\n  return {\n    id: PUBLIC_COLLEGE_CALENDAR_ID,\n    stories,\n  };\n};\n","// REF: https://stackoverflow.com/a/15453499/8842333\nexport function range(start: number, stop: number, step?: number) {\n  var a = [start],\n    b = start;\n  while (b < stop) {\n    a.push((b += step || 1));\n  }\n  return a;\n}\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport {\n  createPrivateCollegeCalendar,\n  createPublicCollegeCalendar,\n} from \"../../core/calendar/TemplateCalendar/createCalendar\";\nimport {\n  PRIVATE_COLLEGE_CALENDAR_ID,\n  PUBLIC_COLLEGE_CALENDAR_ID,\n} from \"../../core/calendar/TemplateCalendar/model\";\nimport { TemplateOption } from \"../../core/calendar/BaseCalendar\";\nimport {\n  PrivateCollegeCalendar,\n  PublicCollegeCalendar,\n} from \"../../core/calendar/TemplateCalendar/model\";\nimport { RootState } from \"../rootReducer\";\n\ntype UpsertPrivateCollegeStoriesPayload = {\n  birth: string;\n  canWorkingholiday: boolean;\n  options: TemplateOption;\n};\n\ntype UpsertPublicCollegeStoriesPayload = {\n  birth: string;\n  canWorkingholiday: boolean;\n  options: TemplateOption;\n};\n\nconst initialState = {\n  [PRIVATE_COLLEGE_CALENDAR_ID]: undefined as\n    | PrivateCollegeCalendar\n    | undefined,\n  [PUBLIC_COLLEGE_CALENDAR_ID]: undefined as PublicCollegeCalendar | undefined,\n};\nconst templateCalendarTable = createSlice({\n  name: \"templateCalendarTable\",\n  initialState,\n  reducers: {\n    reset: () => initialState,\n    upsertPrivateCollegeStories(\n      state,\n      action: PayloadAction<UpsertPrivateCollegeStoriesPayload>\n    ) {\n      const { birth, canWorkingholiday, options } = action.payload;\n\n      const _calendar = createPrivateCollegeCalendar(\n        {\n          birth: new Date(birth), // TODO: don't new here\n          canWorkingholiday,\n        },\n        options\n      );\n      state[PRIVATE_COLLEGE_CALENDAR_ID] = _calendar;\n    },\n    upsertPublicCollegeStories(\n      state,\n      action: PayloadAction<UpsertPublicCollegeStoriesPayload>\n    ) {\n      const { birth, canWorkingholiday, options } = action.payload;\n\n      const _calendar = createPublicCollegeCalendar(\n        {\n          birth: new Date(birth), // TODO: don't new here\n          canWorkingholiday,\n        },\n        options\n      );\n      state[PUBLIC_COLLEGE_CALENDAR_ID] = _calendar;\n    },\n  },\n});\n\nexport default templateCalendarTable.reducer;\n\nexport const {\n  reset: resetAction,\n  upsertPrivateCollegeStories: upsertPrivateCollegeStoriesAction,\n  upsertPublicCollegeStories: upsertPublicCollegeStoriesAction,\n} = templateCalendarTable.actions;\n\nexport const selectPrivateCollegeCalendar = (state: RootState) =>\n  state.features.templateCalendar[PRIVATE_COLLEGE_CALENDAR_ID];\n\nexport const selectPublicCollegeCalendar = (state: RootState) =>\n  state.features.templateCalendar[PUBLIC_COLLEGE_CALENDAR_ID];\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { resetAction as resetUserCalendarsAction } from \"../redux/features/userCalendars\";\nimport { resetAction as resetUserAction } from \"../redux/features/user\";\nimport { resetAction as resetTemplateOptionAction } from \"../redux/features/templateOption\";\nimport { resetAction as resetTemplateCalendarAction } from \"../redux/features/templateCalendarTable\";\n\nexport function useResetAllData() {\n  const dispatch = useDispatch();\n\n  const reset = React.useCallback(() => {\n    dispatch(resetUserCalendarsAction());\n    dispatch(resetUserAction());\n    dispatch(resetTemplateOptionAction());\n    dispatch(resetTemplateCalendarAction());\n  }, [dispatch]);\n\n  return { reset } as const;\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Button from \"@material-ui/core/Button\";\nimport { useResetAllData } from \"../../hooks/useResetAllData\";\nimport * as AuthorInfo from \"../../constants/meta\";\n\nexport function AboutContent() {\n  const { reset } = useResetAllData();\n\n  const handleResetAllData = React.useCallback(() => {\n    if (!window.confirm(\"Would you remove all data in Plangoab?\")) return;\n    reset();\n  }, [reset]);\n\n  return (\n    <Container>\n      <div>\n        <h2>About</h2>\n        <p>\n          A web calendar for a person going abroad. Generating a suitable\n          schedule and customizable.\n        </p>\n      </div>\n\n      <div>\n        <h2>How to use</h2>\n        <p>\n          <h3>Sections</h3>\n          There are two sections.\n          <br />\n          <li>1. My calendar</li>\n          <li>2. Template calendars</li>\n        </p>\n\n        <p>\n          <h3>Instruction</h3>\n          <li>\n            1. Pick appropriate plan from a template calendar to click \"Copy to\n            my calendar\".\n          </li>\n          <li>\n            2. Stories are copied from a template calendar into my calendar.\n          </li>\n          <li>3. Edit my story and events in my calendar.</li>\n        </p>\n      </div>\n\n      <div>\n        <h2>Tips</h2>\n        <li>Zoom in: [Command] + [-]</li>\n        <li>Zoom out: [Command] + [+]</li>\n      </div>\n\n      <div>\n        <h2>Reset All Data</h2>\n        <div>\n          <p>Would you like to reset all data in Plangoab?</p>\n          <Button\n            onClick={handleResetAllData}\n            variant=\"outlined\"\n            color=\"secondary\"\n          >\n            RESET ALL DATA\n          </Button>\n        </div>\n      </div>\n\n      <div>\n        <h2>License</h2>\n        <li>GPL-3.0</li>\n      </div>\n\n      <div>\n        <h2>Author</h2>\n        <li>\n          <a href={AuthorInfo.MY_GITHUB_URL}>GitHub:snamiki1212</a>\n        </li>\n        <li>\n          <a href={AuthorInfo.MY_TWITTER_URL}>Twitter:snamiki1212</a>\n        </li>\n        <li>\n          <a href={AuthorInfo.MY_PORTFOLIO}>Portfolio</a>\n        </li>\n      </div>\n\n      <div>\n        <h2>Source Code</h2>\n        <span>\n          Plangoab is OSS managed at{\" \"}\n          <a href={AuthorInfo.THIS_GITHUB_URL}>GitHub</a> so you can check all\n          of code.\n        </span>\n      </div>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  display: grid;\n  gap: 2rem;\n`;\n","export const THIS_GITHUB_URL = \"https://github.com/snamiki1212/plangoab\";\nexport const MY_GITHUB_URL = \"https://github.com/snamiki1212\";\nexport const MY_TWITTER_URL = \"https://twitter.com/snamiki1212\";\nexport const MY_PORTFOLIO = \"https://snamiki1212.github.io\";\n","import React from'react';\n\nexport const useModal = (init?: boolean) => {\n  const [isOpen, setIsOpen] = React.useState(!!init)\n\n  const open = React.useCallback(() => {\n    setIsOpen(true);\n  }, []);\n\n  const close = React.useCallback(() => {\n    setIsOpen(false);\n  }, []);\n\n  const toggle = React.useCallback(() => {\n    setIsOpen(prev => !prev)\n  }, []);\n\n  return {isOpen, open, close, toggle}\n}","export default __webpack_public_path__ + \"static/media/choose_school.c7f2b371.gif\";","export default __webpack_public_path__ + \"static/media/copy_story.b2490017.gif\";","export default __webpack_public_path__ + \"static/media/edit_calendar.c2bec5c3.gif\";","import React from \"react\";\nimport Stepper from \"@material-ui/core/Stepper\";\nimport Step from \"@material-ui/core/Step\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\n//\nimport GIF_ChooseScool from \"../../assets/choose_school.gif\";\nimport GIF_CopyStory from \"../../assets/copy_story.gif\";\nimport GIF_EditCalendar from \"../../assets/edit_calendar.gif\";\n\ntype Props = {\n  isOpen: boolean;\n  onClose: () => void;\n};\n\nconst steps = [\n  {\n    label: \"Choose School Type\",\n    content: (\n      <div>\n        <div>Choose Scool!</div>\n        <img src={GIF_ChooseScool} alt=\"chooseScool\" />\n      </div>\n    ),\n  },\n  {\n    label: \"Click Copy button\",\n    content: (\n      <div>\n        <div>Click [copy] Button and then check your calendar!</div>\n        <img src={GIF_CopyStory} alt=\"CopyStory\" />\n      </div>\n    ),\n  },\n  {\n    label: \"Edit your calendar\",\n    content: (\n      <div>\n        <div>Edit your plan!</div>\n        <img src={GIF_EditCalendar} alt=\"Edit Calendar\" />\n      </div>\n    ),\n  },\n  { label: \"Done!\", content: <div>:D Let's Enjoy!</div> },\n] as const;\n\nexport function StepperModal({ isOpen, onClose }: Props) {\n  const [activeStepIdx, setActiveStepIdx] = React.useState<number>(0);\n  const handleNext = React.useCallback(\n    () => setActiveStepIdx((prev) => prev + 1),\n    []\n  );\n  const handleBack = React.useCallback(\n    () => setActiveStepIdx((prev) => prev - 1),\n    []\n  );\n\n  const isFirstStep = React.useMemo(() => activeStepIdx === 0, [activeStepIdx]);\n  const isLastStep = React.useMemo(() => activeStepIdx === steps.length - 1, [\n    activeStepIdx,\n  ]);\n\n  return (\n    <Dialog open={isOpen} onClose={onClose}>\n      <DialogTitle>\n        <span>How To Use</span>\n        <Stepper activeStep={activeStepIdx} alternativeLabel>\n          {steps.map(({ label }) => (\n            <Step key={label}>\n              <StepLabel>{label}</StepLabel>\n            </Step>\n          ))}\n        </Stepper>\n      </DialogTitle>\n      <DialogContent>\n        <div>{steps[activeStepIdx].content}</div>\n      </DialogContent>\n      <div>\n        <Button onClick={handleBack} disabled={isFirstStep}>\n          Back\n        </Button>\n        {isLastStep ? (\n          <Button onClick={onClose}>Let's try!</Button>\n        ) : (\n          <Button onClick={handleNext} color=\"primary\" variant=\"contained\">\n            Next\n          </Button>\n        )}\n        <Button onClick={onClose}>Close</Button>\n      </div>\n    </Dialog>\n  );\n}\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport styled from \"styled-components\";\nimport { AboutModal } from \"../atoms/AboutModal\";\nimport { LogoImage } from \"../atoms/LogoImage\";\nimport { AboutContent } from \"./AboutContent\";\nimport { useModal } from \"../../hooks/useModal\";\nimport { StepperModal } from \"../templates/StepperModal\";\n\nexport function Header() {\n  const {\n    isOpen: isOpenAbout,\n    open: openAbout,\n    close: closeAbout,\n  } = useModal();\n  const { isOpen: isOpenHowTo, open: openHowTo, close: closeHowTo } = useModal(\n    true\n  );\n\n  return (\n    <>\n      <AppBar position=\"static\" style={{ background: \"#fff\", color: \"#000\" }}>\n        <Toolbar>\n          <div style={{ width: \"50px\", height: \"50px\" }}>\n            <LogoImage />\n          </div>\n          <Title>Plangoab</Title>\n          <ButtonContainer>\n            <Button\n              variant=\"contained\"\n              onClick={openHowTo}\n              style={{ background: \"white\" }}\n            >\n              HowTo\n            </Button>\n            <Button\n              variant=\"contained\"\n              onClick={openAbout}\n              style={{ background: \"white\" }}\n            >\n              About Plangoab\n            </Button>\n          </ButtonContainer>\n        </Toolbar>\n      </AppBar>\n\n      {/* Modal */}\n      <AboutModal isOpen={isOpenAbout} onClose={closeAbout}>\n        <AboutContent />\n      </AboutModal>\n      <StepperModal isOpen={isOpenHowTo} onClose={closeHowTo} />\n    </>\n  );\n}\n\nconst Title = styled.span`\n  font-size: 2rem;\n  padding: 1rem;\n`;\n\nconst ButtonContainer = styled.div`\n  margin-left: auto;\n`;\n","import { DARK_BLUE } from \"../../constants/fullcalendar/templates\";\nimport {\n  FIELD,\n  NAME_OF_STORY_ID,\n  NAME_OF_ORDER,\n} from \"../../constants/fullcalendar/settings\";\nimport {\n  // PROFILE_ID,\n  RESOURCE_ID__SHARED__AGE,\n  RESOURCE_ID__SHARED__LIMIT,\n} from \"../../constants/fullcalendar/settings\";\nimport { BaseResource } from \"./BaseResource\";\n\nexport const createProfileResources = ({\n  calendarId,\n  storyId,\n  withWorkingholiday,\n}: {\n  calendarId: string;\n  storyId: string;\n  withWorkingholiday: boolean;\n}): BaseResource[] => {\n  const list = [\n    {\n      id: RESOURCE_ID__SHARED__AGE,\n      [FIELD]: \"Age\",\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 0,\n      calendarId,\n      eventBorderColor: DARK_BLUE,\n    },\n  ];\n\n  if (withWorkingholiday) {\n    list.push({\n      id: RESOURCE_ID__SHARED__LIMIT,\n      [FIELD]: \"Working Holiday\",\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 1,\n      calendarId,\n      eventBorderColor: DARK_BLUE,\n    });\n  }\n\n  return list;\n};\n","import { addMonths, addYears, setMonth } from \"date-fns\";\n\nimport {\n  RESOURCE_ID__SHARED__AGE,\n  RESOURCE_ID__SHARED__LIMIT,\n} from \"../../constants/fullcalendar/settings\";\nimport { getRangeNumbers } from \"../../lib/age\";\nimport { uuid } from \"../../lib/uuid\";\nimport { convertIsoToDateTime } from \"../../lib/date\";\nimport { WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE } from \"../../constants/visa\";\nimport { BaseEvent } from \"../event/BaseEvent\";\n\nexport const createProfileEvents = ({\n  startDate,\n  storyId,\n  calendarId,\n  withWorkingholiday,\n  workingholidayPeriod,\n}: {\n  startDate: Date;\n  storyId: string;\n  calendarId: string;\n  withWorkingholiday: boolean;\n  workingholidayPeriod: number;\n}): BaseEvent[] => {\n  const workingHolidayLimitEvents = withWorkingholiday\n    ? createWorkingHolidayLimitEvents({\n        startDate,\n        storyId,\n        calendarId,\n        workingholidayPeriod,\n      })\n    : [];\n\n  // create age events\n  const startYear = new Date(startDate).getFullYear();\n  const endYear = getLastYear();\n  const years = getRangeNumbers(startYear, endYear);\n  const ageEventList = years.map((year, index) => {\n    const start = (() => {\n      startDate.setFullYear(year);\n      const isoStr = startDate.toISOString();\n      const str = convertIsoToDateTime(isoStr);\n      return str;\n    })();\n\n    const isoStr = addMonths(new Date(start), +11).toISOString();\n    const end = convertIsoToDateTime(isoStr);\n\n    return {\n      id: uuid(),\n      title: `Age:${index}`,\n      start,\n      end,\n      storyId,\n      resourceId: RESOURCE_ID__SHARED__AGE,\n      extendedProps: {\n        resourceId: RESOURCE_ID__SHARED__AGE,\n        calendarId,\n        storyId,\n      },\n    };\n  });\n\n  return [...workingHolidayLimitEvents, ...ageEventList];\n};\n\nconst getLastYear = () => {\n  const BUFFER_YEAR = 10;\n  const date = new Date();\n  return addYears(date, BUFFER_YEAR).getFullYear();\n};\n\nconst createWorkingHolidayLimitEvents = ({\n  startDate,\n  storyId,\n  calendarId,\n  workingholidayPeriod,\n}: {\n  startDate: Date;\n  storyId: string;\n  calendarId: string;\n  workingholidayPeriod: number;\n}): BaseEvent[] => {\n  const lastYearDate = addYears(\n    startDate,\n    WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE\n  );\n  const start = convertIsoToDateTime(startDate.toISOString());\n  const endDate = addMonths(lastYearDate, workingholidayPeriod);\n  const endOfLimit = convertIsoToDateTime(endDate.toISOString());\n  const endOfApplication = convertIsoToDateTime(\n    addYears(setMonth(endDate, +6), -1).toISOString()\n  );\n\n  const limitation = {\n    id: uuid(),\n    title: \"Available Scope of WorkingHoliday\",\n    start,\n    end: endOfLimit,\n    resourceId: RESOURCE_ID__SHARED__LIMIT,\n    storyId,\n    extendedProps: {\n      resourceId: RESOURCE_ID__SHARED__LIMIT,\n      storyId,\n      calendarId,\n    },\n  };\n\n  const application = {\n    id: uuid(),\n    title: \"Application Limit\",\n    start,\n    end: endOfApplication,\n    storyId,\n    resourceId: RESOURCE_ID__SHARED__LIMIT,\n    extendedProps: {\n      storyId,\n      resourceId: RESOURCE_ID__SHARED__LIMIT,\n      calendarId,\n    },\n  };\n  return [limitation, application];\n};\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { DateSelectArg } from \"@fullcalendar/react\";\nimport { uuid } from \"../lib/uuid\";\nimport { createProfileStory } from \"../core/story/ProfileStory/createProfileStory\";\nimport { initEvent } from \"../core/event/BaseEvent\";\nimport { createUserCalendar } from \"../core/calendar/UserCalendar/createUserCalendar\";\nimport {\n  updateCalendarsAction,\n  removeCalendarAction,\n  addEventAction,\n  selectUserCalendar,\n} from \"../redux/features/userCalendars\";\n\nexport const useUserCalendar = () => {\n  const dispatch = useDispatch();\n  const calendar = useSelector(selectUserCalendar);\n\n  const init = React.useCallback(\n    ({\n      birthday,\n      workingholidayPeriod,\n    }: {\n      birthday: string | Date;\n      workingholidayPeriod: number;\n    }) => {\n      const calendarId = uuid();\n      const story = createProfileStory({\n        birth: birthday,\n        calendarId,\n        workingholidayPeriod,\n      });\n      const _calendar = createUserCalendar({\n        id: calendarId,\n        stories: [story],\n      });\n      const _calendars = [_calendar];\n      dispatch(updateCalendarsAction({ calendars: _calendars }));\n    },\n    [dispatch]\n  );\n\n  const select = React.useCallback(\n    (info: DateSelectArg) => {\n      if (!info.resource) {\n        console.warn(\"Unexpected data that info does not have resource.\");\n        return;\n      }\n\n      // storyId\n      const storyId = info.resource.extendedProps.storyId;\n      if (!storyId) {\n        console.warn(\"Unexpected data not including storyId.\");\n        return;\n      }\n\n      // calendarId\n      const calendarId = info.resource.extendedProps.calendarId;\n      if (!calendarId) {\n        console.warn(\"Unexpected data not including calendarId.\");\n        return;\n      }\n\n      const newEvent = initEvent({\n        id: uuid(),\n        resourceId: info.resource.id,\n        calendarId,\n        storyId,\n        start: info.startStr,\n        end: info.endStr,\n      });\n\n      dispatch(addEventAction({ event: newEvent, calendarId, storyId }));\n    },\n    [dispatch]\n  );\n\n  const remove = React.useCallback(\n    (calendarId: string) => {\n      dispatch(removeCalendarAction({ calendarId }));\n    },\n    [dispatch]\n  );\n\n  const stories = React.useMemo(() => calendar?.stories ?? [], [calendar]);\n\n  const events = React.useMemo(\n    () => calendar?.stories.flatMap((story) => story.events) ?? [],\n    [calendar]\n  );\n\n  const resources = React.useMemo(\n    () => calendar?.stories.flatMap((story) => story.resources) ?? [],\n    [calendar]\n  );\n\n  return {\n    // callbacks\n    init,\n    select,\n    remove,\n\n    // params\n    calendar,\n    stories,\n    events,\n    resources,\n  } as const;\n};\n","import { UserCalendar } from \"./model\";\nimport { ProfileStory } from \"../../story/ProfileStory/model\";\n\ntype Story = ProfileStory;\n\nexport const createUserCalendar = ({\n  id,\n  stories,\n}: {\n  id: string;\n  stories: Story[];\n}): UserCalendar => {\n  return {\n    id,\n    stories,\n  };\n};\n","import { ProfileStory } from \"./model\";\nimport { PROFILE_ID } from \"../../../constants/fullcalendar/settings\";\nimport { createProfileResources } from \"../../resource/createProfileResources\";\nimport { createProfileEvents } from \"../../event/createProfileEvents\";\n\nconst STORY_NAME = \"Profile\";\n\nexport const createProfileStory = ({\n  birth,\n  calendarId,\n  workingholidayPeriod,\n}: {\n  birth: string | Date;\n  calendarId: string;\n  workingholidayPeriod: number;\n}): ProfileStory => {\n  const _birth = new Date(birth);\n  const storyId = PROFILE_ID;\n  const withWorkingholiday = workingholidayPeriod > 0;\n  return {\n    id: storyId,\n    calendarId,\n    name: STORY_NAME,\n    resources: createProfileResources({\n      calendarId,\n      storyId,\n      withWorkingholiday,\n    }),\n    events: createProfileEvents({\n      calendarId,\n      storyId,\n      startDate: _birth,\n      withWorkingholiday,\n      workingholidayPeriod,\n    }),\n  };\n};\n","import React, { PropsWithChildren } from \"react\";\nimport FullCalendarLib from \"@fullcalendar/react\";\nimport resourceTimelinePlugin from \"@fullcalendar/resource-timeline\";\nimport listPlugin from \"@fullcalendar/list\";\nimport interactionPlugin from \"@fullcalendar/interaction\";\nimport { FULL_CALENDAR_CONFIGS } from \"../../constants/fullcalendar/options\";\n\nexport function BaseFullCalendar<T>(props: PropsWithChildren<T>) {\n  return (\n    <FullCalendarLib\n      {...FULL_CALENDAR_CONFIGS}\n      plugins={[interactionPlugin, resourceTimelinePlugin, listPlugin]}\n      {...props}\n    />\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { BaseFullCalendar } from \"./BaseFullCalendar\";\n\nexport function BaseCalendarContainer(props: any) {\n  const args = {\n    //\n  };\n\n  return (\n    <StyledContainer>\n      <BaseFullCalendar {...props} {...args} />\n    </StyledContainer>\n  );\n}\n\nconst StyledContainer = styled.div`\n  .fc-button {\n    background: transparent;\n    color: #000;\n    border-color: lightgray;\n    &:hover {\n      background: transparent;\n      opacity: 0.7;\n      color: #000;\n    }\n  }\n`;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../rootReducer\";\n\ntype State = {\n  story: null | {\n    calendarId: string;\n    storyId: string;\n  };\n};\n\ntype PushPayload = {\n  calendarId: string;\n  storyId: string;\n};\n\ntype PopPayload = undefined;\n\nconst slice = createSlice({\n  name: \"storyModal\",\n  initialState: {\n    story: null,\n  } as State,\n  reducers: {\n    push(state, action: PayloadAction<PushPayload>) {\n      const _payload = action.payload;\n      state.story = _payload;\n    },\n    pop(state, _action: PayloadAction<PopPayload>) {\n      state.story = null;\n    },\n  },\n});\n\nexport const selectIsOpen = (state: RootState) => !!state.ui.storyModal.story;\n\nexport const selectStoryModal = (state: RootState) => state.ui.storyModal.story;\n\nexport const selectStory = (state: RootState) => {\n  const _story = state.ui.storyModal.story;\n  if (!_story) return null;\n  const { calendarId, storyId } = _story;\n\n  // calendar\n  const calendarIdx = state.features.userCalendars.calendars.findIndex(\n    (calendar) => calendar.id === calendarId\n  );\n  const cannotFind = calendarIdx === -1;\n  if (cannotFind) {\n    console.warn(\"cannot find calendar on removeStory\", calendarId);\n    return;\n  }\n\n  // story\n  return state.features.userCalendars.calendars[calendarIdx].stories.find(\n    (story) => story.id === storyId\n  );\n};\n\nexport const { push: pushAction, pop: popAction } = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../rootReducer\";\n\ntype State = {\n  event: null | {\n    calendarId: string;\n    storyId: string;\n    eventId: string;\n  };\n};\n\ntype PushPayload = {\n  calendarId: string;\n  storyId: string;\n  eventId: string;\n};\n\ntype PopPayload = undefined;\n\nconst slice = createSlice({\n  name: \"eventModal\",\n  initialState: {\n    event: null,\n  } as State,\n  reducers: {\n    push(state, action: PayloadAction<PushPayload>) {\n      const _payload = action.payload;\n      state.event = _payload;\n    },\n    pop(state, _action: PayloadAction<PopPayload>) {\n      state.event = null;\n    },\n  },\n});\n\nexport const selectIsOpen = (state: RootState) => !!state.ui.eventModal.event;\n\nexport const selectEventModal = (state: RootState) => state.ui.eventModal.event;\n\nexport const selectEvent = (state: RootState) => {\n  const event = state.ui.eventModal.event;\n  if (!event) return null;\n  const { calendarId, storyId, eventId } = event;\n\n  // calendar\n  const calendarIdx = state.features.userCalendars.calendars.findIndex(\n    (calendar) => calendar.id === calendarId\n  );\n  const cannotFind = calendarIdx === -1;\n  if (cannotFind) {\n    console.warn(\"cannot find calendar on removeResource\", calendarId);\n    return;\n  }\n\n  // story\n  const storyIdx = state.features.userCalendars.calendars[\n    calendarIdx\n  ].stories.findIndex((story) => story.id === storyId);\n  const cannotFindStory = storyIdx === -1;\n  if (cannotFindStory) {\n    console.warn(\"cannot find story on removeResource\", calendarId);\n    return;\n  }\n\n  //\n  return state.features.userCalendars.calendars[calendarIdx].stories[\n    storyIdx\n  ].events.find((event) => event.id === eventId);\n};\n\nexport const { push: pushAction, pop: popAction } = slice.actions;\n\nexport default slice.reducer;\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  removeEventAction,\n  updateEventAction,\n  updateEventByIdAction,\n} from \"../redux/features/userCalendars\";\nimport { BaseEvent, updateEvent } from \"../core/event/BaseEvent\";\n\ntype IdSet = { calendarId: string; storyId: string; eventId: string };\n\nexport const useEvent = () => {\n  const dispatch = useDispatch();\n\n  const remove = React.useCallback(\n    ({ calendarId, storyId, eventId }: IdSet) => {\n      if (!window.confirm(\"Do you remove this story?\")) return;\n      dispatch(\n        removeEventAction({\n          calendarId,\n          storyId,\n          eventId,\n        })\n      );\n    },\n    [dispatch]\n  );\n\n  const update = React.useCallback(\n    (idSet: IdSet, event: BaseEvent, params: any) => {\n      const newEvent = updateEvent(event, params);\n      dispatch(updateEventAction({ ...idSet, newEvent }));\n    },\n    [dispatch]\n  );\n\n  const updateById = React.useCallback(\n    (idSet: IdSet, params: Partial<BaseEvent>) => {\n      dispatch(updateEventByIdAction({ ...idSet, params }));\n    },\n    [dispatch]\n  );\n\n  return {\n    remove,\n    update,\n    updateById\n  } as const;\n};\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  removeStoryAction,\n  updateStoryAction,\n  updateStoryByIdAction,\n  addStoryAction,\n} from \"../redux/features/userCalendars\";\nimport { BaseStory, updateStory } from \"../core/story/BaseStory\";\nimport { initStory } from \"../core/story/BaseStory\";\nimport {PROFILE_ID} from '../constants/fullcalendar/settings'\n\ntype IdSet = { calendarId: string; storyId: string };\n\nexport const useStory = () => {\n  const dispatch = useDispatch();\n\n  const remove = React.useCallback(\n    ({ calendarId, storyId }: IdSet) => {\n      // TODO: move this line outside\n      if (!window.confirm(\"Do you remove this story?\")) return;\n      dispatch(\n        removeStoryAction({\n          storyId,\n          calendarId,\n        })\n      );\n    },\n    [dispatch]\n  );\n\n  const update = React.useCallback(\n    (idSet: IdSet, story: BaseStory, data: Partial<BaseStory>) => {\n      const newStory = updateStory(story, data);\n      dispatch(updateStoryAction({ ...idSet, newStory }));\n    },\n    [dispatch]\n  );\n\n  const updateById = React.useCallback(\n    (idSet: IdSet, params: Partial<BaseStory>) => {\n      dispatch(updateStoryByIdAction({ ...idSet, params }));\n    },\n    [dispatch]\n  );\n\n  const create = React.useCallback(\n    ({ calendarId }: { calendarId: string }, params?: Partial<BaseStory>) => {\n      const story = initStory({ calendarId });\n      dispatch(addStoryAction({ calendarId, story }));\n    },\n    [dispatch]\n  );\n\n  return { remove, update, updateById, create, profileStoryId: PROFILE_ID } as const;\n};\n","import React from \"react\";\nimport { useUserCalendar } from \"./useUserCalendar\";\nimport { useStory } from \"./useStory\";\n\nexport const ADD_STORY_BUTTON = \"ADD_STORY_BUTTON\";\nexport const REMOVE_CALENDAR_BUTTON = \"REMOVE_CALENDAR_BUTTON\";\n\nexport const useUserCalendarCustomButtons = () => {\n  const { calendar, remove: removeUserCalendar } = useUserCalendar();\n  const { create: createStory } = useStory();\n\n  const handleAddStory = React.useCallback(() => {\n    if (!calendar) return;\n    const calendarId = calendar.id;\n    createStory({ calendarId });\n  }, [calendar, createStory]);\n\n  const handleRemoveCalendar = React.useCallback(() => {\n    if (!calendar) return;\n    const calendarId = calendar.id;\n\n    if (!window.confirm(\"Do you want to delete this calendar?\")) return;\n    removeUserCalendar(calendarId);\n  }, [removeUserCalendar, calendar]);\n\n  const customButtons = React.useMemo(\n    () => ({\n      [ADD_STORY_BUTTON]: {\n        text: \"Add story\",\n        click: handleAddStory,\n      },\n      [REMOVE_CALENDAR_BUTTON]: {\n        text: \"Clear Calendar\",\n        click: handleRemoveCalendar,\n      },\n    }),\n    [handleAddStory, handleRemoveCalendar]\n  );\n\n  return { customButtons };\n};\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useForm } from \"react-hook-form\";\nimport styled from \"styled-components\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\n//\nimport { selectStoryModal, selectStory } from \"../../redux/ui/storyModal\";\nimport { useStory } from \"../../hooks/useStory\";\nimport { useResource } from \"../../hooks/useResource\";\nimport { FIELD } from \"../../constants/fullcalendar/settings\";\n\ntype Props = {\n  isOpen: boolean;\n  onClose: () => void;\n};\n\nexport function StoryModal({ isOpen, onClose }: Props) {\n  const storyModal = useSelector(selectStoryModal);\n  const story = useSelector(selectStory);\n  const { register, handleSubmit } = useForm();\n  const { remove: removeStory, update: updateStory } = useStory();\n  const { push: pushResource, remove: removeResource } = useResource();\n\n  const handleRemoveStory = React.useCallback(() => {\n    if (!storyModal) {\n      return console.warn(\"Invalid data status when to update resource.\");\n    }\n    removeStory(storyModal);\n    onClose();\n  }, [storyModal, removeStory, onClose]);\n\n  const handleRemoveResource = React.useCallback(\n    (resourceId: string) => () => {\n      if (!storyModal) {\n        return console.warn(\"Invalid data status when to remove resource.\");\n      }\n      removeResource({ ...storyModal, resourceId });\n    },\n    [storyModal, removeResource]\n  );\n\n  const handleAddResource = React.useCallback(() => {\n    if (!storyModal) {\n      return console.warn(\"Invalid data status when to add resource.\");\n    }\n    pushResource(storyModal);\n  }, [storyModal, pushResource]);\n\n  const onSubmit = React.useCallback(\n    (data: any) => {\n      if (!storyModal || !story) {\n        return console.warn(\"Invalid data status when to update story.\");\n      }\n      updateStory(storyModal, story, data);\n      onClose();\n    },\n    [updateStory, storyModal, story, onClose]\n  );\n\n  // // TODO: error handler\n  // // const { register, handleSubmit, errors } = useForm();\n  // const { register, handleSubmit } = useForm();\n\n  if (!story) return <></>;\n\n  return (\n    <Dialog onClose={onClose} open={isOpen}>\n      <DialogTitle>\n        <form onSubmit={handleSubmit(onSubmit)}>\n          <DialogTitleInner>\n            <TextField\n              inputRef={register}\n              name=\"name\"\n              defaultValue={story.name}\n              variant=\"outlined\"\n              label=\"Story Name\"\n            />\n          </DialogTitleInner>\n        </form>\n      </DialogTitle>\n\n      <DialogContent dividers={true}>\n        <div>\n          <form onSubmit={handleSubmit(onSubmit)}>\n            {story.resources.map((resource, idx) => {\n              const fieldName = `resources[${idx}]`;\n              return (\n                <Fieldset name={fieldName} key={fieldName}>\n                  <input\n                    type=\"hidden\"\n                    name={`${fieldName}.id`}\n                    ref={register}\n                    value={resource.id}\n                  />\n                  <TextField\n                    defaultValue={resource[FIELD]}\n                    inputRef={register}\n                    name={`${fieldName}.${FIELD}`}\n                    label=\"Field\"\n                  />\n                  <Button\n                    onClick={handleRemoveResource(resource.id)}\n                    color=\"secondary\"\n                    variant=\"contained\"\n                  >\n                    Delete\n                  </Button>\n                </Fieldset>\n              );\n            })}\n            <AddResourceButtonContainer>\n              <Button\n                onClick={handleAddResource}\n                variant=\"outlined\"\n                color=\"primary\"\n              >\n                + Add Resource\n              </Button>\n            </AddResourceButtonContainer>\n\n            <UpdateButtonContainer>\n              <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n                Update\n              </Button>\n            </UpdateButtonContainer>\n          </form>\n        </div>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          onClick={handleRemoveStory}\n          color=\"secondary\"\n          variant=\"contained\"\n        >\n          Delete this story\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nconst DialogTitleInner = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst Fieldset = styled.fieldset`\n  border: none;\n  display: grid;\n  grid-template-columns: 2fr 1fr;\n  gap: 1rem;\n  padding: 1rem;\n  margin: 1rem;\n  border: 1px solid lightgray;\n`;\n\nconst AddResourceButtonContainer = styled.div`\n  padding: 1rem;\n`;\n\nconst UpdateButtonContainer = styled.div`\n  padding: 1rem;\n  text-align: right;\n`;\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectUserCalendar } from \"../redux/features/userCalendars\";\nimport {\n  removeResourceAction,\n  pushResourceAction,\n} from \"../redux/features/userCalendars\";\nimport { initResource } from \"../core/resource/BaseResource\";\n\ntype IdSet = { calendarId: string; resourceId: string; storyId: string };\n\nexport const useResource = () => {\n  const dispatch = useDispatch();\n\n  // TODO: remoove this line and get params as arg in each function\n  const calendar = useSelector(selectUserCalendar);\n\n  const push = React.useCallback(\n    ({ calendarId, storyId }: { calendarId: string; storyId: string }) => {\n      // story\n      const storyIdx = calendar.stories.findIndex(\n        (story) => story.id === storyId\n      );\n      const cannotFindStory = storyIdx === -1;\n      if (cannotFindStory) {\n        console.warn(\"cannot find story on updateResource\", calendarId);\n        return;\n      }\n\n      // resource\n      const _resources = calendar.stories[storyIdx].resources;\n      let lastResource = { idx: -1, order: -1 };\n      for (let i = 0; i < _resources.length; i++) {\n        const resource = _resources[i];\n        const _order = resource.order ?? -1;\n        if (_order > lastResource.order) {\n          lastResource = { idx: i, order: _order };\n        }\n      }\n\n      const _resource = initResource({\n        calendarId,\n        storyId,\n        order: lastResource.order + 1,\n      });\n\n      dispatch(\n        pushResourceAction({ calendarId, storyId, resource: _resource })\n      );\n    },\n    [dispatch, calendar]\n  );\n\n  const remove = React.useCallback(\n    ({ calendarId, resourceId, storyId }: IdSet) => {\n      // TODO: Move outside\n      if (!window.confirm(\"Do you remove this resource?\")) return;\n\n      dispatch(\n        removeResourceAction({\n          resourceId: resourceId,\n          storyId: storyId,\n          calendarId,\n        })\n      );\n    },\n    [dispatch]\n  );\n\n  return { remove, push } as const;\n};\n","import React from \"react\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { useForm } from \"react-hook-form\";\nimport { useSelector } from \"react-redux\";\nimport { selectEventModal, selectEvent } from \"../../redux/ui/eventModal\";\nimport { useEvent } from \"../../hooks/useEvent\";\nimport { BaseEvent } from \"../../core/event/BaseEvent\";\n\ntype Props = {\n  isOpen: boolean;\n  onClose: () => void;\n};\n\nexport function EventModal({ isOpen, onClose }: Props) {\n  const eventModal = useSelector(selectEventModal);\n  const event = useSelector(selectEvent);\n\n  const { remove, update } = useEvent();\n\n  const onRemove = React.useCallback(() => {\n    if (!eventModal) {\n      return console.warn(\"Invalid data status when to update event.\");\n    }\n    remove(eventModal);\n    onClose();\n  }, [eventModal, remove, onClose]);\n\n  const onUpdate = React.useCallback(\n    (data: Partial<BaseEvent>) => {\n      if (!eventModal || !event) {\n        return console.warn(\"Invalid data status when to remove event.\");\n      }\n      update(eventModal, event, data);\n      onClose();\n    },\n    [eventModal, event, update, onClose]\n  );\n\n  // TODO: error handler\n  const { register, handleSubmit } = useForm();\n\n  return (\n    <Dialog onClose={onClose} open={isOpen}>\n      <DialogTitle>Event</DialogTitle>\n      <DialogContent dividers={true}>\n        <form onSubmit={handleSubmit(onUpdate)}>\n          <TextField\n            inputRef={register}\n            name={\"title\"}\n            defaultValue={event?.title}\n            label=\"Title\"\n            variant=\"outlined\"\n          />\n          <Button type=\"submit\">rename</Button>\n        </form>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onRemove} variant=\"contained\" color=\"secondary\">\n          Remove\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Box from \"@material-ui/core/Box\";\nimport Divider from \"@material-ui/core/Divider\";\nimport { EventClickArg } from \"@fullcalendar/react\";\nimport { useUserCalendar } from \"../../hooks/useUserCalendar\";\nimport { BaseCalendarContainer } from \"../../components/atoms/BaseCalendarContainer\";\nimport { useResourceGroupLabelContentInUserCalendar } from \"../../hooks/useResourceGroupLabelContentInUserCalendar\";\nimport { useStoryModal } from \"../../hooks/useStoryModal\";\nimport { useEventModal } from \"../../hooks/useEventModal\";\nimport { useEvent } from \"../../hooks/useEvent\";\nimport {\n  useUserCalendarCustomButtons,\n  ADD_STORY_BUTTON,\n  REMOVE_CALENDAR_BUTTON,\n} from \"../../hooks/useUserCalendarCustomButtons\";\nimport { StoryModal } from \"../../components/molecules/StoryModal\";\nimport { EventModal } from \"../../components/molecules/EventModal\";\n\nconst configs = {\n  resourcesInitiallyExpanded: true,\n} as const;\n\nconst headerToolbar = {\n  left: `${ADD_STORY_BUTTON},${REMOVE_CALENDAR_BUTTON}`,\n  center: \"title\",\n  right: \"prev,next\",\n} as const;\n\nexport function UserCalendarContainer() {\n  const {\n    push: pushStoryModal,\n    pop: popStoryModal,\n    isOpen: isOpenStoryModal,\n  } = useStoryModal();\n\n  const {\n    push: pushEventModal,\n    pop: popEventModal,\n    isOpen: isOpenEventModal,\n  } = useEventModal();\n\n  const createOpenStoryHandle = React.useCallback(\n    (idSet: { calendarId: string; storyId: string }) => () => {\n      pushStoryModal(idSet);\n    },\n    [pushStoryModal]\n  );\n\n  const {\n    resourceGroupLabelContent,\n  } = useResourceGroupLabelContentInUserCalendar({\n    createOpenHandle: createOpenStoryHandle,\n  });\n\n  const { events, resources, select } = useUserCalendar();\n\n  const click = React.useCallback(\n    (info: EventClickArg) => {\n      const calendarId = info.event.extendedProps.calendarId as\n        | string\n        | undefined;\n      if (!calendarId) {\n        return console.warn(\"Invalid data. cannot find calendarId.\");\n      }\n\n      const eventId = info.event.id;\n      if (!eventId) {\n        return console.warn(\"Invalid data. cannot find eventId.\");\n      }\n\n      const storyId = info.event.extendedProps.storyId as string | undefined;\n      if (!storyId) {\n        return console.warn(\"Invalid data. cannot find storyId.\");\n      }\n\n      const idSet = {\n        calendarId,\n        eventId,\n        storyId,\n      } as const;\n\n      pushEventModal(idSet);\n    },\n    [pushEventModal]\n  );\n\n  const { updateById } = useEvent();\n\n  const updateEvent = React.useCallback(\n    (data: any) => {\n      if (!data.event || !data.event.extendedProps) {\n        return console.warn(\"Invalid data. cannot find event data.\");\n      }\n      const start = data.event.start;\n      const end = data.event.end;\n      const idSet = { ...data.event.extendedProps, eventId: data.event.id };\n\n      const params = { start, end };\n      updateById(idSet, params);\n    },\n    [updateById]\n  );\n\n  const { customButtons } = useUserCalendarCustomButtons();\n\n  return (\n    <>\n      <Box>\n        <Paper elevation={8}>\n          <PaperHeader>\n            <Title>My Calendar</Title>\n            <span>Let's edit your plan in my calendar.</span>\n          </PaperHeader>\n          <Divider />\n          <CalendarContainer>\n            <BaseCalendarContainer\n              events={events}\n              resources={resources}\n              // click event\n              eventClick={click}\n              // select empty space\n              selectable={true}\n              select={select}\n              // drag or resize event\n              editable={true}\n              eventResize={updateEvent}\n              eventDrop={updateEvent}\n              // etc\n              initialDate={\"2020-06-01\"} // TODO: change dynamically\n              resourceGroupLabelContent={resourceGroupLabelContent}\n              customButtons={customButtons}\n              headerToolbar={headerToolbar}\n              {...configs}\n            />\n          </CalendarContainer>\n        </Paper>\n      </Box>\n\n      {/* Modal */}\n      <StoryModal isOpen={isOpenStoryModal} onClose={popStoryModal} />\n      <EventModal isOpen={isOpenEventModal} onClose={popEventModal} />\n    </>\n  );\n}\n\nconst Title = styled.span`\n  font-size: 2rem;\n  font-weight: 900;\n  margin-right: 1rem;\n`;\n\nconst PaperHeader = styled.div`\n  padding: 1rem 1.5rem;\n`;\n\nconst CalendarContainer = styled.div`\n  padding: 1rem 1.5rem;\n`;\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { pushAction, popAction, selectIsOpen } from \"../redux/ui/storyModal\";\n\nexport const useStoryModal = () => {\n  const dispatch = useDispatch();\n\n  const push = React.useCallback(\n    ({\n      storyId,\n      calendarId,\n    }: {\n      storyId: string;\n      calendarId: string;\n    }) => {\n      dispatch(pushAction({ calendarId, storyId }));\n    },\n    [dispatch]\n  );\n\n  const pop = React.useCallback(() => {\n    dispatch(popAction());\n  }, [dispatch]);\n\n  const isOpen = useSelector(selectIsOpen);\n\n  return { push, pop, isOpen } as const;\n};\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { pushAction, popAction, selectIsOpen } from \"../redux/ui/eventModal\";\n\nexport const useEventModal = () => {\n  const dispatch = useDispatch();\n\n  const push = React.useCallback(\n    ({\n      eventId,\n      storyId,\n      calendarId,\n    }: {\n      eventId: string;\n      storyId: string;\n      calendarId: string;\n    }) => {\n      dispatch(pushAction({ calendarId, eventId, storyId }));\n    },\n    [dispatch]\n  );\n\n  const pop = React.useCallback(() => {\n    dispatch(popAction());\n  }, [dispatch]);\n\n  const isOpen = useSelector(selectIsOpen);\n\n  return { push, pop, isOpen } as const;\n};\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { selectUserCalendar } from \"../redux/features/userCalendars\";\n\ntype Props = {\n  createOpenHandle: Function;\n};\n\ntype ContentProps = {\n  // REF: https://fullcalendar.io/docs/resource-group-render-hooks\n  groupValue: string;\n};\n\nexport const useResourceGroupLabelContentInUserCalendar = ({\n  createOpenHandle,\n}: Props) => {\n  const calendar = useSelector(selectUserCalendar);\n\n  const resourceGroupLabelContent = React.useCallback(\n    ({ groupValue: storyId }: ContentProps) => {\n      if (!calendar) return;\n\n      // story validation\n      const story = calendar.stories.find((story) => story.id === storyId);\n      if (!story) {\n        console.warn(\"cannot find story\", storyId);\n        return;\n      }\n\n      // name handler\n      let name: string;\n      if (story.name) {\n        name = story.name;\n      } else {\n        console.warn(\"cannot find this story name\", storyId);\n        name = \"No Name\";\n      }\n\n      const calendarId = calendar.id;\n      const openHandle = createOpenHandle({ calendarId, storyId });\n\n      const containerEl = document.createElement(\"span\");\n      containerEl.style.display = \"flex\";\n      containerEl.style.justifyContent = \"space-between\";\n\n      const nameElement = document.createElement(\"i\");\n      nameElement.innerHTML = name + \" \"; // NOTE: space is for design, so not good way\n      containerEl.appendChild(nameElement);\n\n      const buttonElement = document.createElement(\"button\");\n      buttonElement.innerHTML = \"\";\n      buttonElement.onclick = openHandle;\n      containerEl.appendChild(buttonElement);\n\n      const arrayOfDomNodes = [containerEl];\n      return { domNodes: arrayOfDomNodes };\n    },\n    [calendar, createOpenHandle]\n  );\n\n  return { resourceGroupLabelContent };\n};\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { updateBirthdayAction, selectUser } from \"../redux/features/user\";\n\nexport const useUser = () => {\n  const dispatch = useDispatch();\n\n  const setBirth = React.useCallback(\n    (birth: string) => dispatch(updateBirthdayAction({ birthday: birth })),\n    [dispatch]\n  );\n\n  const { birthday, age } = useSelector(selectUser);\n\n  return {\n    birth: birthday,\n    age,\n    setBirth,\n  } as const;\n};\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  selectTemplateOption,\n  selectWithWorkingholiday,\n  updateAction,\n} from \"../redux/features/templateOption\";\nimport { TemplateOption } from \"../core/calendar/BaseCalendar\";\n\nexport const useTemplateOptions = () => {\n  const dispatch = useDispatch();\n\n  const options = useSelector(selectTemplateOption);\n  const withWorkingholiday = useSelector(selectWithWorkingholiday);\n\n  const update = React.useCallback(\n    (params: Partial<TemplateOption>) => {\n      const newTemplateOption = { ...options, ...params };\n      dispatch(updateAction(newTemplateOption));\n    },\n    [dispatch, options]\n  );\n\n  return { options, update, withWorkingholiday } as const;\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Button from \"@material-ui/core/Button\";\nimport { useUserCalendar } from \"../../hooks/useUserCalendar\";\nimport { useUser } from \"../../hooks/useUser\";\nimport { useTemplateOptions } from \"../../hooks/useTemplateOptions\";\n\nexport function UserCalendarCreater() {\n  const { init: initUserCalendar } = useUserCalendar();\n  const { birth } = useUser();\n  const { options } = useTemplateOptions();\n  const workingholidayPeriod = React.useMemo(\n    () => options.workingholidayPeriod,\n    [options.workingholidayPeriod]\n  );\n\n  // TODO: open modal and start setting birthday\n  const handleCreate = React.useCallback(() => {\n    if (!birth) return;\n    initUserCalendar({ birthday: birth, workingholidayPeriod });\n  }, [initUserCalendar, birth, workingholidayPeriod]);\n\n  return (\n    <Container>\n      <Button onClick={handleCreate} variant=\"contained\" color=\"primary\">\n        Create Calendar\n      </Button>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  height: 50vh;\n  display: grid;\n  place-items: center;\n`;\n","import React from \"react\";\nimport { UserCalendarContainer } from \"../molecules/UserCalendarContainer\";\nimport { UserCalendarCreater } from \"../molecules/UserCalendarCreater\";\nimport { useUserCalendar } from \"../../hooks/useUserCalendar\";\n\nexport function UserCalendarArea() {\n  const { calendar } = useUserCalendar();\n  const existsCalendar = !!calendar;\n  return (\n    <div>\n      {existsCalendar ? <UserCalendarContainer /> : <UserCalendarCreater />}\n    </div>\n  );\n}\n","import React from \"react\";\nimport { useModal } from \"./useModal\";\n\nexport const OPEN_OPTION_BUTTON = \"OPEN_OPTION_BUTTON\";\n\nexport const useTemplateCustomButtons = () => {\n  const { open, isOpen, close } = useModal();\n\n  const handleOpenOption = React.useCallback(() => {\n    open();\n  }, [open]);\n\n  const customButtons = React.useMemo(\n    () => ({\n      [OPEN_OPTION_BUTTON]: {\n        text: \"Change Options\",\n        click: handleOpenOption,\n      },\n    }),\n    [handleOpenOption]\n  );\n\n  return { customButtons, isOpen, close };\n};\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { BaseCalendarContainer } from \"../atoms/BaseCalendarContainer\";\nimport { useResourceGroupLabelContentInTemplateCalendar } from \"../../hooks/useResourceGroupLabelContentInTemplateCalendar\";\nimport { addStoryAction } from \"../../redux/features/userCalendars\";\nimport { BaseStory } from \"../../core/story/BaseStory\";\nimport { OPEN_OPTION_BUTTON } from \"../../hooks/useTemplateCustomButtons\";\n\nconst configs = {\n  // ables\n  selectable: false,\n  editable: false,\n  // resources\n  resourcesInitiallyExpanded: false,\n} as const;\n\nconst headerToolbar = {\n  left: `${OPEN_OPTION_BUTTON}`,\n  center: \"title\",\n  right: \"prev,next\",\n} as const;\n\nexport function BaseTemplate(props: any) {\n  // TODO: move to custom hooks\n  const dispatch = useDispatch();\n  const createClickHandel = React.useCallback(\n    ({ story, calendarId }: { story: BaseStory; calendarId: string }) => () => {\n      if (!window.confirm(\"Do you copy this story to My Calendar?\")) return;\n      dispatch(addStoryAction({ calendarId, story }));\n    },\n    [dispatch]\n  );\n\n  const {\n    resourceGroupLabelContent,\n  } = useResourceGroupLabelContentInTemplateCalendar({ createClickHandel });\n\n  return (\n    <BaseCalendarContainer\n      {...props}\n      initialDate={\"2020-06-01\"}\n      resourceGroupLabelContent={resourceGroupLabelContent}\n      headerToolbar={headerToolbar}\n      {...configs}\n    />\n  );\n}\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport {\n  selectPrivateCollegeCalendar,\n  selectPublicCollegeCalendar,\n} from \"../redux/features/templateCalendarTable\";\nimport { selectUserCalendar } from \"../redux/features/userCalendars\";\nimport { updateStory } from \"../core/story/BaseStory\";\n\ntype ResourceContentProps = {\n  // REF: https://fullcalendar.io/docs/resource-group-render-hooks\n  groupValue: string;\n};\n\ntype Props = {\n  createClickHandel: Function;\n};\n\nexport const useResourceGroupLabelContentInTemplateCalendar = ({\n  createClickHandel,\n}: Props) => {\n  const privateCollegeTemplate = useSelector(selectPrivateCollegeCalendar);\n  const publicCollegeTemplate = useSelector(selectPublicCollegeCalendar);\n  const myCalendar = useSelector(selectUserCalendar);\n\n  const resourceGroupLabelContent = React.useCallback(\n    ({ groupValue: storyId }: ResourceContentProps) => {\n      if (!myCalendar) {\n        console.warn(\"cannot find selected myCalendar\");\n        return;\n      }\n\n      const myCalendarId = myCalendar.id;\n\n      if (!privateCollegeTemplate && !publicCollegeTemplate) {\n        console.warn(\"cannot find selected template calendar\");\n        return;\n      }\n\n      // story validation\n      const story = [\n        ...(privateCollegeTemplate?.stories ?? []),\n        ...(publicCollegeTemplate?.stories ?? []),\n      ].find((story) => story.id === storyId);\n      if (!story) {\n        console.warn(\"cannot find story\", storyId);\n        return;\n      }\n\n      // name handler\n      let name: string;\n      if (story.name) {\n        name = story.name;\n      } else {\n        console.warn(\"cannot find this story name\", storyId);\n        name = \"No Name\";\n      }\n\n      const updatedStory = updateStory(story, { calendarId: myCalendarId });\n\n      const clickHandle = createClickHandel({\n        calendarId: myCalendarId,\n        story: updatedStory,\n      });\n\n      const nameElement = document.createElement(\"i\");\n      nameElement.innerHTML = name + \" \"; // NOTE: space is for design, so not good way\n      nameElement.style.marginLeft = \"1rem\";\n\n      const buttonElement = document.createElement(\"button\");\n      buttonElement.innerHTML = \"Copy to my calendar\";\n      buttonElement.style.marginLeft = \"1rem\";\n      buttonElement.style.background = \"white\";\n      buttonElement.style.borderRadius = \"5px\";\n      buttonElement.style.cursor = \"pointer\";\n      buttonElement.onclick = clickHandle;\n\n      const arrayOfDomNodes = [nameElement, buttonElement];\n      return { domNodes: arrayOfDomNodes };\n    },\n    [\n      myCalendar,\n      privateCollegeTemplate,\n      publicCollegeTemplate,\n      createClickHandel,\n    ]\n  );\n\n  return { resourceGroupLabelContent };\n};\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { BaseEvent } from \"../core/event/BaseEvent\";\nimport { BaseResource } from \"../core/resource/BaseResource\";\nimport { TemplateOption } from \"../core/calendar/BaseCalendar\";\nimport {\n  upsertPrivateCollegeStoriesAction,\n  selectPrivateCollegeCalendar,\n} from \"../redux/features/templateCalendarTable\";\n\nexport const usePrivateCollegeCalendar = () => {\n  const dispatch = useDispatch();\n  const generate = React.useCallback(\n    ({\n      birth,\n      canWorkingholiday,\n      options,\n    }: {\n      birth: string;\n      canWorkingholiday: boolean;\n      options: TemplateOption;\n    }) => {\n      dispatch(\n        upsertPrivateCollegeStoriesAction({ birth, canWorkingholiday, options })\n      );\n    },\n    [dispatch]\n  );\n\n  const calendar = useSelector(selectPrivateCollegeCalendar);\n\n  const stories = React.useMemo(() => calendar?.stories ?? [], [calendar]);\n\n  const resources = React.useMemo(\n    () =>\n      stories.reduce<BaseResource[]>(\n        (prev, story) => [...prev, ...story.resources],\n        []\n      ),\n    [stories]\n  );\n\n  const events = React.useMemo(\n    () =>\n      stories.reduce<BaseEvent[]>(\n        (prev, story) => [...prev, ...story.events],\n        [] as any[]\n      ),\n    [stories]\n  );\n\n  return { stories, generate, resources, events } as const;\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport { useTemplateOptions } from \"../../hooks/useTemplateOptions\";\n\nconst MONTHS = [\n  \"Jan\",\n  \"Feb\",\n  \"Mar\",\n  \"Apr\",\n  \"May\",\n  \"Jun\",\n  \"Jul\",\n  \"Aug\",\n  \"Sep\",\n  \"Oct\",\n  \"Nov\",\n  \"Dec\",\n] as const;\n\n// TODO: Use react-hook-form because of reducing render cost\nexport function TemplateOption() {\n  const { update: updateOption, options } = useTemplateOptions();\n  const {\n    schoolPeriod,\n    coopPeriod,\n    monthsOfStartSchool,\n    pgwpPeriod,\n    workingholidayPeriod,\n  } = options;\n\n  const handleChangeSchoolPeriod = React.useCallback(\n    (_event) => {\n      const value = _event.target.value;\n      const maybeNum = value === \"\" ? 0 : parseInt(value);\n      if (!Number.isInteger(maybeNum)) return;\n      updateOption({ schoolPeriod: maybeNum });\n    },\n    [updateOption]\n  );\n\n  const handleChangeCoopPeriod = React.useCallback(\n    (_event) => {\n      const value = _event.target.value;\n      const maybeNum = value === \"\" ? 0 : parseInt(value);\n      if (!Number.isInteger(maybeNum)) return;\n      updateOption({ coopPeriod: maybeNum });\n    },\n    [updateOption]\n  );\n\n  const handleChangePgwpPeriod = React.useCallback(\n    (_event) => {\n      const value = _event.target.value;\n      const maybeNum = value === \"\" ? 0 : parseInt(value);\n      if (!Number.isInteger(maybeNum)) return;\n      updateOption({ pgwpPeriod: maybeNum });\n    },\n    [updateOption]\n  );\n\n  const handleChangeWorkingholidayPeriod = React.useCallback(\n    (_event) => {\n      const value = _event.target.value;\n      const maybeNum = value === \"\" ? 0 : parseInt(value);\n      if (!Number.isInteger(maybeNum)) return;\n      updateOption({ workingholidayPeriod: maybeNum });\n    },\n    [updateOption]\n  );\n\n  const handleCheck = React.useCallback(\n    (_event) => {\n      const month = parseInt(_event.target.value);\n      const newMonthsOfStartSchool = monthsOfStartSchool.includes(month)\n        ? monthsOfStartSchool.filter((_month) => _month !== month)\n        : [...monthsOfStartSchool, month].sort((a, b) => a - b);\n      updateOption({ monthsOfStartSchool: newMonthsOfStartSchool });\n    },\n    [updateOption, monthsOfStartSchool]\n  );\n\n  return (\n    <Container>\n      <PeriodContainer>\n        <TextField\n          value={schoolPeriod}\n          onChange={handleChangeSchoolPeriod}\n          label=\"School Period\"\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">Month</InputAdornment>,\n          }}\n        />\n        <TextField\n          value={coopPeriod}\n          onChange={handleChangeCoopPeriod}\n          label=\"Co-op Period\"\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">Month</InputAdornment>,\n          }}\n        />\n        <TextField\n          value={pgwpPeriod}\n          onChange={handleChangePgwpPeriod}\n          label=\"PWGP Period\"\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">Month</InputAdornment>,\n          }}\n        />\n        <TextField\n          value={workingholidayPeriod}\n          onChange={handleChangeWorkingholidayPeriod}\n          label=\"Working Holiday Period\"\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">Month</InputAdornment>,\n          }}\n        />\n      </PeriodContainer>\n\n      <div>\n        <label>School start from (Month)</label>\n        <div>\n          {MONTHS.map((month, idx) => {\n            const monthNum = idx + 1;\n            const isChecked = monthsOfStartSchool.includes(monthNum);\n            return (\n              <CheckboxListItem key={month}>\n                <label>{month}</label>\n                <Checkbox\n                  value={monthNum}\n                  checked={isChecked}\n                  onChange={handleCheck}\n                />\n              </CheckboxListItem>\n            );\n          })}\n        </div>\n      </div>\n    </Container>\n  );\n}\n\nconst Container = styled.div``;\n\nconst CheckboxListItem = styled.div`\n  display: inline-block;\n  margin-right: 1rem;\n`;\n\nconst PeriodContainer = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  gap: 2rem;\n  margin-bottom: 1rem;\n`;\n","import React from \"react\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport { TemplateOption } from \"./TemplateOption\";\n\ntype Props = {\n  isOpen: boolean;\n  onClose: () => void;\n};\n\nexport function TemplateOptionModal({ onClose, isOpen }: Props) {\n  return (\n    <Dialog onClose={onClose} open={isOpen}>\n      <DialogTitle>Template Option</DialogTitle>\n      <DialogContent>\n        <TemplateOption />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Close</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React from \"react\";\nimport { BaseTemplate } from \"../molecules/BaseTemplate\";\nimport { usePrivateCollegeCalendar } from \"../../hooks/usePrivateCollegeCalendar\";\nimport { useUser } from \"../../hooks/useUser\";\nimport { useTemplateOptions } from \"../../hooks/useTemplateOptions\";\nimport { useTemplateCustomButtons } from \"../../hooks/useTemplateCustomButtons\";\nimport { TemplateOptionModal } from \"../molecules/TemplateOptionModal\";\n\nexport function PrivateCollegeTemplate() {\n  const { birth } = useUser();\n  const { resources, events, generate } = usePrivateCollegeCalendar();\n  const { options, withWorkingholiday } = useTemplateOptions();\n  const { customButtons, close, isOpen } = useTemplateCustomButtons();\n\n  // TODO: prevent re-rendering when to select tab again\n  React.useEffect(() => {\n    generate({ birth, canWorkingholiday: withWorkingholiday, options });\n  }, [generate, birth, withWorkingholiday, options]);\n\n  return (\n    <>\n      <BaseTemplate\n        events={events}\n        resources={resources}\n        customButtons={customButtons}\n      />\n      <TemplateOptionModal onClose={close} isOpen={isOpen} />\n    </>\n  );\n}\n","import React from \"react\";\nimport { BaseTemplate } from \"../molecules/BaseTemplate\";\nimport { usePublicCollegeCalendar } from \"../../hooks/usePublicCollegeCalendar\";\nimport { useUser } from \"../../hooks/useUser\";\nimport { useTemplateOptions } from \"../../hooks/useTemplateOptions\";\nimport { useTemplateCustomButtons } from \"../../hooks/useTemplateCustomButtons\";\nimport { TemplateOptionModal } from \"../molecules/TemplateOptionModal\";\n\nexport function PublicCollegeTemplate() {\n  const { birth } = useUser();\n  const { resources, events, generate } = usePublicCollegeCalendar();\n  const { options, withWorkingholiday } = useTemplateOptions();\n  const { customButtons, close, isOpen } = useTemplateCustomButtons();\n\n  // TODO: prevent re-rendering when to select tab again\n  React.useEffect(() => {\n    generate({ birth, canWorkingholiday: withWorkingholiday, options });\n  }, [generate, birth, withWorkingholiday, options]);\n\n  return (\n    <>\n      <BaseTemplate\n        events={events}\n        resources={resources}\n        customButtons={customButtons}\n      />\n      <TemplateOptionModal onClose={close} isOpen={isOpen} />\n    </>\n  );\n}\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { BaseEvent } from \"../core/event/BaseEvent\";\nimport { BaseResource } from \"../core/resource/BaseResource\";\nimport { TemplateOption } from \"../core/calendar/BaseCalendar\";\nimport {\n  upsertPublicCollegeStoriesAction,\n  selectPublicCollegeCalendar,\n} from \"../redux/features/templateCalendarTable\";\n\nexport const usePublicCollegeCalendar = () => {\n  const dispatch = useDispatch();\n  const generate = React.useCallback(\n    (args: {\n      birth: string;\n      canWorkingholiday: boolean;\n      options: TemplateOption;\n    }) => {\n      dispatch(upsertPublicCollegeStoriesAction(args));\n    },\n    [dispatch]\n  );\n\n  const calendar = useSelector(selectPublicCollegeCalendar);\n\n  const stories = React.useMemo(() => calendar?.stories ?? [], [calendar]);\n\n  const resources = React.useMemo(\n    () =>\n      stories.reduce<BaseResource[]>(\n        (prev, story) => [...prev, ...story.resources],\n        []\n      ),\n    [stories]\n  );\n\n  const events = React.useMemo(\n    () =>\n      stories.reduce<BaseEvent[]>(\n        (prev, story) => [...prev, ...story.events],\n        [] as any[]\n      ),\n    [stories]\n  );\n\n  return { stories, generate, resources, events } as const;\n};\n","import React, { PropsWithChildren } from \"react\";\nimport styled from \"styled-components\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Box from \"@material-ui/core/Box\";\nimport Paper from \"@material-ui/core/Paper\";\n\nimport { PrivateCollegeTemplate } from \"./PrivateCollegeTemplate\";\nimport { PublicCollegeTemplate } from \"./PublicCollegeTemplate\";\n\nfunction TabPanel({\n  shouldShow,\n  children,\n}: PropsWithChildren<{\n  shouldShow: boolean;\n}>) {\n  return (\n    <div role=\"tabpanel\" style={{ display: shouldShow ? \"block\" : \"none\" }}>\n      <Box p={3}>{children}</Box>\n    </div>\n  );\n}\n\nexport function TemplateList() {\n  const [selectedIdx, setSelectedIdx] = React.useState(0);\n\n  const handleChange = React.useCallback((_event, newValue) => {\n    setSelectedIdx(newValue);\n  }, []);\n\n  return (\n    <Box>\n      <Paper elevation={8}>\n        <PaperHeader>\n          <Title>Templates</Title>\n          <Description>\n            You can pick good template story from here to above calendar.\n          </Description>\n        </PaperHeader>\n        <Divider />\n        <Tabs\n          value={selectedIdx}\n          onChange={handleChange}\n          textColor=\"primary\"\n          indicatorColor=\"primary\"\n        >\n          <Tab\n            icon={<Icon></Icon>}\n            label=\"Private College\"\n            style={{ textTransform: \"none\" }}\n          />\n          <Tab\n            icon={<Icon></Icon>}\n            label=\"Public College\"\n            style={{ textTransform: \"none\" }}\n          />\n        </Tabs>\n        <TabPanel shouldShow={selectedIdx === 0}>\n          <PrivateCollegeTemplate />\n        </TabPanel>\n        <TabPanel shouldShow={selectedIdx === 1}>\n          <PublicCollegeTemplate />\n        </TabPanel>\n      </Paper>\n    </Box>\n  );\n}\n\nconst PaperHeader = styled.div`\n  padding: 2rem;\n`;\n\nconst Title = styled.span`\n  font-size: 3rem;\n  font-weight: 900;\n  margin-right: 1rem;\n`;\n\nconst Description = styled.span``;\n\nconst Icon = styled.span`\n  font-size: 2rem;\n`;\n","import React from \"react\";\nimport { TemplateList } from \"../templates/TemplateList\";\nimport { UserCalendarCreater } from \"../molecules/UserCalendarCreater\";\nimport { useUserCalendar } from \"../../hooks/useUserCalendar\";\n\nexport function TemplateCalendarArea() {\n  const { calendar } = useUserCalendar();\n  const existsCalendar = !!calendar;\n  return (\n    <div>{existsCalendar ? <TemplateList /> : <UserCalendarCreater />}</div>\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { UserCalendarArea } from \"../organisms/UserCalendarArea\";\nimport { TemplateCalendarArea } from \"../organisms/TemplateCalendarArea\";\nimport { UserCalendarCreater } from \"../molecules/UserCalendarCreater\";\nimport { useUserCalendar } from \"../../hooks/useUserCalendar\";\n\nexport function CalendarPageContent() {\n  const { calendar } = useUserCalendar();\n  const existsCalendar = !!calendar;\n  return (\n    <div>\n      {existsCalendar ? (\n        <InnerContainer>\n          <UserCalendarArea />\n          <TemplateCalendarArea />\n        </InnerContainer>\n      ) : (\n        <UserCalendarCreater />\n      )}\n    </div>\n  );\n}\n\nconst InnerContainer = styled.div`\n  display: grid;\n  gap: 3rem;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nexport function PolicyExplanation() {\n  return (\n    <Text>\n      {/* TODO: Update meaning */}\n      This application(Plangoab) use local state. If you accept local data,\n      please clicking create button.\n    </Text>\n  );\n}\n\nconst Text = styled.div`\n  font-size: 0.7rem;\n  color: gray;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport { useTemplateOptions } from \"../../hooks/useTemplateOptions\";\n\n// TODO: Use react-hook-form because of reducing render cost\n// TODO: rename AdvancedOptions\nexport function AdvancedOptions() {\n  const [opens, toggle] = React.useReducer((state) => !state, false);\n  const { update: updateOption, options } = useTemplateOptions();\n  const { workingholidayPeriod } = options;\n\n  const handleChangeWorkingholidayPeriod = React.useCallback(\n    (_event) => {\n      const value = _event.target.value;\n      const maybeNum = value === \"\" ? 0 : parseInt(value);\n      if (!Number.isInteger(maybeNum)) return;\n      updateOption({ workingholidayPeriod: maybeNum });\n    },\n    [updateOption]\n  );\n\n  return (\n    <Container>\n      <Button\n        onClick={toggle}\n        size=\"small\"\n        style={{ textTransform: \"none\", color: \"gray\" }}\n      >\n        Advanced Options\n      </Button>\n      {opens && (\n        <TextField\n          value={workingholidayPeriod}\n          onChange={handleChangeWorkingholidayPeriod}\n          label=\"Working Holiday Period\"\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">Month</InputAdornment>,\n          }}\n        />\n      )}\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  display: grid;\n  gap: 1rem;\n  padding: 2rem;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Button from \"@material-ui/core/Button\";\nimport { DatePicker } from \"@material-ui/pickers\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport { PolicyExplanation } from \"../atoms/PolicyExplanation\";\nimport { useModal } from \"../../hooks/useModal\";\nimport { useUserCalendar } from \"../../hooks/useUserCalendar\";\nimport { useUser } from \"../../hooks/useUser\";\nimport { AdvancedOptions } from \"../organisms/AdvancedOptions\";\nimport { useTemplateOptions } from \"../../hooks/useTemplateOptions\";\n\nexport function IntroFlow() {\n  const { calendar } = useUserCalendar();\n  const shouldSkipIntroFlow = !!calendar;\n  const { isOpen, close } = useModal(!shouldSkipIntroFlow);\n  const { init: initUserCalendar } = useUserCalendar();\n  const { birth, setBirth } = useUser();\n  const { options } = useTemplateOptions();\n  const workingholidayPeriod = React.useMemo(\n    () => options.workingholidayPeriod,\n    [options.workingholidayPeriod]\n  );\n\n  const handleFinish = React.useCallback(() => {\n    initUserCalendar({ birthday: birth, workingholidayPeriod });\n    close();\n  }, [close, initUserCalendar, birth, workingholidayPeriod]);\n\n  const handleDateChange = React.useCallback(\n    (date: Date | null) => {\n      if (!date) return;\n      setBirth(date.toISOString());\n    },\n    [setBirth]\n  );\n\n  return (\n    <Dialog open={isOpen}>\n      <DialogTitle>Welcome to Plangoab</DialogTitle>\n      <DialogContent>\n        <p>\n          hi \n          <br />\n          <br />\n          Plangoab helps you to create awesome plan to go abroad!\n          <br />\n          <br />\n          Let's input your birthday and create your plans\n        </p>\n        <InputContainer>\n          <Avatar alt=\"you\" />\n          <DatePicker\n            disableFuture\n            openTo=\"year\"\n            format=\"yyyy-MM-dd\"\n            label=\"Date of birth\"\n            views={[\"year\", \"month\", \"date\"]}\n            value={birth}\n            onChange={handleDateChange}\n          />\n        </InputContainer>\n        <ButtonsContainer>\n          <Button\n            onClick={handleFinish}\n            variant=\"contained\"\n            color=\"primary\"\n            style={{ textTransform: \"none\" }}\n          >\n            Create Calendar\n          </Button>\n          <AdvancedOptions />\n        </ButtonsContainer>\n      </DialogContent>\n      <Divider />\n      <DialogActions>\n        <PolicyExplanation />\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nconst InputContainer = styled.div`\n  display: flex;\n  gap: 1rem;\n  padding: 2rem;\n`;\n\nconst ButtonsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Footer } from \"../molecules/Footer\";\nimport { Header } from \"../molecules/Header\";\nimport { CalendarPageContent } from \"../templates/CalendarPageContent\";\nimport { IntroFlow } from \"./IntroFlow\";\n\nexport function CalendarPage() {\n  return (\n    <>\n      <Container>\n        <Header />\n        <ContentContainer>\n          <CalendarPageContent />\n        </ContentContainer>\n        <Footer />\n      </Container>\n\n      {/* Modal */}\n      <IntroFlow />\n    </>\n  );\n}\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n`;\n\nconst ContentContainer = styled.div`\n  padding: 0 3rem;\n  display: grid;\n  gap: 5rem;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Button from \"@material-ui/core/Button\";\nimport { LogoImage } from \"../atoms/LogoImage\";\nimport { useResetAllData } from \"../../hooks/useResetAllData\";\n\nexport function ErrorPage() {\n  const { reset } = useResetAllData();\n\n  const handleResetAllData = React.useCallback(() => {\n    if (!window.confirm(\"Would you remove all data in Plangoab?\")) return;\n    reset();\n  }, [reset]);\n\n  return (\n    <Container>\n      <LogoContainer>\n        <LogoImage />\n      </LogoContainer>\n      <div>\n        Sorry\n        <br />\n        Something error happen.\n        <br />\n      </div>\n      <div>\n        <Button\n          onClick={handleResetAllData}\n          variant=\"contained\"\n          color=\"secondary\"\n        >\n          Reset data\n        </Button>\n      </div>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  height: 100vh;\n  display: grid;\n  place-items: center;\n  align-content: center;\n  gap: 2rem;\n`;\n\nconst LogoContainer = styled.div`\n  width: 10rem;\n  height: 10rem;\n`;\n","import React from \"react\";\nimport { ErrorPage } from \"./components/pages/ErrorPage\";\n\nexport class ErrorBoundary extends React.Component<any, { hasError: boolean }> {\n  constructor(props: any) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error: any) {\n    console.error(\"getDerivedStateFromError:\", error);\n    return { hasError: true };\n  }\n\n  componentDidCatch(error: any, errorInfo: any) {\n    console.error(error);\n    console.error(errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorPage />;\n    }\n\n    return this.props.children;\n  }\n}\n","import React from \"react\";\nimport { MuiPickersUtilsProvider } from \"./providers/MuiPickersUtilsProvider\";\nimport { CalendarPage } from \"./components/pages/CalendarPage\";\nimport { ErrorBoundary } from \"./ErrorBoundary\";\nimport \"./reset.css\";\nimport \"./core.css\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <ErrorBoundary>\n        <MuiPickersUtilsProvider>\n          <CalendarPage />\n        </MuiPickersUtilsProvider>\n      </ErrorBoundary>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { combineReducers } from \"@reduxjs/toolkit\";\n\nimport userReducer from \"./features/user\";\nimport templateCalendarTableReducer from \"./features/templateCalendarTable\";\nimport templateOptionReducer from \"./features/templateOption\";\nimport userCalendarsReducer from \"./features/userCalendars\";\nimport eventModalReducer from \"./ui/eventModal\";\nimport storyModalReducer from \"./ui/storyModal\";\n\nconst uiReducer = combineReducers({\n  storyModal: storyModalReducer,\n  eventModal: eventModalReducer,\n});\n\nconst featuresReducer = combineReducers({\n  templateCalendar: templateCalendarTableReducer,\n  templateOption: templateOptionReducer,\n  userCalendars: userCalendarsReducer,\n  user: userReducer,\n});\n\nconst rootReducer = combineReducers({\n  features: featuresReducer,\n  ui: uiReducer,\n});\n\nexport type RootState = ReturnType<typeof rootReducer>;\n\nexport default rootReducer;\n","import { persistReducer } from \"redux-persist\";\nimport storage from \"redux-persist/lib/storage\"; // NOTE: localstorage for web\nimport rootReducer from \"../rootReducer\";\n\nconst persistConfig = {\n  key: \"root\",\n  storage,\n  whitelist: [\"features\"],\n};\n\nexport const persistedReducer = persistReducer(persistConfig, rootReducer);\n","import { configureStore, getDefaultMiddleware } from \"@reduxjs/toolkit\";\nimport { persistedReducer } from \"./store/persistedReducer\";\n\nconst store = configureStore({\n  reducer: persistedReducer,\n  middleware: getDefaultMiddleware({ serializableCheck: false }),\n});\n\nif (process.env.NODE_ENV === \"development\" && module.hot) {\n  module.hot.accept(\"./rootReducer\", () => {\n    const newRootReducer = require(\"./rootReducer\").default;\n    store.replaceReducer(newRootReducer);\n  });\n}\n\nexport type AppDispatch = typeof store.dispatch;\n\nexport default store;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { LogoImage } from \"../atoms/LogoImage\";\n\nexport function LoadingPage() {\n  return (\n    <Container>\n      <AppName />\n      <LogoContainer>\n        <LogoImage />\n      </LogoContainer>\n      <div>\n        <CircularProgress />\n      </div>\n    </Container>\n  );\n}\n\nconst AppName = () => <h2>Plangoab</h2>;\n\nconst Container = styled.div`\n  height: 100vh;\n  display: grid;\n  place-items: center;\n  align-content: center;\n  gap: 2rem;\n`;\n\nconst LogoContainer = styled.div`\n  width: 10rem;\n  height: 10rem;\n`;\n","import React, { PropsWithChildren } from \"react\";\nimport { Provider } from \"react-redux\";\nimport { persistStore } from \"redux-persist\";\nimport { PersistGate } from \"redux-persist/integration/react\";\nimport store from \"../redux/store\";\nimport {LoadingPage} from '../components/pages/LoadingPage'\n\nexport function ReactReduxProvider<T>({ children }: PropsWithChildren<T>) {\n\n  return (\n    <Provider store={store}>\n      <PersistProvider>\n        {children}\n      </PersistProvider>\n    </Provider>\n  );\n}\n\nfunction PersistProvider<T>({ children }: PropsWithChildren<T>) {\n  let persistor = persistStore(store);\n  return (\n    <PersistGate loading={<LoadingPage />} persistor={persistor}>\n      {children}\n    </PersistGate>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { ReactReduxProvider } from './providers/ReactReduxProvider'\n\nconst render = () => {\n  ReactDOM.render(\n    <React.StrictMode>\n      <ReactReduxProvider>\n        <App />\n      </ReactReduxProvider>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n  );\n};\n\nrender();\n\n// for redux\nif (process.env.NODE_ENV === \"development\" && module.hot) {\n  module.hot.accept(\"./App\", render);\n}\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.warn))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}